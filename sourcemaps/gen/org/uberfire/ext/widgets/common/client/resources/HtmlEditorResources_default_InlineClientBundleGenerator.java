package org.uberfire.ext.widgets.common.client.resources;

import com.google.gwt.core.client.GWT;
import com.google.gwt.resources.client.ResourcePrototype;

public class HtmlEditorResources_default_InlineClientBundleGenerator implements org.uberfire.ext.widgets.common.client.resources.HtmlEditorResources {
  private static HtmlEditorResources_default_InlineClientBundleGenerator _instance0 = new HtmlEditorResources_default_InlineClientBundleGenerator();
  private void parserRulesInitializer() {
    parserRules = new com.google.gwt.resources.client.TextResource() {
      // jar:file:/home/wsiqueir/.m2/repository/org/uberfire/uberfire-widgets-commons/0.0.0/uberfire-widgets-commons-0.0.0.jar!/org/uberfire/ext/widgets/common/client/resources/js/wysihtml/parser_rules/advanced_and_extended.js
      public String getText() {
        return "/**\n * Full HTML5 compatibility rule set\n * Loosened and extended ruleset. Allows more freedom on user side\n * These rules define which tags and CSS classes are supported and which tags should be specially treated.\n */\n\nvar wysihtmlParserRulesDefaults = {\n  blockLevelEl: {\n    keep_styles: {\n      textAlign: /^((left)|(right)|(center)|(justify))$/i,\n      float: 1,\n    },\n    add_style: {\n      align: \"align_text\",\n    },\n    check_attributes: {\n      id: \"any\",\n    },\n  },\n\n  makeDiv: {\n    rename_tag: \"div\",\n    one_of_type: {\n      alignment_object: 1,\n    },\n    remove_action: \"unwrap\",\n    keep_styles: {\n      textAlign: 1,\n      float: 1,\n    },\n    add_style: {\n      align: \"align_text\",\n    },\n    check_attributes: {\n      id: \"any\",\n    },\n  },\n};\n\nvar wysihtmlParserRules = {\n  /**\n   * CSS Class white-list\n   * Following CSS classes won't be removed when parsed by the wysihtml HTML parser\n   * If all classes should pass \"any\" as classes value. Ex: \"classes\": \"any\"\n   */\n  classes: \"any\",\n\n  /* blacklist of classes is only available if classes is set to any */\n  classes_blacklist: {\n    \"Apple-interchange-newline\": 1,\n    MsoNormal: 1,\n    MsoPlainText: 1,\n  },\n\n  type_definitions: {\n    alignment_object: {\n      classes: {\n        \"wysiwyg-text-align-center\": 1,\n        \"wysiwyg-text-align-justify\": 1,\n        \"wysiwyg-text-align-left\": 1,\n        \"wysiwyg-text-align-right\": 1,\n        \"wysiwyg-float-left\": 1,\n        \"wysiwyg-float-right\": 1,\n      },\n      styles: {\n        float: [\"left\", \"right\"],\n        \"text-align\": [\"left\", \"right\", \"center\"],\n      },\n    },\n\n    valid_image_src: {\n      attrs: {\n        src: /^[^data\\:]/i,\n      },\n    },\n\n    text_color_object: {\n      styles: {\n        color: true,\n        \"background-color\": true,\n      },\n    },\n\n    text_fontsize_object: {\n      styles: {\n        \"font-size\": true,\n      },\n    },\n\n    text_formatting_object: {\n      classes: {\n        \"wysiwyg-color-aqua\": 1,\n        \"wysiwyg-color-black\": 1,\n        \"wysiwyg-color-blue\": 1,\n        \"wysiwyg-color-fuchsia\": 1,\n        \"wysiwyg-color-gray\": 1,\n        \"wysiwyg-color-green\": 1,\n        \"wysiwyg-color-lime\": 1,\n        \"wysiwyg-color-maroon\": 1,\n        \"wysiwyg-color-navy\": 1,\n        \"wysiwyg-color-olive\": 1,\n        \"wysiwyg-color-purple\": 1,\n        \"wysiwyg-color-red\": 1,\n        \"wysiwyg-color-silver\": 1,\n        \"wysiwyg-color-teal\": 1,\n        \"wysiwyg-color-white\": 1,\n        \"wysiwyg-color-yellow\": 1,\n        \"wysiwyg-font-size-large\": 1,\n        \"wysiwyg-font-size-larger\": 1,\n        \"wysiwyg-font-size-medium\": 1,\n        \"wysiwyg-font-size-small\": 1,\n        \"wysiwyg-font-size-smaller\": 1,\n        \"wysiwyg-font-size-x-large\": 1,\n        \"wysiwyg-font-size-x-small\": 1,\n        \"wysiwyg-font-size-xx-large\": 1,\n        \"wysiwyg-font-size-xx-small\": 1,\n      },\n    },\n  },\n\n  comments: 1, // if set allows comments to pass\n\n  /**\n   * Tag list\n   *\n   * The following options are available:\n   *\n   *    - add_class:        converts and deletes the given HTML4 attribute (align, clear, ...) via the given method to a css class\n   *                        The following methods are implemented in wysihtml.dom.parse:\n   *                          - align_text:  converts align attribute values (right/left/center/justify) to their corresponding css class \"wysiwyg-text-align-*\")\n   *                            <p align=\"center\">foo</p> ... becomes ... <p> class=\"wysiwyg-text-align-center\">foo</p>\n   *                          - clear_br:    converts clear attribute values left/right/all/both to their corresponding css class \"wysiwyg-clear-*\"\n   *                            <br clear=\"all\"> ... becomes ... <br class=\"wysiwyg-clear-both\">\n   *                          - align_img:    converts align attribute values (right/left) on <img> to their corresponding css class \"wysiwyg-float-*\"\n   *\n   *    - remove:             removes the element and its content\n   *\n   *    - unwrap              removes element but leaves content\n   *\n   *    - rename_tag:         renames the element to the given tag\n   *\n   *    - set_class:          adds the given class to the element (note: make sure that the class is in the \"classes\" white list above)\n   *\n   *    - set_attributes:     sets/overrides the given attributes\n   *\n   *    - check_attributes:   checks the given HTML attribute via the given method\n   *                            - url:            allows only valid urls (starting with http:// or https://)\n   *                            - src:            allows something like \"/foobar.jpg\", \"http://google.com\", ...\n   *                            - href:           allows something like \"mailto:bert@foo.com\", \"http://google.com\", \"/foobar.jpg\"\n   *                            - alt:            strips unwanted characters. if the attribute is not set, then it gets set (to ensure valid and compatible HTML)\n   *                            - numbers:        ensures that the attribute only contains numeric (integer) characters (no float values or units)\n   *                            - dimension:      for with/height attributes where floating point numbrs and percentages are allowed\n   *                            - any:            allows anything to pass\n   */\n  tags: {\n    tr: {\n      add_style: {\n        align: \"align_text\",\n      },\n      check_attributes: {\n        id: \"any\",\n      },\n    },\n    strike: {\n      unwrap: 1,\n    },\n    form: {\n      unwrap: 1,\n    },\n    rt: {\n      rename_tag: \"span\",\n    },\n    code: {},\n    acronym: {\n      rename_tag: \"span\",\n    },\n    br: {\n      add_class: {\n        clear: \"clear_br\",\n      },\n    },\n    details: {\n      unwrap: 1,\n    },\n    h4: wysihtmlParserRulesDefaults.blockLevelEl,\n    em: {},\n    title: {\n      remove: 1,\n    },\n    multicol: {\n      unwrap: 1,\n    },\n    figure: {\n      unwrap: 1,\n    },\n    xmp: {\n      unwrap: 1,\n    },\n    small: {\n      rename_tag: \"span\",\n      set_class: \"wysiwyg-font-size-smaller\",\n    },\n    area: {\n      remove: 1,\n    },\n    time: {\n      unwrap: 1,\n    },\n    dir: {\n      rename_tag: \"ul\",\n    },\n    bdi: {\n      unwrap: 1,\n    },\n    command: {\n      unwrap: 1,\n    },\n    ul: {\n      check_attributes: {\n        id: \"any\",\n      },\n    },\n    progress: {\n      rename_tag: \"span\",\n    },\n    dfn: {\n      unwrap: 1,\n    },\n    iframe: {\n      check_attributes: {\n        src: \"any\",\n        width: \"any\",\n        height: \"any\",\n        frameborder: \"any\",\n        style: \"any\",\n        id: \"any\",\n      },\n    },\n    figcaption: {\n      unwrap: 1,\n    },\n    a: {\n      check_attributes: {\n        href: \"href\", // if you compiled main manually then change this from 'url' to 'href'\n        rel: \"any\",\n        target: \"any\",\n        id: \"any\",\n      },\n    },\n    img: {\n      one_of_type: {\n        valid_image_src: 1,\n      },\n      check_attributes: {\n        width: \"dimension\",\n        alt: \"alt\",\n        src: \"src\", // if you compiled main manually then change this from 'url' to 'src'\n        height: \"dimension\",\n        id: \"any\",\n      },\n      add_class: {\n        align: \"align_img\",\n      },\n    },\n    rb: {\n      unwrap: 1,\n    },\n    footer: wysihtmlParserRulesDefaults.makeDiv,\n    noframes: {\n      remove: 1,\n    },\n    abbr: {\n      unwrap: 1,\n    },\n    u: {},\n    bgsound: {\n      remove: 1,\n    },\n    sup: {},\n    address: {\n      unwrap: 1,\n    },\n    basefont: {\n      remove: 1,\n    },\n    nav: {\n      unwrap: 1,\n    },\n    h1: wysihtmlParserRulesDefaults.blockLevelEl,\n    head: {\n      unwrap: 1,\n    },\n    tbody: wysihtmlParserRulesDefaults.blockLevelEl,\n    dd: {\n      unwrap: 1,\n    },\n    s: {\n      unwrap: 1,\n    },\n    li: {},\n    td: {\n      check_attributes: {\n        rowspan: \"numbers\",\n        colspan: \"numbers\",\n        valign: \"any\",\n        align: \"any\",\n        id: \"any\",\n        class: \"any\",\n      },\n      keep_styles: {\n        backgroundColor: 1,\n        width: 1,\n        height: 1,\n      },\n      add_style: {\n        align: \"align_text\",\n      },\n    },\n    object: {\n      remove: 1,\n    },\n\n    div: {\n      one_of_type: {\n        alignment_object: 1,\n      },\n      remove_action: \"unwrap\",\n      keep_styles: {\n        textAlign: 1,\n        float: 1,\n      },\n      add_style: {\n        align: \"align_text\",\n      },\n      check_attributes: {\n        id: \"any\",\n        contenteditable: \"any\",\n      },\n    },\n\n    option: {\n      remove: 1,\n    },\n    select: {\n      remove: 1,\n    },\n    i: {},\n    track: {\n      remove: 1,\n    },\n    wbr: {\n      remove: 1,\n    },\n    fieldset: {\n      unwrap: 1,\n    },\n    big: {\n      rename_tag: \"span\",\n      set_class: \"wysiwyg-font-size-larger\",\n    },\n    button: {\n      unwrap: 1,\n    },\n    noscript: {\n      remove: 1,\n    },\n    svg: {\n      remove: 1,\n    },\n    input: {\n      remove: 1,\n    },\n    table: {\n      keep_styles: {\n        width: 1,\n        textAlign: 1,\n        float: 1,\n      },\n      check_attributes: {\n        id: \"any\",\n      },\n    },\n    keygen: {\n      remove: 1,\n    },\n    h5: wysihtmlParserRulesDefaults.blockLevelEl,\n    meta: {\n      remove: 1,\n    },\n    map: {\n      remove: 1,\n    },\n    isindex: {\n      remove: 1,\n    },\n    mark: {\n      unwrap: 1,\n    },\n    caption: wysihtmlParserRulesDefaults.blockLevelEl,\n    tfoot: wysihtmlParserRulesDefaults.blockLevelEl,\n    base: {\n      remove: 1,\n    },\n    video: {\n      remove: 1,\n    },\n    strong: {},\n    canvas: {\n      remove: 1,\n    },\n    output: {\n      unwrap: 1,\n    },\n    marquee: {\n      unwrap: 1,\n    },\n    b: {},\n    q: {\n      check_attributes: {\n        cite: \"url\",\n        id: \"any\",\n      },\n    },\n    applet: {\n      remove: 1,\n    },\n    span: {\n      one_of_type: {\n        text_formatting_object: 1,\n        text_color_object: 1,\n        text_fontsize_object: 1,\n      },\n      keep_styles: {\n        color: 1,\n        backgroundColor: 1,\n        fontSize: 1,\n      },\n      remove_action: \"unwrap\",\n      check_attributes: {\n        id: \"any\",\n      },\n    },\n    rp: {\n      unwrap: 1,\n    },\n    spacer: {\n      remove: 1,\n    },\n    source: {\n      remove: 1,\n    },\n    aside: wysihtmlParserRulesDefaults.makeDiv,\n    frame: {\n      remove: 1,\n    },\n    section: wysihtmlParserRulesDefaults.makeDiv,\n    body: {\n      unwrap: 1,\n    },\n    ol: {},\n    nobr: {\n      unwrap: 1,\n    },\n    html: {\n      unwrap: 1,\n    },\n    summary: {\n      unwrap: 1,\n    },\n    var: {\n      unwrap: 1,\n    },\n    del: {\n      unwrap: 1,\n    },\n    blockquote: {\n      keep_styles: {\n        textAlign: 1,\n        float: 1,\n      },\n      add_style: {\n        align: \"align_text\",\n      },\n      check_attributes: {\n        cite: \"url\",\n        id: \"any\",\n      },\n    },\n    style: {\n      check_attributes: {\n        type: \"any\",\n        src: \"any\",\n        charset: \"any\",\n      },\n    },\n    device: {\n      remove: 1,\n    },\n    meter: {\n      unwrap: 1,\n    },\n    h3: wysihtmlParserRulesDefaults.blockLevelEl,\n    textarea: {\n      unwrap: 1,\n    },\n    embed: {\n      remove: 1,\n    },\n    hgroup: {\n      unwrap: 1,\n    },\n    font: {\n      rename_tag: \"span\",\n      add_class: {\n        size: \"size_font\",\n      },\n    },\n    tt: {\n      unwrap: 1,\n    },\n    noembed: {\n      remove: 1,\n    },\n    thead: {\n      add_style: {\n        align: \"align_text\",\n      },\n      check_attributes: {\n        id: \"any\",\n      },\n    },\n    blink: {\n      unwrap: 1,\n    },\n    plaintext: {\n      unwrap: 1,\n    },\n    xml: {\n      remove: 1,\n    },\n    h6: wysihtmlParserRulesDefaults.blockLevelEl,\n    param: {\n      remove: 1,\n    },\n    th: {\n      check_attributes: {\n        rowspan: \"numbers\",\n        colspan: \"numbers\",\n        valign: \"any\",\n        align: \"any\",\n        id: \"any\",\n      },\n      keep_styles: {\n        backgroundColor: 1,\n        width: 1,\n        height: 1,\n      },\n      add_style: {\n        align: \"align_text\",\n      },\n    },\n    legend: {\n      unwrap: 1,\n    },\n    hr: {},\n    label: {\n      unwrap: 1,\n    },\n    dl: {\n      unwrap: 1,\n    },\n    kbd: {\n      unwrap: 1,\n    },\n    listing: {\n      unwrap: 1,\n    },\n    dt: {\n      unwrap: 1,\n    },\n    nextid: {\n      remove: 1,\n    },\n    pre: {},\n    center: wysihtmlParserRulesDefaults.makeDiv,\n    audio: {\n      remove: 1,\n    },\n    datalist: {\n      unwrap: 1,\n    },\n    samp: {\n      unwrap: 1,\n    },\n    col: {\n      remove: 1,\n    },\n    article: wysihtmlParserRulesDefaults.makeDiv,\n    cite: {},\n    link: {\n      remove: 1,\n    },\n    script: {\n      check_attributes: {\n        type: \"any\",\n        src: \"any\",\n        charset: \"any\",\n      },\n    },\n    bdo: {\n      unwrap: 1,\n    },\n    menu: {\n      rename_tag: \"ul\",\n    },\n    colgroup: {\n      remove: 1,\n    },\n    ruby: {\n      unwrap: 1,\n    },\n    h2: wysihtmlParserRulesDefaults.blockLevelEl,\n    ins: {\n      unwrap: 1,\n    },\n    p: wysihtmlParserRulesDefaults.blockLevelEl,\n    sub: {},\n    comment: {\n      remove: 1,\n    },\n    frameset: {\n      remove: 1,\n    },\n    optgroup: {\n      unwrap: 1,\n    },\n    header: wysihtmlParserRulesDefaults.makeDiv,\n  },\n};\n\n(function () {\n  // Paste cleanup rules universal for all rules (also applied to content copied from editor)\n  var commonRules = wysihtml.lang.object(wysihtmlParserRules).clone(true);\n  commonRules.comments = false;\n  commonRules.selectors = { \"a u\": \"unwrap\" };\n  commonRules.tags.style = { remove: 1 };\n  commonRules.tags.script = { remove: 1 };\n  commonRules.tags.head = { remove: 1 };\n\n  // Paste cleanup for unindentified source\n  var universalRules = wysihtml.lang.object(commonRules).clone(true);\n  universalRules.tags.div.one_of_type.alignment_object = 1;\n  universalRules.tags.div.remove_action = \"unwrap\";\n  universalRules.tags.div.check_attributes.style = false;\n  universalRules.tags.div.keep_styles = {\n    textAlign: /^((left)|(right)|(center)|(justify))$/i,\n    float: 1,\n  };\n  universalRules.tags.span.keep_styles = false;\n\n  // Paste cleanup for MS Office\n  // TODO: should be extended to stricter ruleset, as current set will probably not cover all Office bizarreness\n  var msOfficeRules = wysihtml.lang.object(universalRules).clone(true);\n  msOfficeRules.classes = {};\n\n  window.wysihtmlParserPasteRulesets = [\n    {\n      condition:\n        /<font face=\"Times New Roman\"|class=\"?Mso|style=\"[^\"]*\\bmso-|style='[^'']*\\bmso-|w:WordDocument|class=\"OutlineElement|id=\"?docs\\-internal\\-guid\\-/i,\n      set: msOfficeRules,\n    },\n    {\n      condition: /<meta name=\"copied-from\" content=\"wysihtml\">/i,\n      set: commonRules,\n    },\n    {\n      set: universalRules,\n    },\n  ];\n})();\n";
      }
      public String getName() {
        return "parserRules";
      }
    }
    ;
  }
  private static class parserRulesInitializer {
    static {
      _instance0.parserRulesInitializer();
    }
    static com.google.gwt.resources.client.TextResource get() {
      return parserRules;
    }
  }
  public com.google.gwt.resources.client.TextResource parserRules() {
    return parserRulesInitializer.get();
  }
  private void wysihtmlInitializer() {
    wysihtml = new com.google.gwt.resources.client.TextResource() {
      // jar:file:/home/wsiqueir/.m2/repository/org/uberfire/uberfire-widgets-commons/0.0.0/uberfire-widgets-commons-0.0.0.jar!/org/uberfire/ext/widgets/common/client/resources/js/wysihtml/wysihtml.min.js
      public String getText() {
        StringBuilder builder = new StringBuilder();
        builder.append("/*! wysihtml - v0.6.0-beta1 (2016-09-01) */\n\nvar wysihtml = {\n  version: \"0.6.0-beta1\",\n  commands: {},\n  dom: {},\n  quirks: {},\n  toolbar: {},\n  lang: {},\n  selection: {},\n  views: {},\n  editorExtenders: [],\n  extendEditor: function (a) {\n    this.editorExtenders.push(a);\n  },\n  INVISIBLE_SPACE: \"\\ufeff\",\n  INVISIBLE_SPACE_REG_EXP: /\\uFEFF/g,\n  VOID_ELEMENTS: \"area, base, br, col, embed, hr, img, input, keygen, link, meta, param, source, track, wbr\",\n  PERMITTED_PHRASING_CONTENT_ONLY: \"h1, h2, h3, h4, h5, h6, p, pre\",\n  EMPTY_FUNCTION: function () {},\n  ELEMENT_NODE: 1,\n  TEXT_NODE: 3,\n  BACKSPACE_KEY: 8,\n  ENTER_KEY: 13,\n  ESCAPE_KEY: 27,\n  SPACE_KEY: 32,\n  TAB_KEY: 9,\n  DELETE_KEY: 46,\n};\n(wysihtml.polyfills = function (a, b) {\n  var c = {\n    normalizeHasCaretError: function () {\n      if (\"createRange\" in b && \"getSelection\" in a) {\n        var c,\n          d,\n          e,\n          f = window.pageYOffset,\n          g = window.pageXOffset,\n          h = b.createElement(\"div\"),\n          i = b.createTextNode(\"a\"),\n          j = b.createTextNode(\"a\"),\n          k = b.createTextNode(\"a\"),\n          l = b.createRange();\n        return (\n          document.activeElement &&\n            (1 === document.activeElement.nodeType &&\n            [\"INPUT\", \"TEXTAREA\", \"SELECT\", \"BUTTON\"].indexOf(document.activeElement.nodeName) > -1\n              ? (c = {\n                  type: \"form\",\n                  node: document.activeElement,\n                  start: document.activeElement.selectionStart,\n                  end: document.activeElement.selectionEnd,\n                })\n              : ((d = a.getSelection()),\n                d &&\n                  d.anchorNode &&\n                  (c = {\n                    type: \"range\",\n                    anchorNode: d.anchorNode,\n                    anchorOffset: d.anchorOffset,\n                    focusNode: d.focusNode,\n                    focusOffset: d.focusOffset,\n                  }))),\n          h.setAttribute(\"contenteditable\", \"true\"),\n          h.appendChild(i),\n          h.appendChild(j),\n          h.appendChild(k),\n          b.body.appendChild(h),\n          l.setStart(j, 1),\n          l.setEnd(j, 1),\n          (d = a.getSelection()),\n          d.removeAllRanges(),\n          d.addRange(l),\n          h.normalize(),\n          (d = a.getSelection()),\n          (e = 1 !== h.childNodes.length || d.anchorNode !== h.firstChild || 2 !== d.anchorOffset),\n          h.parentNode.removeChild(h),\n          d.removeAllRanges(),\n          c &&\n            (\"form\" === c.type\n              ? (\"undefined\" != typeof c.start &&\n                  \"undefined\" != typeof c.end &&\n                  c.node.setSelectionRange(c.start, c.end),\n                c.node.focus())\n              : \"range\" === c.type &&\n                ((l = b.createRange()),\n                l.setStart(c.anchorNode, c.anchorOffset),\n                l.setEnd(c.focusNode, c.focusOffset),\n                d.addRange(l))),\n          (f !== window.pageYOffset || g !== window.pageXOffset) && a.scrollTo(g, f),\n          e\n        );\n      }\n    },\n    apply: function () {\n      function d() {\n        try {\n          var b = new a.CustomEvent(\"cat\", { detail: { foo: \"bar\" } });\n          return \"cat\" === b.type && \"bar\" === b.detail.foo;\n        } catch (c) {}\n        return !1;\n      }\n      !(function (a) {\n        (a.matches =\n          a.matches ||\n          a.mozMatchesSelector ||\n          a.msMatchesSelector ||\n          a.oMatchesSelector ||\n          a.webkitMatchesSelector ||\n          function (a) {\n            for (var b = this, c = (b.document || b.ownerDocument).querySelectorAll(a), d = 0; c[d] && c[d] !== b; )\n              ++d;\n            return c[d] ? !0 : !1;\n          }),\n          (a.closest =\n            a.closest ||\n            function (a) {\n              for (var b = this; b && !b.matches(a); ) b = b.parentElement;\n              return b;\n            }),\n          (a.remove =\n            a.remove ||\n            function () {\n              this.parentNode && this.parentNode.removeChild(this);\n            });\n      })(a.Element.prototype),\n        \"classList\" in b.documentElement ||\n          !a.Object.defineProperty ||\n          \"undefined\" == typeof a.HTMLElement ||\n          a.Object.defineProperty(a.HTMLElement.prototype, \"classList\", {\n            get: function () {\n              function b(a) {\n                return function (b) {\n                  var d = c.className.split(/\\s+/),\n                    e = d.indexOf(b);\n                  a(d, e, b), (c.className = d.join(\" \"));\n                };\n              }\n              var c = this,\n                d = {\n                  add: b(function (a, b, c) {\n                    ~b || a.push(c);\n                  }),\n                  remove: b(function (a, b) {\n                    ~b && a.splice(b, 1);\n                  }),\n                  toggle: b(function (a, b, c) {\n                    ~b ? a.splice(b, 1) : a.push(c);\n                  }),\n                  contains: function (a) {\n                    return !!~c.className.split(/\\s+/).indexOf(a);\n                  },\n                  item: function (a) {\n                    return c.className.split(/\\s+/)[a] || null;\n                  },\n                };\n              return (\n                a.Object.defineProperty(d, \"length\", {\n                  get: function () {\n                    return c.className.split(/\\s+/).length;\n                  },\n                }),\n                d\n              );\n            },\n          });\n      var e = function (a) {\n          var b = [];\n          for (a = a.firstChild; a; a = a.nextSibling) 3 == a.nodeType ? b.push(a) : (b = b.concat(e(a)));\n          return b;\n        },\n        f = function (a) {\n          var b = a.ownerDocument,\n            c = a;\n          do {\n            if (c === b) return !0;\n            c = c.parentNode;\n          } while (c);\n          return !1;\n        },\n        g = function () {\n          var b =\n            (a.Node.prototype.normalize,\n            function () {\n              var b = e(this),\n                c = this.ownerDocument.defaultView.getSelection(),\n                d = c.anchorNode,\n                g = c.anchorOffset,\n                h = d && 1 === d.nodeType && d.childNodes.length > 0 ? d.childNodes[g] : void 0,\n                i = c.focusNode,\n                j = c.focusOffset,\n                k = i && 1 === i.nodeType && j > 0 ? i.childNodes[j - 1] : void 0,\n                l = this.ownerDocument.createRange(),\n                m = b.shift(),\n                n = m ? b.shift() : null;\n              for (\n                k && 3 === k.nodeType && ((i = k), (j = k.nodeValue.length), (k = void 0)),\n                  h && 3 === h.nodeType && ((d = h), (g = 0), (h = void 0)),\n                  ((d === i && g > j) ||\n                    (d !== i &&\n                      d.compareDocumentPosition(i) & a.Node.DOCUMENT_POSITION_PRECEDING &&\n                      !(d.compareDocumentPosition(i) & a.Node.DOCUMENT_POSITION_CONTAINS))) &&\n                    ((i = [d, (d = i)][0]), (j = [g, (g = j)][0]));\n                m && n;\n\n              )\n                n.previousSibling && n.previousSibling === m\n                  ? (d === n && ((d = m), (g = m.nodeValue.length + g)),\n                    i === n && ((i = m), (j = m.nodeValue.length + j)),\n                    (m.nodeValue = m.nodeValue + n.nodeValue),\n                    n.parentNode.removeChild(n),\n                    (n = b.shift()))\n                  : ((m = n), (n = b.shift()));\n              k && (j = Array.prototype.indexOf.call(k.parentNode.childNodes, k) + 1),\n                h && (g = Array.prototype.indexOf.call(h.parentNode.childNodes, h)),\n                f(this) &&\n                  d &&\n                  d.parentNode &&\n                  i &&\n                  i.parentNode &&\n                  (l.setStart(d, g), l.setEnd(i, j), c.removeAllRanges(), c.addRange(l));\n            });\n          a.Node.prototype.normalize = b;\n        },\n        h = function () {\n          a.removeEventListener(\"load\", h),\n            \"Node\" in a && \"normalize\" in a.Node.prototype && c.normalizeHasCaretError() && g();\n        };\n      \"complete\" !== b.readyState ? a.addEventListener(\"load\", h) : h(),\n        (function () {\n          function c(a, c) {\n            c = c || { bubbles: !1, cancelable: !1, detail: void 0 };\n            var d = b.createEvent(\"CustomEvent\");\n            return d.initCustomEvent(a, c.bubbles, c.cancelable, c.detail), d;\n          }\n          !d() && \"CustomEvent\" in a && ((c.prototype = a.Event.prototype), (a.CustomEvent = c));\n        })();\n    },\n  };\n  return c;\n}),\n  wysihtml.polyfills(window, document).apply();\nvar Base = function () {};\n(Base.extend = function (a, b) {\n  var c = Base.prototype.extend;\n  Base._prototyping = !0;\n  var d = new this();\n  c.call(d, a), (d.base = function () {}), delete Base._prototyping;\n  var e = d.constructor,\n    f = (d.constructor = function () {\n      if (!Base._prototyping)\n        if (this._constructing || this.constructor == f)\n          (this._constructing = !0), e.apply(this, arguments), delete this._constructing;\n        else if (null != arguments[0]) return (arguments[0].extend || c).call(arguments[0], d);\n    });\n  return (\n    (f.ancestor = this),\n    (f.extend = this.extend),\n    (f.forEach = this.forEach),\n    (f.implement = this.implement),\n    (f.prototype = d),\n    (f.toString = this.toString),\n    (f.valueOf = function (a) {\n      return \"object\" == a ? f : e.valueOf();\n    }),\n    c.call(f, b),\n    \"function\" == typeof f.init && f.init(),\n    f\n  );\n}),\n  (Base.prototype = {\n    extend: function (a, b) {\n      if (arguments.length > 1) {\n        var c = this[a];\n        if (c && \"function\" == typeof b && (!c.valueOf || c.valueOf() != b.valueOf()) && /\\bbase\\b/.test(b)) {\n          var d = b.valueOf();\n          (b = function () {\n            var a = this.base || Base.prototype.base;\n            this.base = c;\n            var b = d.apply(this, arguments);\n            return (this.base = a), b;\n          }),\n            (b.valueOf = function (a) {\n              return \"object\" == a ? b : d;\n            }),\n            (b.toString = Base.toString);\n        }\n        this[a] = b;\n      } else if (a) {\n        var e = Base.prototype.extend;\n        Base._prototyping || \"function\" == typeof this || (e = this.extend || e);\n        for (\n          var f = { toSource: null }, g = [\"constructor\", \"toString\", \"valueOf\"], h = Base._prototyping ? 0 : 1;\n          (i = g[h++]);\n\n        )\n          a[i] != f[i] && e.call(this, i, a[i]);\n        for (var i in a) f[i] || e.call(this, i, a[i]);\n      }\n      return this;\n    },\n  }),\n  (Base = Base.extend(\n    {\n      constructor: function () {\n        this.extend(arguments[0]);\n      },\n    },\n    {\n      ancestor: Object,\n      version: \"1.1\",\n      forEach: function (a, b, c) {\n        for (var d in a) void 0 === this.prototype[d] && b.call(c, a[d], d, a);\n      },\n      implement: function () {\n        for (var a = 0; a < arguments.length; a++)\n          \"function\" == typeof arguments[a] ? arguments[a](this.prototype) : this.prototype.extend(arguments[a]);\n        return this;\n      },\n      toString: function () {\n        return String(this.valueOf());\n      },\n    }\n  ));\nvar rangy;\n!(function () {\n  function a(a, b) {\n    var c = typeof a[b];\n    return c == u || !(c != t || !a[b]) || \"unknown\" == c;\n  }\n  function b(a, b) {\n    return !(typeof a[b] != t || !a[b]);\n  }\n  function c(a, b) {\n    return typeof a[b] != v;\n  }\n  function d(a) {\n    return function (b, c) {\n      for (var d = c.length; d--; ) if (!a(b, c[d])) return !1;\n      return !0;\n    };\n  }\n  function e(a) {\n    return a && A(a, z) && C(a, y);\n  }\n  function f(a) {\n    return b(a, \"body\") ? a.body : a.getElementsByTagName(\"body\")[0];\n  }\n  function g(b) {\n    typeof console != v && a(console, \"log\") && console.log(b);\n  }\n  function h(a, b) {\n    F && b ? alert(a) : g(a);\n  }\n  function i(a) {\n    (H.initialized = !0),\n      (H.supported = !1),\n      h(\"Rangy is not supported in this environment. Reason: \" + a, H.config.alertOnFail);\n  }\n  function j(a) {\n    h(\"Rangy warning: \" + a, H.config.alertOnWarn);\n  }\n  function k(a) {\n    return a.message || a.description || String(a);\n  }\n  function l() {\n    if (F && !H.initialized) {\n      var b,\n        c = !1,\n        d = !1;\n      a(document, \"createRange\") && ((b = document.createRange()), A(b, x) && C(b, w) && (c = !0));\n      var h = f(document);\n      if (!h || \"body\" != h.nodeName.toLowerCase()) return void i(\"No body element found\");\n      if ((h && a(h, \"createTextRange\") && ((b = h.createTextRange()), e(b) && (d = !0)), !c && !d))\n        return void i(\"Neither Range nor TextRange are available\");\n      (H.initialized = !0), (H.features = { implementsDomRange: c, implementsTextRange: d });\n      var j, l;\n      for (var m in E) (j = E[m]) instanceof p && j.init(j, H);\n      for (var n = 0, o = K.length; o > n; ++n)\n        try {\n          K[n](H);\n        } catch (q) {\n          (l = \"Rangy init listener threw an exception. Continuing. Detail: \" + k(q)), g(l);\n        }\n    }\n  }\n  function m(a, b, c) {\n    c && (a += \" in module \" + c.name), H.warn(\"DEPRECATED: \" + a + \" is deprecated. Please use \" + b + \" instead.\");\n  }\n  function n(a, b, c, d) {\n    a[b] = function () {\n      return m(b, c, d), a[c].apply(a, G.toArray(arguments));\n    };\n  }\n  function o(a) {\n    (a = a || window), l();\n    for (var b = 0, c = L.length; c > b; ++b) L[b](a);\n  }\n  function p(a, b, c) {\n    (this.name = a), (this.dependencies = b), (this.initialized = !1), (this.supported = !1), (this.initializer = c);\n  }\n  function q(a, b, c) {\n    var d = new p(a, b, function (b) {\n      if (!b.initialized) {\n        b.initialized = !0;\n        try {\n          c(H, b), (b.supported = !0);\n        } catch (d) {\n          var e = \"Module '\" + a + \"' failed to load: \" + k(d);\n          g(e), d.stack && g(d.stack);\n        }\n      }\n    });\n    return (E[a] = d), d;\n  }\n  function r() {}\n  function s() {}\n  var t = \"object\",\n    u = \"function\",\n    v = \"undefined\",\n    w = [\"startContainer\", \"startOffset\", \"endContainer\", \"endOffset\", \"collapsed\", \"commonAncestorContainer\"],\n    x = [\n      \"setStart\",\n      \"setStartBefore\",\n      \"setStartAfter\",\n      \"setEnd\",\n      \"setEndBefore\",\n      \"setEndAfter\",\n      \"collapse\",\n      \"selectNode\",\n      \"selectNodeContents\",\n      \"compareBoundaryPoints\",\n      \"deleteContents\",\n      \"extractContents\",\n      \"cloneContents\",\n      \"insertNode\",\n      \"surroundContents\",\n      \"cloneRange\",\n      \"toString\",\n      \"detach\",\n    ],\n    y = [\"boundingHeight\", \"boundingLeft\", \"boundingTop\", \"boundingWidth\", \"htmlText\", \"text\"],\n    z = [\n      \"collapse\",\n      \"compareEndPoints\",\n      \"duplicate\",\n      \"moveToElementText\",\n      \"parentElement\",\n      \"select\",\n      \"setEndPoint\",\n      \"getBoundingClientRect\",\n    ],\n    A = d(a),\n    B = d(b),\n    C = d(c),\n    D = [].forEach\n      ? function (a, b) {\n          a.forEach(b);\n        }\n      : function (a, b) {\n          for (var c = 0, d = a.length; d > c; ++c) b(a[c], c);\n        },\n    E = {},\n    F = typeof window != v && typeof document != v,\n    G = {\n      isHostMethod: a,\n      isHostObject: b,\n      isHostProperty: c,\n      areHostMethods: A,\n      areHostObjects: B,\n      areHostProperties: C,\n      isTextRange: e,\n      getBody: f,\n      forEach: D,\n    },\n    H = {\n      version: \"1.3.1-dev\",\n      initialized: !1,\n      isBrowser: F,\n      supported: !0,\n      util: G,\n      features: {},\n      modules: E,\n      config: {\n        alertOnFail: !1,\n        alertOnWarn: !1,\n        preferTextRange: !1,\n        autoInitialize: typeof rangyAutoInitialize == v ? !0 : rangyAutoInitialize,\n      },\n    };\n  (H.fail = i), (H.warn = j);\n  var I;\n  ({}.hasOwnProperty\n    ? ((G.extend = I =\n        function (a, b, c) {\n          var d, e;\n          for (var f in b)\n            b.hasOwnProperty(f) &&\n              ((d = a[f]),\n              (e = b[f]),\n              c && null !== d && \"object\" == typeof d && null !== e && \"object\" == typeof e && I(d, e, !0),\n              (a[f] = e));\n          return b.hasOwnProperty(\"toString\") && (a.toString = b.toString), a;\n        }),\n      (G.createOptions = function (a, b) {\n  ");
        builder.append("      var c = {};\n        return I(c, b), a && I(c, a), c;\n      }))\n    : i(\"hasOwnProperty not supported\"),\n    F || i(\"Rangy can only run in a browser\"),\n    (function () {\n      var a;\n      if (F) {\n        var b = document.createElement(\"div\");\n        b.appendChild(document.createElement(\"span\"));\n        var c = [].slice;\n        try {\n          1 == c.call(b.childNodes, 0)[0].nodeType &&\n            (a = function (a) {\n              return c.call(a, 0);\n            });\n        } catch (d) {}\n      }\n      a ||\n        (a = function (a) {\n          for (var b = [], c = 0, d = a.length; d > c; ++c) b[c] = a[c];\n          return b;\n        }),\n        (G.toArray = a);\n    })());\n  var J;\n  F &&\n    (a(document, \"addEventListener\")\n      ? (J = function (a, b, c) {\n          a.addEventListener(b, c, !1);\n        })\n      : a(document, \"attachEvent\")\n      ? (J = function (a, b, c) {\n          a.attachEvent(\"on\" + b, c);\n        })\n      : i(\"Document does not have required addEventListener or attachEvent method\"),\n    (G.addListener = J));\n  var K = [];\n  (G.deprecationNotice = m),\n    (G.createAliasForDeprecatedMethod = n),\n    (H.init = l),\n    (H.addInitListener = function (a) {\n      H.initialized ? a(H) : K.push(a);\n    });\n  var L = [];\n  (H.addShimListener = function (a) {\n    L.push(a);\n  }),\n    F && ((H.shim = H.createMissingNativeApi = o), n(H, \"createMissingNativeApi\", \"shim\")),\n    (p.prototype = {\n      init: function () {\n        for (var a, b, c = this.dependencies || [], d = 0, e = c.length; e > d; ++d) {\n          if (((b = c[d]), (a = E[b]), !(a && a instanceof p)))\n            throw new Error(\"required module '\" + b + \"' not found\");\n          if ((a.init(), !a.supported)) throw new Error(\"required module '\" + b + \"' not supported\");\n        }\n        this.initializer(this);\n      },\n      fail: function (a) {\n        throw ((this.initialized = !0), (this.supported = !1), new Error(a));\n      },\n      warn: function (a) {\n        H.warn(\"Module \" + this.name + \": \" + a);\n      },\n      deprecationNotice: function (a, b) {\n        H.warn(\"DEPRECATED: \" + a + \" in module \" + this.name + \" is deprecated. Please use \" + b + \" instead\");\n      },\n      createError: function (a) {\n        return new Error(\"Error in Rangy \" + this.name + \" module: \" + a);\n      },\n    }),\n    (H.createModule = function (a) {\n      var b, c;\n      2 == arguments.length ? ((b = arguments[1]), (c = [])) : ((b = arguments[2]), (c = arguments[1]));\n      var d = q(a, c, b);\n      H.initialized && H.supported && d.init();\n    }),\n    (H.createCoreModule = function (a, b, c) {\n      q(a, b, c);\n    }),\n    (H.RangePrototype = r),\n    (H.rangePrototype = new r()),\n    (H.selectionPrototype = new s()),\n    H.createCoreModule(\"DomUtil\", [], function (a, b) {\n      function c(a) {\n        var b;\n        return typeof a.namespaceURI == F || null === (b = a.namespaceURI) || \"http://www.w3.org/1999/xhtml\" == b;\n      }\n      function d(a) {\n        var b = a.parentNode;\n        return 1 == b.nodeType ? b : null;\n      }\n      function e(a) {\n        for (var b = 0; (a = a.previousSibling); ) ++b;\n        return b;\n      }\n      function f(a) {\n        switch (a.nodeType) {\n          case 7:\n          case 10:\n            return 0;\n          case 3:\n          case 8:\n            return a.length;\n          default:\n            return a.childNodes.length;\n        }\n      }\n      function g(a, b) {\n        var c,\n          d = [];\n        for (c = a; c; c = c.parentNode) d.push(c);\n        for (c = b; c; c = c.parentNode) if (K(d, c)) return c;\n        return null;\n      }\n      function h(a, b, c) {\n        for (var d = c ? b : b.parentNode; d; ) {\n          if (d === a) return !0;\n          d = d.parentNode;\n        }\n        return !1;\n      }\n      function i(a, b) {\n        return h(a, b, !0);\n      }\n      function j(a, b, c) {\n        for (var d, e = c ? a : a.parentNode; e; ) {\n          if (((d = e.parentNode), d === b)) return e;\n          e = d;\n        }\n        return null;\n      }\n      function k(a) {\n        var b = a.nodeType;\n        return 3 == b || 4 == b || 8 == b;\n      }\n      function l(a) {\n        if (!a) return !1;\n        var b = a.nodeType;\n        return 3 == b || 8 == b;\n      }\n      function m(a, b) {\n        var c = b.nextSibling,\n          d = b.parentNode;\n        return c ? d.insertBefore(a, c) : d.appendChild(a), a;\n      }\n      function n(a, b, c) {\n        var d = a.cloneNode(!1);\n        if ((d.deleteData(0, b), a.deleteData(b, a.length - b), m(d, a), c))\n          for (var f, g = 0; (f = c[g++]); )\n            f.node == a && f.offset > b\n              ? ((f.node = d), (f.offset -= b))\n              : f.node == a.parentNode && f.offset > e(a) && ++f.offset;\n        return d;\n      }\n      function o(a) {\n        if (9 == a.nodeType) return a;\n        if (typeof a.ownerDocument != F) return a.ownerDocument;\n        if (typeof a.document != F) return a.document;\n        if (a.parentNode) return o(a.parentNode);\n        throw b.createError(\"getDocument: no document found for node\");\n      }\n      function p(a) {\n        var c = o(a);\n        if (typeof c.defaultView != F) return c.defaultView;\n        if (typeof c.parentWindow != F) return c.parentWindow;\n        throw b.createError(\"Cannot get a window object for node\");\n      }\n      function q(a) {\n        if (typeof a.contentDocument != F) return a.contentDocument;\n        if (typeof a.contentWindow != F) return a.contentWindow.document;\n        throw b.createError(\"getIframeDocument: No Document object found for iframe element\");\n      }\n      function r(a) {\n        if (typeof a.contentWindow != F) return a.contentWindow;\n        if (typeof a.contentDocument != F) return a.contentDocument.defaultView;\n        throw b.createError(\"getIframeWindow: No Window object found for iframe element\");\n      }\n      function s(a) {\n        return a && G.isHostMethod(a, \"setTimeout\") && G.isHostObject(a, \"document\");\n      }\n      function t(a, b, c) {\n        var d;\n        if (\n          (a\n            ? G.isHostProperty(a, \"nodeType\")\n              ? (d = 1 == a.nodeType && \"iframe\" == a.tagName.toLowerCase() ? q(a) : o(a))\n              : s(a) && (d = a.document)\n            : (d = document),\n          !d)\n        )\n          throw b.createError(c + \"(): Parameter must be a Window object or DOM node\");\n        return d;\n      }\n      function u(a) {\n        for (var b; (b = a.parentNode); ) a = b;\n        return a;\n      }\n      function v(a, c, d, f) {\n        var h, i, k, l, m;\n        if (a == d) return c === f ? 0 : f > c ? -1 : 1;\n        if ((h = j(d, a, !0))) return c <= e(h) ? -1 : 1;\n        if ((h = j(a, d, !0))) return e(h) < f ? -1 : 1;\n        if (((i = g(a, d)), !i)) throw new Error(\"comparePoints error: nodes have no common ancestor\");\n        if (((k = a === i ? i : j(a, i, !0)), (l = d === i ? i : j(d, i, !0)), k === l))\n          throw b.createError(\"comparePoints got to case 4 and childA and childB are the same!\");\n        for (m = i.firstChild; m; ) {\n          if (m === k) return -1;\n          if (m === l) return 1;\n          m = m.nextSibling;\n        }\n      }\n      function w(a) {\n        var b;\n        try {\n          return (b = a.parentNode), !1;\n        } catch (c) {\n          return !0;\n        }\n      }\n      function x(a) {\n        if (!a) return \"[No node]\";\n        if (L && w(a)) return \"[Broken node]\";\n        if (k(a)) return '\"' + a.data + '\"';\n        if (1 == a.nodeType) {\n          var b = a.id ? ' id=\"' + a.id + '\"' : \"\";\n          return (\n            \"<\" +\n            a.nodeName +\n            b +\n            \">[index:\" +\n            e(a) +\n            \",length:\" +\n            a.childNodes.length +\n            \"][\" +\n            (a.innerHTML || \"[innerHTML not supported]\").slice(0, 25) +\n            \"]\"\n          );\n        }\n        return a.nodeName;\n      }\n      function y(a) {\n        for (var b, c = o(a).createDocumentFragment(); (b = a.firstChild); ) c.appendChild(b);\n        return c;\n      }\n      function z(a, b, c) {\n        var d = H(a),\n          e = a.createElement(\"div\");\n        (e.contentEditable = \"\" + !!c), b && (e.innerHTML = b);\n        var f = d.firstChild;\n        return f ? d.insertBefore(e, f) : d.appendChild(e), e;\n      }\n      function A(a) {\n        return a.parentNode.removeChild(a);\n      }\n      function B(a) {\n        (this.root = a), (this._next = a);\n      }\n      function C(a) {\n        return new B(a);\n      }\n      function D(a, b) {\n        (this.node = a), (this.offset = b);\n      }\n      function E(a) {\n        (this.code = this[a]), (this.codeName = a), (this.message = \"DOMException: \" + this.codeName);\n      }\n      var F = \"undefined\",\n        G = a.util,\n        H = G.getBody;\n      G.areHostMethods(document, [\"createDocumentFragment\", \"createElement\", \"createTextNode\"]) ||\n        b.fail(\"document missing a Node creation method\"),\n        G.isHostMethod(document, \"getElementsByTagName\") || b.fail(\"document missing getElementsByTagName method\");\n      var I = document.createElement(\"div\");\n      G.areHostMethods(\n        I,\n        [\"insertBefore\", \"appendChild\", \"cloneNode\"] ||\n          !G.areHostObjects(I, [\"previousSibling\", \"nextSibling\", \"childNodes\", \"parentNode\"])\n      ) || b.fail(\"Incomplete Element implementation\"),\n        G.isHostProperty(I, \"innerHTML\") || b.fail(\"Element is missing innerHTML property\");\n      var J = document.createTextNode(\"test\");\n      G.areHostMethods(\n        J,\n        [\"splitText\", \"deleteData\", \"insertData\", \"appendData\", \"cloneNode\"] ||\n          !G.areHostObjects(I, [\"previousSibling\", \"nextSibling\", \"childNodes\", \"parentNode\"]) ||\n          !G.areHostProperties(J, [\"data\"])\n      ) || b.fail(\"Incomplete Text Node implementation\");\n      var K = function (a, b) {\n          for (var c = a.length; c--; ) if (a[c] === b) return !0;\n          return !1;\n        },\n        L = !1;\n      !(function () {\n        var b = document.createElement(\"b\");\n        b.innerHTML = \"1\";\n        var c = b.firstChild;\n        (b.innerHTML = \"<br />\"), (L = w(c)), (a.features.crashyTextNodes = L);\n      })();\n      var M;\n      typeof window.getComputedStyle != F\n        ? (M = function (a, b) {\n            return p(a).getComputedStyle(a, null)[b];\n          })\n        : typeof document.documentElement.currentStyle != F\n        ? (M = function (a, b) {\n            return a.currentStyle ? a.currentStyle[b] : \"\";\n          })\n        : b.fail(\"No means of obtaining computed style properties found\"),\n        (B.prototype = {\n          _current: null,\n          hasNext: function () {\n            return !!this._next;\n          },\n          next: function () {\n            var a,\n              b,\n              c = (this._current = this._next);\n            if (this._current)\n              if ((a = c.firstChild)) this._next = a;\n              else {\n                for (b = null; c !== this.root && !(b = c.nextSibling); ) c = c.parentNode;\n                this._next = b;\n              }\n            return this._current;\n          },\n          detach: function () {\n            this._current = this._next = this.root = null;\n          },\n        }),\n        (D.prototype = {\n          equals: function (a) {\n            return !!a && this.node === a.node && this.offset == a.offset;\n          },\n          inspect: function () {\n            return \"[DomPosition(\" + x(this.node) + \":\" + this.offset + \")]\";\n          },\n          toString: function () {\n            return this.inspect();\n          },\n        }),\n        (E.prototype = {\n          INDEX_SIZE_ERR: 1,\n          HIERARCHY_REQUEST_ERR: 3,\n          WRONG_DOCUMENT_ERR: 4,\n          NO_MODIFICATION_ALLOWED_ERR: 7,\n          NOT_FOUND_ERR: 8,\n          NOT_SUPPORTED_ERR: 9,\n          INVALID_STATE_ERR: 11,\n          INVALID_NODE_TYPE_ERR: 24,\n        }),\n        (E.prototype.toString = function () {\n          return this.message;\n        }),\n        (a.dom = {\n          arrayContains: K,\n          isHtmlNamespace: c,\n          parentElement: d,\n          getNodeIndex: e,\n          getNodeLength: f,\n          getCommonAncestor: g,\n          isAncestorOf: h,\n          isOrIsAncestorOf: i,\n          getClosestAncestorIn: j,\n          isCharacterDataNode: k,\n          isTextOrCommentNode: l,\n          insertAfter: m,\n          splitDataNode: n,\n          getDocument: o,\n          getWindow: p,\n          getIframeWindow: r,\n          getIframeDocument: q,\n          getBody: H,\n          isWindow: s,\n          getContentDocument: t,\n          getRootContainer: u,\n          comparePoints: v,\n          isBrokenNode: w,\n          inspectNode: x,\n          getComputedStyleProperty: M,\n          createTestElement: z,\n          removeNode: A,\n          fragmentFromNodeChildren: y,\n          createIterator: C,\n          DomPosition: D,\n        }),\n        (a.DOMException = E);\n    }),\n    H.createCoreModule(\"DomRange\", [\"DomUtil\"], function (a, b) {\n      function c(a, b) {\n        return 3 != a.nodeType && (P(a, b.startContainer) || P(a, b.endContainer));\n      }\n      function d(a) {\n        return a.document || Q(a.startContainer);\n      }\n      function e(a) {\n        return W(a.startContainer);\n      }\n      function f(a) {\n        return new L(a.parentNode, O(a));\n      }\n      function g(a) {\n        return new L(a.parentNode, O(a) + 1);\n      }\n      function h(a, b, c) {\n        var d = 11 == a.nodeType ? a.firstChild : a;\n        return (\n          N(b)\n            ? c == b.length\n              ? J.insertAfter(a, b)\n              : b.parentNode.insertBefore(a, 0 == c ? b : S(b, c))\n            : c >= b.childNodes.length\n            ? b.appendChild(a)\n            : b.insertBefore(a, b.childNodes[c]),\n          d\n        );\n      }\n      function i(a, b, c) {\n        if ((z(a), z(b), d(b) != d(a))) throw new M(\"WRONG_DOCUMENT_ERR\");\n        var e = R(a.startContainer, a.startOffset, b.endContainer, b.endOffset),\n          f = R(a.endContainer, a.endOffset, b.startContainer, b.startOffset);\n        return c ? 0 >= e && f >= 0 : 0 > e && f > 0;\n      }\n      function j(a) {\n        for (var b, c, e, f = d(a.range).createDocumentFragment(); (c = a.next()); ) {\n          if (\n            ((b = a.isPartiallySelectedSubtree()),\n            (c = c.cloneNode(!b)),\n            b && ((e = a.getSubtreeIterator()), c.appendChild(j(e)), e.detach()),\n            10 == c.nodeType)\n          )\n            throw new M(\"HIERARCHY_REQUEST_ERR\");\n          f.appendChild(c);\n        }\n        return f;\n      }\n      function k(a, b, c) {\n        var d, e;\n        c = c || { stop: !1 };\n        for (var f, g; (f = a.next()); )\n          if (a.isPartiallySelectedSubtree()) {\n            if (b(f) === !1) return void (c.stop = !0);\n            if (((g = a.getSubtreeIterator()), k(g, b, c), g.detach(), c.stop)) return;\n          } else for (d = J.createIterator(f); (e = d.next()); ) if (b(e) === !1) return void (c.stop = !0);\n      }\n      function l(a) {\n        for (var b; a.next(); )\n          a.isPartiallySelectedSubtree() ? ((b = a.getSubtreeIterator()), l(b), b.detach()) : a.remove();\n      }\n      function m(a) {\n        for (var b, c, e = d(a.range).createDocumentFragment(); (b = a.next()); ) {\n          if (\n            (a.isPartiallySelectedSubtree()\n              ? ((b = b.cloneNode(!1)), (c = a.getSubtreeIterator()), b.appendChild(m(c)), c.detach())\n              : a.remove(),\n            10 == b.nodeType)\n          )\n            throw new M(\"HIERARCHY_REQUEST_ERR\");\n          e.appendChild(b);\n        }\n        return e;\n      }\n      function n(a, b, c) {\n        var d,\n          e = !(!b || !b.length),\n          f = !!c;\n        e && (d = new RegExp(\"^(\" + b.join(\"|\") + \")$\"));\n        var g = [];\n        return (\n          k(new p(a, !1), function (b) {\n            if ((!e || d.test(b.nodeType)) && (!f || c(b))) {\n              var h = a.startContainer;\n              if (b != h || !N(h) || a.startOffset != h.length) {\n                var i = a.endContainer;\n                (b == i && N(i) && 0 == a.endOffset) || g.push(b);\n              }\n            }\n          }),\n          g\n        );\n      }\n      function o(a) {\n        var b = \"undefined\" == typeof a.getName ? \"Range\" : a.getName();\n        return (\n          \"[\" +\n          b +\n          \"(\" +\n          J.insp");
        builder.append("ectNode(a.startContainer) +\n          \":\" +\n          a.startOffset +\n          \", \" +\n          J.inspectNode(a.endContainer) +\n          \":\" +\n          a.endOffset +\n          \")]\"\n        );\n      }\n      function p(a, b) {\n        if (((this.range = a), (this.clonePartiallySelectedTextNodes = b), !a.collapsed)) {\n          (this.sc = a.startContainer), (this.so = a.startOffset), (this.ec = a.endContainer), (this.eo = a.endOffset);\n          var c = a.commonAncestorContainer;\n          this.sc === this.ec && N(this.sc)\n            ? ((this.isSingleCharacterDataNode = !0), (this._first = this._last = this._next = this.sc))\n            : ((this._first = this._next =\n                this.sc !== c || N(this.sc) ? T(this.sc, c, !0) : this.sc.childNodes[this.so]),\n              (this._last = this.ec !== c || N(this.ec) ? T(this.ec, c, !0) : this.ec.childNodes[this.eo - 1]));\n        }\n      }\n      function q(a) {\n        return function (b, c) {\n          for (var d, e = c ? b : b.parentNode; e; ) {\n            if (((d = e.nodeType), V(a, d))) return e;\n            e = e.parentNode;\n          }\n          return null;\n        };\n      }\n      function r(a, b) {\n        if (ea(a, b)) throw new M(\"INVALID_NODE_TYPE_ERR\");\n      }\n      function s(a, b) {\n        if (!V(b, a.nodeType)) throw new M(\"INVALID_NODE_TYPE_ERR\");\n      }\n      function t(a, b) {\n        if (0 > b || b > (N(a) ? a.length : a.childNodes.length)) throw new M(\"INDEX_SIZE_ERR\");\n      }\n      function u(a, b) {\n        if (ca(a, !0) !== ca(b, !0)) throw new M(\"WRONG_DOCUMENT_ERR\");\n      }\n      function v(a) {\n        if (da(a, !0)) throw new M(\"NO_MODIFICATION_ALLOWED_ERR\");\n      }\n      function w(a, b) {\n        if (!a) throw new M(b);\n      }\n      function x(a, b) {\n        return b <= (N(a) ? a.length : a.childNodes.length);\n      }\n      function y(a) {\n        return (\n          !!a.startContainer &&\n          !!a.endContainer &&\n          !(X && (J.isBrokenNode(a.startContainer) || J.isBrokenNode(a.endContainer))) &&\n          W(a.startContainer) == W(a.endContainer) &&\n          x(a.startContainer, a.startOffset) &&\n          x(a.endContainer, a.endOffset)\n        );\n      }\n      function z(a) {\n        if (!y(a))\n          throw new Error(\n            \"Range error: Range is not valid. This usually happens after DOM mutation. Range: (\" + a.inspect() + \")\"\n          );\n      }\n      function A(a, b) {\n        z(a);\n        var c = a.startContainer,\n          d = a.startOffset,\n          e = a.endContainer,\n          f = a.endOffset,\n          g = c === e;\n        N(e) && f > 0 && f < e.length && S(e, f, b),\n          N(c) &&\n            d > 0 &&\n            d < c.length &&\n            ((c = S(c, d, b)), g ? ((f -= d), (e = c)) : e == c.parentNode && f >= O(c) && f++, (d = 0)),\n          a.setStartAndEnd(c, d, e, f);\n      }\n      function B(a) {\n        z(a);\n        var b = a.commonAncestorContainer.parentNode.cloneNode(!1);\n        return b.appendChild(a.cloneContents()), b.innerHTML;\n      }\n      function C(a) {\n        (a.START_TO_START = ka),\n          (a.START_TO_END = la),\n          (a.END_TO_END = ma),\n          (a.END_TO_START = na),\n          (a.NODE_BEFORE = oa),\n          (a.NODE_AFTER = pa),\n          (a.NODE_BEFORE_AND_AFTER = qa),\n          (a.NODE_INSIDE = ra);\n      }\n      function D(a) {\n        C(a), C(a.prototype);\n      }\n      function E(a, b) {\n        return function () {\n          z(this);\n          var c,\n            d,\n            e = this.startContainer,\n            f = this.startOffset,\n            h = this.commonAncestorContainer,\n            i = new p(this, !0);\n          e !== h && ((c = T(e, h, !0)), (d = g(c)), (e = d.node), (f = d.offset)), k(i, v), i.reset();\n          var j = a(i);\n          return i.detach(), b(this, e, f, e, f), j;\n        };\n      }\n      function F(b, d) {\n        function e(a, b) {\n          return function (c) {\n            s(c, Z), s(W(c), $);\n            var d = (a ? f : g)(c);\n            (b ? h : i)(this, d.node, d.offset);\n          };\n        }\n        function h(a, b, c) {\n          var e = a.endContainer,\n            f = a.endOffset;\n          (b !== a.startContainer || c !== a.startOffset) &&\n            ((W(b) != W(e) || 1 == R(b, c, e, f)) && ((e = b), (f = c)), d(a, b, c, e, f));\n        }\n        function i(a, b, c) {\n          var e = a.startContainer,\n            f = a.startOffset;\n          (b !== a.endContainer || c !== a.endOffset) &&\n            ((W(b) != W(e) || -1 == R(b, c, e, f)) && ((e = b), (f = c)), d(a, e, f, b, c));\n        }\n        var j = function () {};\n        (j.prototype = a.rangePrototype),\n          (b.prototype = new j()),\n          K.extend(b.prototype, {\n            setStart: function (a, b) {\n              r(a, !0), t(a, b), h(this, a, b);\n            },\n            setEnd: function (a, b) {\n              r(a, !0), t(a, b), i(this, a, b);\n            },\n            setStartAndEnd: function () {\n              var a = arguments,\n                b = a[0],\n                c = a[1],\n                e = b,\n                f = c;\n              switch (a.length) {\n                case 3:\n                  f = a[2];\n                  break;\n                case 4:\n                  (e = a[2]), (f = a[3]);\n              }\n              d(this, b, c, e, f);\n            },\n            setBoundary: function (a, b, c) {\n              this[\"set\" + (c ? \"Start\" : \"End\")](a, b);\n            },\n            setStartBefore: e(!0, !0),\n            setStartAfter: e(!1, !0),\n            setEndBefore: e(!0, !1),\n            setEndAfter: e(!1, !1),\n            collapse: function (a) {\n              z(this),\n                a\n                  ? d(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset)\n                  : d(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset);\n            },\n            selectNodeContents: function (a) {\n              r(a, !0), d(this, a, 0, a, U(a));\n            },\n            selectNode: function (a) {\n              r(a, !1), s(a, Z);\n              var b = f(a),\n                c = g(a);\n              d(this, b.node, b.offset, c.node, c.offset);\n            },\n            extractContents: E(m, d),\n            deleteContents: E(l, d),\n            canSurroundContents: function () {\n              z(this), v(this.startContainer), v(this.endContainer);\n              var a = new p(this, !0),\n                b = (a._first && c(a._first, this)) || (a._last && c(a._last, this));\n              return a.detach(), !b;\n            },\n            splitBoundaries: function () {\n              A(this);\n            },\n            splitBoundariesPreservingPositions: function (a) {\n              A(this, a);\n            },\n            normalizeBoundaries: function () {\n              z(this);\n              var a,\n                b = this.startContainer,\n                c = this.startOffset,\n                e = this.endContainer,\n                f = this.endOffset,\n                g = function (a) {\n                  var b = a.nextSibling;\n                  b && b.nodeType == a.nodeType && ((e = a), (f = a.length), a.appendData(b.data), Y(b));\n                },\n                h = function (a) {\n                  var d = a.previousSibling;\n                  if (d && d.nodeType == a.nodeType) {\n                    b = a;\n                    var g = a.length;\n                    if (((c = d.length), a.insertData(0, d.data), Y(d), b == e)) (f += c), (e = b);\n                    else if (e == a.parentNode) {\n                      var h = O(a);\n                      f == h ? ((e = a), (f = g)) : f > h && f--;\n                    }\n                  }\n                },\n                i = !0;\n              if (N(e))\n                f == e.length\n                  ? g(e)\n                  : 0 == f &&\n                    ((a = e.previousSibling),\n                    a &&\n                      a.nodeType == e.nodeType &&\n                      ((f = a.length), b == e && (i = !1), a.appendData(e.data), Y(e), (e = a)));\n              else {\n                if (f > 0) {\n                  var j = e.childNodes[f - 1];\n                  j && N(j) && g(j);\n                }\n                i = !this.collapsed;\n              }\n              if (i) {\n                if (N(b))\n                  0 == c\n                    ? h(b)\n                    : c == b.length &&\n                      ((a = b.nextSibling),\n                      a &&\n                        a.nodeType == b.nodeType &&\n                        (e == a && ((e = b), (f += b.length)), b.appendData(a.data), Y(a)));\n                else if (c < b.childNodes.length) {\n                  var k = b.childNodes[c];\n                  k && N(k) && h(k);\n                }\n              } else (b = e), (c = f);\n              d(this, b, c, e, f);\n            },\n            collapseToPoint: function (a, b) {\n              r(a, !0), t(a, b), this.setStartAndEnd(a, b);\n            },\n          }),\n          D(b);\n      }\n      function G(a) {\n        (a.collapsed = a.startContainer === a.endContainer && a.startOffset === a.endOffset),\n          (a.commonAncestorContainer = a.collapsed\n            ? a.startContainer\n            : J.getCommonAncestor(a.startContainer, a.endContainer));\n      }\n      function H(a, b, c, d, e) {\n        (a.startContainer = b),\n          (a.startOffset = c),\n          (a.endContainer = d),\n          (a.endOffset = e),\n          (a.document = J.getDocument(b)),\n          G(a);\n      }\n      function I(a) {\n        (this.startContainer = a),\n          (this.startOffset = 0),\n          (this.endContainer = a),\n          (this.endOffset = 0),\n          (this.document = a),\n          G(this);\n      }\n      var J = a.dom,\n        K = a.util,\n        L = J.DomPosition,\n        M = a.DOMException,\n        N = J.isCharacterDataNode,\n        O = J.getNodeIndex,\n        P = J.isOrIsAncestorOf,\n        Q = J.getDocument,\n        R = J.comparePoints,\n        S = J.splitDataNode,\n        T = J.getClosestAncestorIn,\n        U = J.getNodeLength,\n        V = J.arrayContains,\n        W = J.getRootContainer,\n        X = a.features.crashyTextNodes,\n        Y = J.removeNode;\n      p.prototype = {\n        _current: null,\n        _next: null,\n        _first: null,\n        _last: null,\n        isSingleCharacterDataNode: !1,\n        reset: function () {\n          (this._current = null), (this._next = this._first);\n        },\n        hasNext: function () {\n          return !!this._next;\n        },\n        next: function () {\n          var a = (this._current = this._next);\n          return (\n            a &&\n              ((this._next = a !== this._last ? a.nextSibling : null),\n              N(a) &&\n                this.clonePartiallySelectedTextNodes &&\n                (a === this.ec && (a = a.cloneNode(!0)).deleteData(this.eo, a.length - this.eo),\n                this._current === this.sc && (a = a.cloneNode(!0)).deleteData(0, this.so))),\n            a\n          );\n        },\n        remove: function () {\n          var a,\n            b,\n            c = this._current;\n          !N(c) || (c !== this.sc && c !== this.ec)\n            ? c.parentNode && Y(c)\n            : ((a = c === this.sc ? this.so : 0),\n              (b = c === this.ec ? this.eo : c.length),\n              a != b && c.deleteData(a, b - a));\n        },\n        isPartiallySelectedSubtree: function () {\n          var a = this._current;\n          return c(a, this.range);\n        },\n        getSubtreeIterator: function () {\n          var a;\n          if (this.isSingleCharacterDataNode) (a = this.range.cloneRange()), a.collapse(!1);\n          else {\n            a = new I(d(this.range));\n            var b = this._current,\n              c = b,\n              e = 0,\n              f = b,\n              g = U(b);\n            P(b, this.sc) && ((c = this.sc), (e = this.so)),\n              P(b, this.ec) && ((f = this.ec), (g = this.eo)),\n              H(a, c, e, f, g);\n          }\n          return new p(a, this.clonePartiallySelectedTextNodes);\n        },\n        detach: function () {\n          this.range =\n            this._current =\n            this._next =\n            this._first =\n            this._last =\n            this.sc =\n            this.so =\n            this.ec =\n            this.eo =\n              null;\n        },\n      };\n      var Z = [1, 3, 4, 5, 7, 8, 10],\n        $ = [2, 9, 11],\n        _ = [5, 6, 10, 12],\n        aa = [1, 3, 4, 5, 7, 8, 10, 11],\n        ba = [1, 3, 4, 5, 7, 8],\n        ca = q([9, 11]),\n        da = q(_),\n        ea = q([6, 10, 12]),\n        fa = document.createElement(\"style\"),\n        ga = !1;\n      try {\n        (fa.innerHTML = \"<b>x</b>\"), (ga = 3 == fa.firstChild.nodeType);\n      } catch (ha) {}\n      a.features.htmlParsingConforms = ga;\n      var ia = ga\n          ? function (a) {\n              var b = this.startContainer,\n                c = Q(b);\n              if (!b) throw new M(\"INVALID_STATE_ERR\");\n              var d = null;\n              return (\n                1 == b.nodeType ? (d = b) : N(b) && (d = J.parentElement(b)),\n                (d =\n                  null === d ||\n                  (\"HTML\" == d.nodeName && J.isHtmlNamespace(Q(d).documentElement) && J.isHtmlNamespace(d))\n                    ? c.createElement(\"body\")\n                    : d.cloneNode(!1)),\n                (d.innerHTML = a),\n                J.fragmentFromNodeChildren(d)\n              );\n            }\n          : function (a) {\n              var b = d(this),\n                c = b.createElement(\"body\");\n              return (c.innerHTML = a), J.fragmentFromNodeChildren(c);\n            },\n        ja = [\"startContainer\", \"startOffset\", \"endContainer\", \"endOffset\", \"collapsed\", \"commonAncestorContainer\"],\n        ka = 0,\n        la = 1,\n        ma = 2,\n        na = 3,\n        oa = 0,\n        pa = 1,\n        qa = 2,\n        ra = 3;\n      K.extend(a.rangePrototype, {\n        compareBoundaryPoints: function (a, b) {\n          z(this), u(this.startContainer, b.startContainer);\n          var c,\n            d,\n            e,\n            f,\n            g = a == na || a == ka ? \"start\" : \"end\",\n            h = a == la || a == ka ? \"start\" : \"end\";\n          return (\n            (c = this[g + \"Container\"]),\n            (d = this[g + \"Offset\"]),\n            (e = b[h + \"Container\"]),\n            (f = b[h + \"Offset\"]),\n            R(c, d, e, f)\n          );\n        },\n        insertNode: function (a) {\n          if ((z(this), s(a, aa), v(this.startContainer), P(a, this.startContainer)))\n            throw new M(\"HIERARCHY_REQUEST_ERR\");\n          var b = h(a, this.startContainer, this.startOffset);\n          this.setStartBefore(b);\n        },\n        cloneContents: function () {\n          z(this);\n          var a, b;\n          if (this.collapsed) return d(this).createDocumentFragment();\n          if (this.startContainer === this.endContainer && N(this.startContainer))\n            return (\n              (a = this.startContainer.cloneNode(!0)),\n              (a.data = a.data.slice(this.startOffset, this.endOffset)),\n              (b = d(this).createDocumentFragment()),\n              b.appendChild(a),\n              b\n            );\n          var c = new p(this, !0);\n          return (a = j(c)), c.detach(), a;\n        },\n        canSurroundContents: function () {\n          z(this), v(this.startContainer), v(this.endContainer);\n          var a = new p(this, !0),\n            b = (a._first && c(a._first, this)) || (a._last && c(a._last, this));\n          return a.detach(), !b;\n        },\n        surroundContents: function (a) {\n          if ((s(a, ba), !this.canSurroundContents())) throw new M(\"INVALID_STATE_ERR\");\n          var b = this.extractContents();\n          if (a.hasChildNodes()) for (; a.lastChild; ) a.removeChild(a.lastChild);\n          h(a, this.startContainer, this.startOffset), a.appendChild(b), this.selectNode(a);\n        },\n        cloneRange: function () {\n          z(this);\n          for (var a, b = new I(d(this)), c = ja.length; c--; ) (a = ja[c]), (b[a] = this[a]);\n          return b;\n        },\n        toString: function () {\n          z(this);\n          var a = this.startContainer;\n          if (a === this.endContainer && N(a))\n            return 3 == a.nodeType || 4 == a.nodeType ? a.data.slice(this.startOffset, this.endOffset) : \"\";\n          var b");
        builder.append(" = [],\n            c = new p(this, !0);\n          return (\n            k(c, function (a) {\n              (3 == a.nodeType || 4 == a.nodeType) && b.push(a.data);\n            }),\n            c.detach(),\n            b.join(\"\")\n          );\n        },\n        compareNode: function (a) {\n          z(this);\n          var b = a.parentNode,\n            c = O(a);\n          if (!b) throw new M(\"NOT_FOUND_ERR\");\n          var d = this.comparePoint(b, c),\n            e = this.comparePoint(b, c + 1);\n          return 0 > d ? (e > 0 ? qa : oa) : e > 0 ? pa : ra;\n        },\n        comparePoint: function (a, b) {\n          return (\n            z(this),\n            w(a, \"HIERARCHY_REQUEST_ERR\"),\n            u(a, this.startContainer),\n            R(a, b, this.startContainer, this.startOffset) < 0\n              ? -1\n              : R(a, b, this.endContainer, this.endOffset) > 0\n              ? 1\n              : 0\n          );\n        },\n        createContextualFragment: ia,\n        toHtml: function () {\n          return B(this);\n        },\n        intersectsNode: function (a, b) {\n          if ((z(this), W(a) != e(this))) return !1;\n          var c = a.parentNode,\n            d = O(a);\n          if (!c) return !0;\n          var f = R(c, d, this.endContainer, this.endOffset),\n            g = R(c, d + 1, this.startContainer, this.startOffset);\n          return b ? 0 >= f && g >= 0 : 0 > f && g > 0;\n        },\n        isPointInRange: function (a, b) {\n          return (\n            z(this),\n            w(a, \"HIERARCHY_REQUEST_ERR\"),\n            u(a, this.startContainer),\n            R(a, b, this.startContainer, this.startOffset) >= 0 && R(a, b, this.endContainer, this.endOffset) <= 0\n          );\n        },\n        intersectsRange: function (a) {\n          return i(this, a, !1);\n        },\n        intersectsOrTouchesRange: function (a) {\n          return i(this, a, !0);\n        },\n        intersection: function (a) {\n          if (this.intersectsRange(a)) {\n            var b = R(this.startContainer, this.startOffset, a.startContainer, a.startOffset),\n              c = R(this.endContainer, this.endOffset, a.endContainer, a.endOffset),\n              d = this.cloneRange();\n            return (\n              -1 == b && d.setStart(a.startContainer, a.startOffset), 1 == c && d.setEnd(a.endContainer, a.endOffset), d\n            );\n          }\n          return null;\n        },\n        union: function (a) {\n          if (this.intersectsOrTouchesRange(a)) {\n            var b = this.cloneRange();\n            return (\n              -1 == R(a.startContainer, a.startOffset, this.startContainer, this.startOffset) &&\n                b.setStart(a.startContainer, a.startOffset),\n              1 == R(a.endContainer, a.endOffset, this.endContainer, this.endOffset) &&\n                b.setEnd(a.endContainer, a.endOffset),\n              b\n            );\n          }\n          throw new M(\"Ranges do not intersect\");\n        },\n        containsNode: function (a, b) {\n          return b ? this.intersectsNode(a, !1) : this.compareNode(a) == ra;\n        },\n        containsNodeContents: function (a) {\n          return this.comparePoint(a, 0) >= 0 && this.comparePoint(a, U(a)) <= 0;\n        },\n        containsRange: function (a) {\n          var b = this.intersection(a);\n          return null !== b && a.equals(b);\n        },\n        containsNodeText: function (a) {\n          var b = this.cloneRange();\n          b.selectNode(a);\n          var c = b.getNodes([3]);\n          if (c.length > 0) {\n            b.setStart(c[0], 0);\n            var d = c.pop();\n            return b.setEnd(d, d.length), this.containsRange(b);\n          }\n          return this.containsNodeContents(a);\n        },\n        getNodes: function (a, b) {\n          return z(this), n(this, a, b);\n        },\n        getDocument: function () {\n          return d(this);\n        },\n        collapseBefore: function (a) {\n          this.setEndBefore(a), this.collapse(!1);\n        },\n        collapseAfter: function (a) {\n          this.setStartAfter(a), this.collapse(!0);\n        },\n        getBookmark: function (b) {\n          var c = d(this),\n            e = a.createRange(c);\n          (b = b || J.getBody(c)), e.selectNodeContents(b);\n          var f = this.intersection(e),\n            g = 0,\n            h = 0;\n          return (\n            f && (e.setEnd(f.startContainer, f.startOffset), (g = e.toString().length), (h = g + f.toString().length)),\n            { start: g, end: h, containerNode: b }\n          );\n        },\n        moveToBookmark: function (a) {\n          var b = a.containerNode,\n            c = 0;\n          this.setStart(b, 0), this.collapse(!0);\n          for (var d, e, f, g, h = [b], i = !1, j = !1; !j && (d = h.pop()); )\n            if (3 == d.nodeType)\n              (e = c + d.length),\n                !i && a.start >= c && a.start <= e && (this.setStart(d, a.start - c), (i = !0)),\n                i && a.end >= c && a.end <= e && (this.setEnd(d, a.end - c), (j = !0)),\n                (c = e);\n            else for (g = d.childNodes, f = g.length; f--; ) h.push(g[f]);\n        },\n        getName: function () {\n          return \"DomRange\";\n        },\n        equals: function (a) {\n          return I.rangesEqual(this, a);\n        },\n        isValid: function () {\n          return y(this);\n        },\n        inspect: function () {\n          return o(this);\n        },\n        detach: function () {},\n      }),\n        F(I, H),\n        K.extend(I, {\n          rangeProperties: ja,\n          RangeIterator: p,\n          copyComparisonConstants: D,\n          createPrototypeRange: F,\n          inspect: o,\n          toHtml: B,\n          getRangeDocument: d,\n          rangesEqual: function (a, b) {\n            return (\n              a.startContainer === b.startContainer &&\n              a.startOffset === b.startOffset &&\n              a.endContainer === b.endContainer &&\n              a.endOffset === b.endOffset\n            );\n          },\n        }),\n        (a.DomRange = I);\n    }),\n    H.createCoreModule(\"WrappedRange\", [\"DomRange\"], function (a, b) {\n      var c,\n        d,\n        e = a.dom,\n        f = a.util,\n        g = e.DomPosition,\n        h = a.DomRange,\n        i = e.getBody,\n        j = e.getContentDocument,\n        k = e.isCharacterDataNode;\n      if (\n        (a.features.implementsDomRange &&\n          !(function () {\n            function d(a) {\n              for (var b, c = m.length; c--; ) (b = m[c]), (a[b] = a.nativeRange[b]);\n              a.collapsed = a.startContainer === a.endContainer && a.startOffset === a.endOffset;\n            }\n            function g(a, b, c, d, e) {\n              var f = a.startContainer !== b || a.startOffset != c,\n                g = a.endContainer !== d || a.endOffset != e,\n                h = !a.equals(a.nativeRange);\n              (f || g || h) && (a.setEnd(d, e), a.setStart(b, c));\n            }\n            var k,\n              l,\n              m = h.rangeProperties;\n            (c = function (a) {\n              if (!a) throw b.createError(\"WrappedRange: Range must be specified\");\n              (this.nativeRange = a), d(this);\n            }),\n              h.createPrototypeRange(c, g),\n              (k = c.prototype),\n              (k.selectNode = function (a) {\n                this.nativeRange.selectNode(a), d(this);\n              }),\n              (k.cloneContents = function () {\n                return this.nativeRange.cloneContents();\n              }),\n              (k.surroundContents = function (a) {\n                this.nativeRange.surroundContents(a), d(this);\n              }),\n              (k.collapse = function (a) {\n                this.nativeRange.collapse(a), d(this);\n              }),\n              (k.cloneRange = function () {\n                return new c(this.nativeRange.cloneRange());\n              }),\n              (k.refresh = function () {\n                d(this);\n              }),\n              (k.toString = function () {\n                return this.nativeRange.toString();\n              });\n            var n = document.createTextNode(\"test\");\n            i(document).appendChild(n);\n            var o = document.createRange();\n            o.setStart(n, 0), o.setEnd(n, 0);\n            try {\n              o.setStart(n, 1),\n                (k.setStart = function (a, b) {\n                  this.nativeRange.setStart(a, b), d(this);\n                }),\n                (k.setEnd = function (a, b) {\n                  this.nativeRange.setEnd(a, b), d(this);\n                }),\n                (l = function (a) {\n                  return function (b) {\n                    this.nativeRange[a](b), d(this);\n                  };\n                });\n            } catch (p) {\n              (k.setStart = function (a, b) {\n                try {\n                  this.nativeRange.setStart(a, b);\n                } catch (c) {\n                  this.nativeRange.setEnd(a, b), this.nativeRange.setStart(a, b);\n                }\n                d(this);\n              }),\n                (k.setEnd = function (a, b) {\n                  try {\n                    this.nativeRange.setEnd(a, b);\n                  } catch (c) {\n                    this.nativeRange.setStart(a, b), this.nativeRange.setEnd(a, b);\n                  }\n                  d(this);\n                }),\n                (l = function (a, b) {\n                  return function (c) {\n                    try {\n                      this.nativeRange[a](c);\n                    } catch (e) {\n                      this.nativeRange[b](c), this.nativeRange[a](c);\n                    }\n                    d(this);\n                  };\n                });\n            }\n            (k.setStartBefore = l(\"setStartBefore\", \"setEndBefore\")),\n              (k.setStartAfter = l(\"setStartAfter\", \"setEndAfter\")),\n              (k.setEndBefore = l(\"setEndBefore\", \"setStartBefore\")),\n              (k.setEndAfter = l(\"setEndAfter\", \"setStartAfter\")),\n              (k.selectNodeContents = function (a) {\n                this.setStartAndEnd(a, 0, e.getNodeLength(a));\n              }),\n              o.selectNodeContents(n),\n              o.setEnd(n, 3);\n            var q = document.createRange();\n            q.selectNodeContents(n),\n              q.setEnd(n, 4),\n              q.setStart(n, 2),\n              -1 == o.compareBoundaryPoints(o.START_TO_END, q) && 1 == o.compareBoundaryPoints(o.END_TO_START, q)\n                ? (k.compareBoundaryPoints = function (a, b) {\n                    return (\n                      (b = b.nativeRange || b),\n                      a == b.START_TO_END ? (a = b.END_TO_START) : a == b.END_TO_START && (a = b.START_TO_END),\n                      this.nativeRange.compareBoundaryPoints(a, b)\n                    );\n                  })\n                : (k.compareBoundaryPoints = function (a, b) {\n                    return this.nativeRange.compareBoundaryPoints(a, b.nativeRange || b);\n                  });\n            var r = document.createElement(\"div\");\n            r.innerHTML = \"123\";\n            var s = r.firstChild,\n              t = i(document);\n            t.appendChild(r),\n              o.setStart(s, 1),\n              o.setEnd(s, 2),\n              o.deleteContents(),\n              \"13\" == s.data &&\n                ((k.deleteContents = function () {\n                  this.nativeRange.deleteContents(), d(this);\n                }),\n                (k.extractContents = function () {\n                  var a = this.nativeRange.extractContents();\n                  return d(this), a;\n                })),\n              t.removeChild(r),\n              (t = null),\n              f.isHostMethod(o, \"createContextualFragment\") &&\n                (k.createContextualFragment = function (a) {\n                  return this.nativeRange.createContextualFragment(a);\n                }),\n              i(document).removeChild(n),\n              (k.getName = function () {\n                return \"WrappedRange\";\n              }),\n              (a.WrappedRange = c),\n              (a.createNativeRange = function (a) {\n                return (a = j(a, b, \"createNativeRange\")), a.createRange();\n              });\n          })(),\n        a.features.implementsTextRange)\n      ) {\n        var l = function (a) {\n            var b = a.parentElement(),\n              c = a.duplicate();\n            c.collapse(!0);\n            var d = c.parentElement();\n            (c = a.duplicate()), c.collapse(!1);\n            var f = c.parentElement(),\n              g = d == f ? d : e.getCommonAncestor(d, f);\n            return g == b ? g : e.getCommonAncestor(b, g);\n          },\n          m = function (a) {\n            return 0 == a.compareEndPoints(\"StartToEnd\", a);\n          },\n          n = function (a, b, c, d, f) {\n            var h = a.duplicate();\n            h.collapse(c);\n            var i = h.parentElement();\n            if ((e.isOrIsAncestorOf(b, i) || (i = b), !i.canHaveHTML)) {\n              var j = new g(i.parentNode, e.getNodeIndex(i));\n              return { boundaryPosition: j, nodeInfo: { nodeIndex: j.offset, containerElement: j.node } };\n            }\n            var l = e.getDocument(i).createElement(\"span\");\n            l.parentNode && e.removeNode(l);\n            for (\n              var m,\n                n,\n                o,\n                p,\n                q,\n                r = c ? \"StartToStart\" : \"StartToEnd\",\n                s = f && f.containerElement == i ? f.nodeIndex : 0,\n                t = i.childNodes.length,\n                u = t,\n                v = u;\n              ;\n\n            ) {\n              if (\n                (v == t ? i.appendChild(l) : i.insertBefore(l, i.childNodes[v]),\n                h.moveToElementText(l),\n                (m = h.compareEndPoints(r, a)),\n                0 == m || s == u)\n              )\n                break;\n              if (-1 == m) {\n                if (u == s + 1) break;\n                s = v;\n              } else u = u == s + 1 ? s : v;\n              (v = Math.floor((s + u) / 2)), i.removeChild(l);\n            }\n            if (((q = l.nextSibling), -1 == m && q && k(q))) {\n              h.setEndPoint(c ? \"EndToStart\" : \"EndToEnd\", a);\n              var w;\n              if (/[\\r\\n]/.test(q.data)) {\n                var x = h.duplicate(),\n                  y = x.text.replace(/\\r\\n/g, \"\\r\").length;\n                for (w = x.moveStart(\"character\", y); -1 == (m = x.compareEndPoints(\"StartToEnd\", x)); )\n                  w++, x.moveStart(\"character\", 1);\n              } else w = h.text.length;\n              p = new g(q, w);\n            } else\n              (n = (d || !c) && l.previousSibling),\n                (o = (d || c) && l.nextSibling),\n                (p = o && k(o) ? new g(o, 0) : n && k(n) ? new g(n, n.data.length) : new g(i, e.getNodeIndex(l)));\n            return e.removeNode(l), { boundaryPosition: p, nodeInfo: { nodeIndex: v, containerElement: i } };\n          },\n          o = function (a, b) {\n            var c,\n              d,\n              f,\n              g,\n              h = a.offset,\n              j = e.getDocument(a.node),\n              l = i(j).createTextRange(),\n              m = k(a.node);\n            return (\n              m\n                ? ((c = a.node), (d = c.parentNode))\n                : ((g = a.node.childNodes), (c = h < g.length ? g[h] : null), (d = a.node)),\n              (f = j.createElement(\"span\")),\n              (f.innerHTML = \"&#feff;\"),\n              c ? d.insertBefore(f, c) : d.appendChild(f),\n              l.moveToElementText(f),\n              l.collapse(!b),\n              d.removeChild(f),\n              m && l[b ? \"moveStart\" : \"moveEnd\"](\"character\", h),\n              l\n            );\n          };\n        (d = function (a) {\n          (this.textRange = a), this.refresh();\n        }),\n          (d.prototype = new h(document)),\n          (d.prototype.refresh = function () {\n            var a,\n              b,\n              c,\n              d = l(this.textRange);\n            m(this.textRange)\n              ? (b = a = n(this.textRange, d, !0, !0).boundaryPosition)\n              : ((c = n(this.textRange, d, !0, !1)),\n                (a = c.boundaryPosition),\n                (b = n(this.textRange, d, !1, !1, c.nodeInfo).boundaryPosition)),\n              this.setStart(a.node, a.offset),\n              this.setEnd(b.node, b.offset);\n          }),\n          (d.prototype.getName = functi");
        builder.append("on () {\n            return \"WrappedTextRange\";\n          }),\n          h.copyComparisonConstants(d);\n        var p = function (a) {\n          if (a.collapsed) return o(new g(a.startContainer, a.startOffset), !0);\n          var b = o(new g(a.startContainer, a.startOffset), !0),\n            c = o(new g(a.endContainer, a.endOffset), !1),\n            d = i(h.getRangeDocument(a)).createTextRange();\n          return d.setEndPoint(\"StartToStart\", b), d.setEndPoint(\"EndToEnd\", c), d;\n        };\n        if (\n          ((d.rangeToTextRange = p),\n          (d.prototype.toTextRange = function () {\n            return p(this);\n          }),\n          (a.WrappedTextRange = d),\n          !a.features.implementsDomRange || a.config.preferTextRange)\n        ) {\n          var q = (function (a) {\n            return a(\"return this;\")();\n          })(Function);\n          \"undefined\" == typeof q.Range && (q.Range = d),\n            (a.createNativeRange = function (a) {\n              return (a = j(a, b, \"createNativeRange\")), i(a).createTextRange();\n            }),\n            (a.WrappedRange = d);\n        }\n      }\n      (a.createRange = function (c) {\n        return (c = j(c, b, \"createRange\")), new a.WrappedRange(a.createNativeRange(c));\n      }),\n        (a.createRangyRange = function (a) {\n          return (a = j(a, b, \"createRangyRange\")), new h(a);\n        }),\n        f.createAliasForDeprecatedMethod(a, \"createIframeRange\", \"createRange\"),\n        f.createAliasForDeprecatedMethod(a, \"createIframeRangyRange\", \"createRangyRange\"),\n        a.addShimListener(function (b) {\n          var c = b.document;\n          \"undefined\" == typeof c.createRange &&\n            (c.createRange = function () {\n              return a.createRange(c);\n            }),\n            (c = b = null);\n        });\n    }),\n    H.createCoreModule(\"WrappedSelection\", [\"DomRange\", \"WrappedRange\"], function (a, b) {\n      function c(a) {\n        return \"string\" == typeof a ? /^backward(s)?$/i.test(a) : !!a;\n      }\n      function d(a, c) {\n        if (a) {\n          if (C.isWindow(a)) return a;\n          if (a instanceof r) return a.win;\n          var d = C.getContentDocument(a, b, c);\n          return C.getWindow(d);\n        }\n        return window;\n      }\n      function e(a) {\n        return d(a, \"getWinSelection\").getSelection();\n      }\n      function f(a) {\n        return d(a, \"getDocSelection\").document.selection;\n      }\n      function g(a) {\n        var b = !1;\n        return a.anchorNode && (b = 1 == C.comparePoints(a.anchorNode, a.anchorOffset, a.focusNode, a.focusOffset)), b;\n      }\n      function h(a, b, c) {\n        var d = c ? \"end\" : \"start\",\n          e = c ? \"start\" : \"end\";\n        (a.anchorNode = b[d + \"Container\"]),\n          (a.anchorOffset = b[d + \"Offset\"]),\n          (a.focusNode = b[e + \"Container\"]),\n          (a.focusOffset = b[e + \"Offset\"]);\n      }\n      function i(a) {\n        var b = a.nativeSelection;\n        (a.anchorNode = b.anchorNode),\n          (a.anchorOffset = b.anchorOffset),\n          (a.focusNode = b.focusNode),\n          (a.focusOffset = b.focusOffset);\n      }\n      function j(a) {\n        (a.anchorNode = a.focusNode = null),\n          (a.anchorOffset = a.focusOffset = 0),\n          (a.rangeCount = 0),\n          (a.isCollapsed = !0),\n          (a._ranges.length = 0);\n      }\n      function k(b) {\n        var c;\n        return (\n          b instanceof F\n            ? ((c = a.createNativeRange(b.getDocument())),\n              c.setEnd(b.endContainer, b.endOffset),\n              c.setStart(b.startContainer, b.startOffset))\n            : b instanceof G\n            ? (c = b.nativeRange)\n            : J.implementsDomRange && b instanceof C.getWindow(b.startContainer).Range && (c = b),\n          c\n        );\n      }\n      function l(a) {\n        if (!a.length || 1 != a[0].nodeType) return !1;\n        for (var b = 1, c = a.length; c > b; ++b) if (!C.isAncestorOf(a[0], a[b])) return !1;\n        return !0;\n      }\n      function m(a) {\n        var c = a.getNodes();\n        if (!l(c))\n          throw b.createError(\n            \"getSingleElementFromRange: range \" + a.inspect() + \" did not consist of a single element\"\n          );\n        return c[0];\n      }\n      function n(a) {\n        return !!a && \"undefined\" != typeof a.text;\n      }\n      function o(a, b) {\n        var c = new G(b);\n        (a._ranges = [c]), h(a, c, !1), (a.rangeCount = 1), (a.isCollapsed = c.collapsed);\n      }\n      function p(b) {\n        if (((b._ranges.length = 0), \"None\" == b.docSelection.type)) j(b);\n        else {\n          var c = b.docSelection.createRange();\n          if (n(c)) o(b, c);\n          else {\n            b.rangeCount = c.length;\n            for (var d, e = L(c.item(0)), f = 0; f < b.rangeCount; ++f)\n              (d = a.createRange(e)), d.selectNode(c.item(f)), b._ranges.push(d);\n            (b.isCollapsed = 1 == b.rangeCount && b._ranges[0].collapsed), h(b, b._ranges[b.rangeCount - 1], !1);\n          }\n        }\n      }\n      function q(a, c) {\n        for (\n          var d = a.docSelection.createRange(),\n            e = m(c),\n            f = L(d.item(0)),\n            g = M(f).createControlRange(),\n            h = 0,\n            i = d.length;\n          i > h;\n          ++h\n        )\n          g.add(d.item(h));\n        try {\n          g.add(e);\n        } catch (j) {\n          throw b.createError(\n            \"addRange(): Element within the specified Range could not be added to control selection (does it have layout?)\"\n          );\n        }\n        g.select(), p(a);\n      }\n      function r(a, b, c) {\n        (this.nativeSelection = a), (this.docSelection = b), (this._ranges = []), (this.win = c), this.refresh();\n      }\n      function s(a) {\n        (a.win = a.anchorNode = a.focusNode = a._ranges = null),\n          (a.rangeCount = a.anchorOffset = a.focusOffset = 0),\n          (a.detached = !0);\n      }\n      function t(a, b) {\n        for (var c, d, e = ba.length; e--; )\n          if (((c = ba[e]), (d = c.selection), \"deleteAll\" == b)) s(d);\n          else if (c.win == a) return \"delete\" == b ? (ba.splice(e, 1), !0) : d;\n        return \"deleteAll\" == b && (ba.length = 0), null;\n      }\n      function u(a, c) {\n        for (var d, e = L(c[0].startContainer), f = M(e).createControlRange(), g = 0, h = c.length; h > g; ++g) {\n          d = m(c[g]);\n          try {\n            f.add(d);\n          } catch (i) {\n            throw b.createError(\n              \"setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)\"\n            );\n          }\n        }\n        f.select(), p(a);\n      }\n      function v(a, b) {\n        if (a.win.document != L(b)) throw new H(\"WRONG_DOCUMENT_ERR\");\n      }\n      function w(b) {\n        return function (c, d) {\n          var e;\n          this.rangeCount\n            ? ((e = this.getRangeAt(0)), e[\"set\" + (b ? \"Start\" : \"End\")](c, d))\n            : ((e = a.createRange(this.win.document)), e.setStartAndEnd(c, d)),\n            this.setSingleRange(e, this.isBackward());\n        };\n      }\n      function x(a) {\n        var b = [],\n          c = new I(a.anchorNode, a.anchorOffset),\n          d = new I(a.focusNode, a.focusOffset),\n          e = \"function\" == typeof a.getName ? a.getName() : \"Selection\";\n        if (\"undefined\" != typeof a.rangeCount)\n          for (var f = 0, g = a.rangeCount; g > f; ++f) b[f] = F.inspect(a.getRangeAt(f));\n        return \"[\" + e + \"(Ranges: \" + b.join(\", \") + \")(anchor: \" + c.inspect() + \", focus: \" + d.inspect() + \"]\";\n      }\n      a.config.checkSelectionRanges = !0;\n      var y,\n        z,\n        A = \"boolean\",\n        B = \"number\",\n        C = a.dom,\n        D = a.util,\n        E = D.isHostMethod,\n        F = a.DomRange,\n        G = a.WrappedRange,\n        H = a.DOMException,\n        I = C.DomPosition,\n        J = a.features,\n        K = \"Control\",\n        L = C.getDocument,\n        M = C.getBody,\n        N = F.rangesEqual,\n        O = E(window, \"getSelection\"),\n        P = D.isHostObject(document, \"selection\");\n      (J.implementsWinGetSelection = O), (J.implementsDocSelection = P);\n      var Q = P && (!O || a.config.preferTextRange);\n      if (Q)\n        (y = f),\n          (a.isSelectionValid = function (a) {\n            var b = d(a, \"isSelectionValid\").document,\n              c = b.selection;\n            return \"None\" != c.type || L(c.createRange().parentElement()) == b;\n          });\n      else {\n        if (!O) return b.fail(\"Neither document.selection or window.getSelection() detected.\"), !1;\n        (y = e),\n          (a.isSelectionValid = function () {\n            return !0;\n          });\n      }\n      a.getNativeSelection = y;\n      var R = y();\n      if (!R) return b.fail(\"Native selection was null (possibly issue 138?)\"), !1;\n      var S = a.createNativeRange(document),\n        T = M(document),\n        U = D.areHostProperties(R, [\"anchorNode\", \"focusNode\", \"anchorOffset\", \"focusOffset\"]);\n      J.selectionHasAnchorAndFocus = U;\n      var V = E(R, \"extend\");\n      J.selectionHasExtend = V;\n      var W = typeof R.rangeCount == B;\n      J.selectionHasRangeCount = W;\n      var X = !1,\n        Y = !0,\n        Z = V\n          ? function (b, c) {\n              var d = F.getRangeDocument(c),\n                e = a.createRange(d);\n              e.collapseToPoint(c.endContainer, c.endOffset),\n                b.addRange(k(e)),\n                b.extend(c.startContainer, c.startOffset);\n            }\n          : null;\n      D.areHostMethods(R, [\"addRange\", \"getRangeAt\", \"removeAllRanges\"]) &&\n        typeof R.rangeCount == B &&\n        J.implementsDomRange &&\n        !(function () {\n          var b = window.getSelection();\n          if (b) {\n            for (var c = b.rangeCount, d = c > 1, e = [], f = g(b), h = 0; c > h; ++h) e[h] = b.getRangeAt(h);\n            var i = C.createTestElement(document, \"\", !1),\n              j = i.appendChild(document.createTextNode(\"   \")),\n              k = document.createRange();\n            if (\n              (k.setStart(j, 1),\n              k.collapse(!0),\n              b.removeAllRanges(),\n              b.addRange(k),\n              (Y = 1 == b.rangeCount),\n              b.removeAllRanges(),\n              !d)\n            ) {\n              var l = window.navigator.appVersion.match(/Chrome\\/(.*?) /);\n              if (l && parseInt(l[1]) >= 36) X = !1;\n              else {\n                var m = k.cloneRange();\n                k.setStart(j, 0),\n                  m.setEnd(j, 3),\n                  m.setStart(j, 2),\n                  b.addRange(k),\n                  b.addRange(m),\n                  (X = 2 == b.rangeCount);\n              }\n            }\n            for (C.removeNode(i), b.removeAllRanges(), h = 0; c > h; ++h)\n              0 == h && f\n                ? Z\n                  ? Z(b, e[h])\n                  : (a.warn(\n                      \"Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend\"\n                    ),\n                    b.addRange(e[h]))\n                : b.addRange(e[h]);\n          }\n        })(),\n        (J.selectionSupportsMultipleRanges = X),\n        (J.collapsedNonEditableSelectionsSupported = Y);\n      var $,\n        _ = !1;\n      T &&\n        E(T, \"createControlRange\") &&\n        (($ = T.createControlRange()), D.areHostProperties($, [\"item\", \"add\"]) && (_ = !0)),\n        (J.implementsControlRange = _),\n        (z = U\n          ? function (a) {\n              return a.anchorNode === a.focusNode && a.anchorOffset === a.focusOffset;\n            }\n          : function (a) {\n              return a.rangeCount ? a.getRangeAt(a.rangeCount - 1).collapsed : !1;\n            });\n      var aa;\n      E(R, \"getRangeAt\")\n        ? (aa = function (a, b) {\n            try {\n              return a.getRangeAt(b);\n            } catch (c) {\n              return null;\n            }\n          })\n        : U &&\n          (aa = function (b) {\n            var c = L(b.anchorNode),\n              d = a.createRange(c);\n            return (\n              d.setStartAndEnd(b.anchorNode, b.anchorOffset, b.focusNode, b.focusOffset),\n              d.collapsed !== this.isCollapsed &&\n                d.setStartAndEnd(b.focusNode, b.focusOffset, b.anchorNode, b.anchorOffset),\n              d\n            );\n          }),\n        (r.prototype = a.selectionPrototype);\n      var ba = [],\n        ca = function (a) {\n          if (a && a instanceof r) return a.refresh(), a;\n          a = d(a, \"getNativeSelection\");\n          var b = t(a),\n            c = y(a),\n            e = P ? f(a) : null;\n          return (\n            b\n              ? ((b.nativeSelection = c), (b.docSelection = e), b.refresh())\n              : ((b = new r(c, e, a)), ba.push({ win: a, selection: b })),\n            b\n          );\n        };\n      (a.getSelection = ca), D.createAliasForDeprecatedMethod(a, \"getIframeSelection\", \"getSelection\");\n      var da = r.prototype;\n      if (!Q && U && D.areHostMethods(R, [\"removeAllRanges\", \"addRange\"])) {\n        da.removeAllRanges = function () {\n          this.nativeSelection.removeAllRanges(), j(this);\n        };\n        var ea = function (a, b) {\n          Z(a.nativeSelection, b), a.refresh();\n        };\n        W\n          ? (da.addRange = function (b, d) {\n              if (_ && P && this.docSelection.type == K) q(this, b);\n              else if (c(d) && V) ea(this, b);\n              else {\n                var e;\n                X ? (e = this.rangeCount) : (this.removeAllRanges(), (e = 0));\n                var f = k(b).cloneRange();\n                try {\n                  this.nativeSelection.addRange(f);\n                } catch (g) {}\n                if (((this.rangeCount = this.nativeSelection.rangeCount), this.rangeCount == e + 1)) {\n                  if (a.config.checkSelectionRanges) {\n                    var i = aa(this.nativeSelection, this.rangeCount - 1);\n                    i && !N(i, b) && (b = new G(i));\n                  }\n                  (this._ranges[this.rangeCount - 1] = b),\n                    h(this, b, ha(this.nativeSelection)),\n                    (this.isCollapsed = z(this));\n                } else this.refresh();\n              }\n            })\n          : (da.addRange = function (a, b) {\n              c(b) && V ? ea(this, a) : (this.nativeSelection.addRange(k(a)), this.refresh());\n            }),\n          (da.setRanges = function (a) {\n            if (_ && P && a.length > 1) u(this, a);\n            else {\n              this.removeAllRanges();\n              for (var b = 0, c = a.length; c > b; ++b) this.addRange(a[b]);\n            }\n          });\n      } else {\n        if (!(E(R, \"empty\") && E(S, \"select\") && _ && Q))\n          return b.fail(\"No means of selecting a Range or TextRange was found\"), !1;\n        (da.removeAllRanges = function () {\n          try {\n            if ((this.docSelection.empty(), \"None\" != this.docSelection.type)) {\n              var a;\n              if (this.anchorNode) a = L(this.anchorNode);\n              else if (this.docSelection.type == K) {\n                var b = this.docSelection.createRange();\n                b.length && (a = L(b.item(0)));\n              }\n              if (a) {\n                var c = M(a).createTextRange();\n                c.select(), this.docSelection.empty();\n              }\n            }\n          } catch (d) {}\n          j(this);\n        }),\n          (da.addRange = function (b) {\n            this.docSelection.type == K\n              ? q(this, b)\n              : (a.WrappedTextRange.rangeToTextRange(b).select(),\n                (this._ranges[0] = b),\n                (this.rangeCount = 1),\n                (this.isCollapsed = this._ranges[0].collapsed),\n                h(this, b, !1));\n          }),\n          (da.setRanges = function (a) {\n            this.removeAllRanges();\n            var b = a.length;\n            b > 1 ? u(this, a) : b && this.addRange(a[0]);\n          });\n      }\n      da.getRangeAt = function (a) {\n        if (0 > a || a >= this.rangeCount) throw new H(\"INDEX_SIZE_ERR\");\n        return this._ranges[a].cloneRange();\n      };\n      var fa;\n      if (Q)\n        fa = function (b) {\n          var c;\n          a.isSelectionValid(b.win)\n            ? (c = b.docSelection.createRange())\n            : ((c = M(b.win.document).createTextRange()), c.collapse(!0))");
        builder.append(",\n            b.docSelection.type == K ? p(b) : n(c) ? o(b, c) : j(b);\n        };\n      else if (E(R, \"getRangeAt\") && typeof R.rangeCount == B)\n        fa = function (b) {\n          if (_ && P && b.docSelection.type == K) p(b);\n          else if (((b._ranges.length = b.rangeCount = b.nativeSelection.rangeCount), b.rangeCount)) {\n            for (var c = 0, d = b.rangeCount; d > c; ++c)\n              b._ranges[c] = new a.WrappedRange(b.nativeSelection.getRangeAt(c));\n            h(b, b._ranges[b.rangeCount - 1], ha(b.nativeSelection)), (b.isCollapsed = z(b));\n          } else j(b);\n        };\n      else {\n        if (!U || typeof R.isCollapsed != A || typeof S.collapsed != A || !J.implementsDomRange)\n          return b.fail(\"No means of obtaining a Range or TextRange from the user's selection was found\"), !1;\n        fa = function (a) {\n          var b,\n            c = a.nativeSelection;\n          c.anchorNode ? ((b = aa(c, 0)), (a._ranges = [b]), (a.rangeCount = 1), i(a), (a.isCollapsed = z(a))) : j(a);\n        };\n      }\n      da.refresh = function (a) {\n        var b = a ? this._ranges.slice(0) : null,\n          c = this.anchorNode,\n          d = this.anchorOffset;\n        if ((fa(this), a)) {\n          var e = b.length;\n          if (e != this._ranges.length) return !0;\n          if (this.anchorNode != c || this.anchorOffset != d) return !0;\n          for (; e--; ) if (!N(b[e], this._ranges[e])) return !0;\n          return !1;\n        }\n      };\n      var ga = function (a, b) {\n        var c = a.getAllRanges();\n        a.removeAllRanges();\n        for (var d = 0, e = c.length; e > d; ++d) N(b, c[d]) || a.addRange(c[d]);\n        a.rangeCount || j(a);\n      };\n      _ && P\n        ? (da.removeRange = function (a) {\n            if (this.docSelection.type == K) {\n              for (\n                var b,\n                  c = this.docSelection.createRange(),\n                  d = m(a),\n                  e = L(c.item(0)),\n                  f = M(e).createControlRange(),\n                  g = !1,\n                  h = 0,\n                  i = c.length;\n                i > h;\n                ++h\n              )\n                (b = c.item(h)), b !== d || g ? f.add(c.item(h)) : (g = !0);\n              f.select(), p(this);\n            } else ga(this, a);\n          })\n        : (da.removeRange = function (a) {\n            ga(this, a);\n          });\n      var ha;\n      !Q && U && J.implementsDomRange\n        ? ((ha = g),\n          (da.isBackward = function () {\n            return ha(this);\n          }))\n        : (ha = da.isBackward =\n            function () {\n              return !1;\n            }),\n        (da.isBackwards = da.isBackward),\n        (da.toString = function () {\n          for (var a = [], b = 0, c = this.rangeCount; c > b; ++b) a[b] = \"\" + this._ranges[b];\n          return a.join(\"\");\n        }),\n        (da.collapse = function (b, c) {\n          v(this, b);\n          var d = a.createRange(b);\n          d.collapseToPoint(b, c), this.setSingleRange(d), (this.isCollapsed = !0);\n        }),\n        (da.collapseToStart = function () {\n          if (!this.rangeCount) throw new H(\"INVALID_STATE_ERR\");\n          var a = this._ranges[0];\n          this.collapse(a.startContainer, a.startOffset);\n        }),\n        (da.collapseToEnd = function () {\n          if (!this.rangeCount) throw new H(\"INVALID_STATE_ERR\");\n          var a = this._ranges[this.rangeCount - 1];\n          this.collapse(a.endContainer, a.endOffset);\n        }),\n        (da.selectAllChildren = function (b) {\n          v(this, b);\n          var c = a.createRange(b);\n          c.selectNodeContents(b), this.setSingleRange(c);\n        }),\n        (da.deleteFromDocument = function () {\n          if (_ && P && this.docSelection.type == K) {\n            for (var a, b = this.docSelection.createRange(); b.length; ) (a = b.item(0)), b.remove(a), C.removeNode(a);\n            this.refresh();\n          } else if (this.rangeCount) {\n            var c = this.getAllRanges();\n            if (c.length) {\n              this.removeAllRanges();\n              for (var d = 0, e = c.length; e > d; ++d) c[d].deleteContents();\n              this.addRange(c[e - 1]);\n            }\n          }\n        }),\n        (da.eachRange = function (a, b) {\n          for (var c = 0, d = this._ranges.length; d > c; ++c) if (a(this.getRangeAt(c))) return b;\n        }),\n        (da.getAllRanges = function () {\n          var a = [];\n          return (\n            this.eachRange(function (b) {\n              a.push(b);\n            }),\n            a\n          );\n        }),\n        (da.setSingleRange = function (a, b) {\n          this.removeAllRanges(), this.addRange(a, b);\n        }),\n        (da.callMethodOnEachRange = function (a, b) {\n          var c = [];\n          return (\n            this.eachRange(function (d) {\n              c.push(d[a].apply(d, b || []));\n            }),\n            c\n          );\n        }),\n        (da.setStart = w(!0)),\n        (da.setEnd = w(!1)),\n        (a.rangePrototype.select = function (a) {\n          ca(this.getDocument()).setSingleRange(this, a);\n        }),\n        (da.changeEachRange = function (a) {\n          var b = [],\n            c = this.isBackward();\n          this.eachRange(function (c) {\n            a(c), b.push(c);\n          }),\n            this.removeAllRanges(),\n            c && 1 == b.length ? this.addRange(b[0], \"backward\") : this.setRanges(b);\n        }),\n        (da.containsNode = function (a, b) {\n          return (\n            this.eachRange(function (c) {\n              return c.containsNode(a, b);\n            }, !0) || !1\n          );\n        }),\n        (da.getBookmark = function (a) {\n          return { backward: this.isBackward(), rangeBookmarks: this.callMethodOnEachRange(\"getBookmark\", [a]) };\n        }),\n        (da.moveToBookmark = function (b) {\n          for (var c, d, e = [], f = 0; (c = b.rangeBookmarks[f++]); )\n            (d = a.createRange(this.win)), d.moveToBookmark(c), e.push(d);\n          b.backward ? this.setSingleRange(e[0], \"backward\") : this.setRanges(e);\n        }),\n        (da.saveRanges = function () {\n          return { backward: this.isBackward(), ranges: this.callMethodOnEachRange(\"cloneRange\") };\n        }),\n        (da.restoreRanges = function (a) {\n          this.removeAllRanges();\n          for (var b, c = 0; (b = a.ranges[c]); ++c) this.addRange(b, a.backward && 0 == c);\n        }),\n        (da.toHtml = function () {\n          var a = [];\n          return (\n            this.eachRange(function (b) {\n              a.push(F.toHtml(b));\n            }),\n            a.join(\"\")\n          );\n        }),\n        J.implementsTextRange &&\n          (da.getNativeTextRange = function () {\n            var c;\n            if ((c = this.docSelection)) {\n              var d = c.createRange();\n              if (n(d)) return d;\n              throw b.createError(\"getNativeTextRange: selection is a control selection\");\n            }\n            if (this.rangeCount > 0) return a.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));\n            throw b.createError(\"getNativeTextRange: selection contains no range\");\n          }),\n        (da.getName = function () {\n          return \"WrappedSelection\";\n        }),\n        (da.inspect = function () {\n          return x(this);\n        }),\n        (da.detach = function () {\n          t(this.win, \"delete\"), s(this);\n        }),\n        (r.detachAll = function () {\n          t(null, \"deleteAll\");\n        }),\n        (r.inspect = x),\n        (r.isDirectionBackward = c),\n        (a.Selection = r),\n        (a.selectionPrototype = da),\n        a.addShimListener(function (a) {\n          \"undefined\" == typeof a.getSelection &&\n            (a.getSelection = function () {\n              return ca(a);\n            }),\n            (a = null);\n        });\n    });\n  var M = !1,\n    N = function (a) {\n      M || ((M = !0), !H.initialized && H.config.autoInitialize && l());\n    };\n  F &&\n    (\"complete\" == document.readyState\n      ? N()\n      : (a(document, \"addEventListener\") && document.addEventListener(\"DOMContentLoaded\", N, !1),\n        J(window, \"load\", N))),\n    (rangy = H);\n})(),\n  rangy.createModule(\"SaveRestore\", [\"WrappedRange\"], function (a, b) {\n    function c(a, b) {\n      return (b || document).getElementById(a);\n    }\n    function d(a, b) {\n      var c,\n        d = \"selectionBoundary_\" + +new Date() + \"_\" + (\"\" + Math.random()).slice(2),\n        e = o.getDocument(a.startContainer),\n        f = a.cloneRange();\n      return (\n        f.collapse(b),\n        (c = e.createElement(\"span\")),\n        (c.id = d),\n        (c.style.lineHeight = \"0\"),\n        (c.style.display = \"none\"),\n        (c.className = \"rangySelectionBoundary\"),\n        c.appendChild(e.createTextNode(r)),\n        f.insertNode(c),\n        c\n      );\n    }\n    function e(a, d, e, f) {\n      var g = c(e, a);\n      g\n        ? (d[f ? \"setStartBefore\" : \"setEndBefore\"](g), p(g))\n        : b.warn(\"Marker element has been removed. Cannot restore selection.\");\n    }\n    function f(a, b) {\n      return b.compareBoundaryPoints(a.START_TO_START, a);\n    }\n    function g(b, c) {\n      var e,\n        f,\n        g = a.DomRange.getRangeDocument(b),\n        h = b.toString(),\n        i = q(c);\n      return b.collapsed\n        ? ((f = d(b, !1)), { document: g, markerId: f.id, collapsed: !0 })\n        : ((f = d(b, !1)),\n          (e = d(b, !0)),\n          {\n            document: g,\n            startMarkerId: e.id,\n            endMarkerId: f.id,\n            collapsed: !1,\n            backward: i,\n            toString: function () {\n              return \"original text: '\" + h + \"', new text: '\" + b.toString() + \"'\";\n            },\n          });\n    }\n    function h(d, f) {\n      var g = d.document;\n      \"undefined\" == typeof f && (f = !0);\n      var h = a.createRange(g);\n      if (d.collapsed) {\n        var i = c(d.markerId, g);\n        if (i) {\n          i.style.display = \"inline\";\n          var j = i.previousSibling;\n          j && 3 == j.nodeType ? (p(i), h.collapseToPoint(j, j.length)) : (h.collapseBefore(i), p(i));\n        } else b.warn(\"Marker element has been removed. Cannot restore selection.\");\n      } else e(g, h, d.startMarkerId, !0), e(g, h, d.endMarkerId, !1);\n      return f && h.normalizeBoundaries(), h;\n    }\n    function i(b, d) {\n      var e,\n        h,\n        i = [],\n        j = q(d);\n      (b = b.slice(0)), b.sort(f);\n      for (var k = 0, l = b.length; l > k; ++k) i[k] = g(b[k], j);\n      for (k = l - 1; k >= 0; --k)\n        (e = b[k]),\n          (h = a.DomRange.getRangeDocument(e)),\n          e.collapsed\n            ? e.collapseAfter(c(i[k].markerId, h))\n            : (e.setEndBefore(c(i[k].endMarkerId, h)), e.setStartAfter(c(i[k].startMarkerId, h)));\n      return i;\n    }\n    function j(c) {\n      if (!a.isSelectionValid(c))\n        return (\n          b.warn(\n            \"Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.\"\n          ),\n          null\n        );\n      var d = a.getSelection(c),\n        e = d.getAllRanges(),\n        f = 1 == e.length && d.isBackward(),\n        g = i(e, f);\n      return f ? d.setSingleRange(e[0], f) : d.setRanges(e), { win: c, rangeInfos: g, restored: !1 };\n    }\n    function k(a) {\n      for (var b = [], c = a.length, d = c - 1; d >= 0; d--) b[d] = h(a[d], !0);\n      return b;\n    }\n    function l(b, c) {\n      if (!b.restored) {\n        var d = b.rangeInfos,\n          e = a.getSelection(b.win),\n          f = k(d),\n          g = d.length;\n        1 == g && c && a.features.selectionHasExtend && d[0].backward\n          ? (e.removeAllRanges(), e.addRange(f[0], !0))\n          : e.setRanges(f),\n          (b.restored = !0);\n      }\n    }\n    function m(a, b) {\n      var d = c(b, a);\n      d && p(d);\n    }\n    function n(a) {\n      for (var b, c = a.rangeInfos, d = 0, e = c.length; e > d; ++d)\n        (b = c[d]), b.collapsed ? m(a.doc, b.markerId) : (m(a.doc, b.startMarkerId), m(a.doc, b.endMarkerId));\n    }\n    var o = a.dom,\n      p = o.removeNode,\n      q = a.Selection.isDirectionBackward,\n      r = \"\\ufeff\";\n    a.util.extend(a, {\n      saveRange: g,\n      restoreRange: h,\n      saveRanges: i,\n      restoreRanges: k,\n      saveSelection: j,\n      restoreSelection: l,\n      removeMarkerElement: m,\n      removeMarkers: n,\n    });\n  }),\n  rangy.createModule(\"TextRange\", [\"WrappedSelection\"], function (a, b) {\n    function c(a, b) {\n      function c(a, b, c) {\n        h.push({ start: a, end: b, isWord: c });\n      }\n      for (var d, e, f, g = a.join(\"\"), h = [], i = 0; (d = b.wordRegex.exec(g)); ) {\n        if (((e = d.index), (f = e + d[0].length), e > i && c(i, e, !1), b.includeTrailingSpace))\n          for (; $.test(a[f]); ) ++f;\n        c(e, f, !0), (i = f);\n      }\n      return i < a.length && c(i, a.length, !1), h;\n    }\n    function d(a, b) {\n      for (\n        var c = a.slice(b.start, b.end),\n          d = {\n            isWord: b.isWord,\n            chars: c,\n            toString: function () {\n              return c.join(\"\");\n            },\n          },\n          e = 0,\n          f = c.length;\n        f > e;\n        ++e\n      )\n        c[e].token = d;\n      return d;\n    }\n    function e(a, b, c) {\n      for (var e, f = c(a, b), g = [], h = 0; (e = f[h++]); ) g.push(d(a, e));\n      return g;\n    }\n    function f(a) {\n      var b = a || \"\",\n        c = \"string\" == typeof b ? b.split(\"\") : b;\n      return (\n        c.sort(function (a, b) {\n          return a.charCodeAt(0) - b.charCodeAt(0);\n        }),\n        c.join(\"\").replace(/(.)\\1+/g, \"$1\")\n      );\n    }\n    function g(a) {\n      var b, c;\n      return a ? ((b = a.language || _), (c = {}), U(c, ia[b] || ia[_]), U(c, a), c) : ia[_];\n    }\n    function h(a, b) {\n      var c = V(a, b);\n      return (\n        b.hasOwnProperty(\"wordOptions\") && (c.wordOptions = g(c.wordOptions)),\n        b.hasOwnProperty(\"characterOptions\") && (c.characterOptions = V(c.characterOptions, ga)),\n        c\n      );\n    }\n    function i(a, b) {\n      var c = na(a, \"display\", b),\n        d = a.tagName.toLowerCase();\n      return \"block\" == c && fa && oa.hasOwnProperty(d) ? oa[d] : c;\n    }\n    function j(a) {\n      for (var b = o(a), c = 0, d = b.length; d > c; ++c) if (1 == b[c].nodeType && \"none\" == i(b[c])) return !0;\n      return !1;\n    }\n    function k(a) {\n      var b;\n      return 3 == a.nodeType && (b = a.parentNode) && \"hidden\" == na(b, \"visibility\");\n    }\n    function l(a) {\n      return (\n        a && ((1 == a.nodeType && !/^(inline(-block|-table)?|none)$/.test(i(a))) || 9 == a.nodeType || 11 == a.nodeType)\n      );\n    }\n    function m(a) {\n      return (\n        S.isCharacterDataNode(a) ||\n        !/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(a.nodeName)\n      );\n    }\n    function n(a) {\n      for (var b = []; a.parentNode; ) b.unshift(a.parentNode), (a = a.parentNode);\n      return b;\n    }\n    function o(a) {\n      return n(a).concat([a]);\n    }\n    function p(a) {\n      for (; a && !a.nextSibling; ) a = a.parentNode;\n      return a ? a.nextSibling : null;\n    }\n    function q(a, b) {\n      return !b && a.hasChildNodes() ? a.firstChild : p(a);\n    }\n    function r(a) {\n      var b = a.previousSibling;\n      if (b) {\n        for (a = b; a.hasChildNodes(); ) a = a.lastChild;\n        return a;\n      }\n      var c = a.parentNode;\n      return c && 1 == c.nodeType ? c : null;\n    }\n    function s(a) {\n      if (!a || 3 != a.nodeType) return !1;\n      var b = a.data;\n      if (\"\" === b) return !0;\n      var c = a.parentNode;\n      if (!c || 1 != c.nodeType) return !1;\n      var d = na(a.parentNode, \"whiteSpace\");\n      return (/^[\\t\\n\\r ]+$/.test(b) && /^(normal|nowrap)$/.test(d)) || (/^[\\t\\r ]+$/.test(b) && \"pre-line\" == d);\n    }\n    function t(a) {\n      if (\"\" === a.data) return !0;\n      if (!s(a)) return !1;\n      var b = a.parentNode;\n      return b ? (j(a) ? !0 : !1) : !0;\n    }\n    function u(a) {\n      var b = a.nodeType;\n      return 7 == b || 8 == b || j(a) || /^(script|style)$/i.test(a.nodeName) || k(a) || t(a);\n    }\n    function v(a, b) {\n      var c = a.nodeType;\n      return 7 == c || 8 == c || (1 == c && \"none\" == i(a, b));\n    }\n    function w() {\n      this.store = {};\n    }\n    function x(a, b, c) {\n      return function (d) {\n        var e = this.cache;\n        if (e.hasOw");
        builder.append("nProperty(a)) return pa++, e[a];\n        qa++;\n        var f = b.call(this, c ? this[c] : this, d);\n        return (e[a] = f), f;\n      };\n    }\n    function y(a, b) {\n      (this.node = a), (this.session = b), (this.cache = new w()), (this.positions = new w());\n    }\n    function z(a, b) {\n      (this.offset = b),\n        (this.nodeWrapper = a),\n        (this.node = a.node),\n        (this.session = a.session),\n        (this.cache = new w());\n    }\n    function A() {\n      return \"[Position(\" + S.inspectNode(this.node) + \":\" + this.offset + \")]\";\n    }\n    function B() {\n      return D(), (Da = new Ea());\n    }\n    function C() {\n      return Da || B();\n    }\n    function D() {\n      Da && Da.detach(), (Da = null);\n    }\n    function E(a, c, d, e) {\n      function f() {\n        var a = null;\n        return (\n          c\n            ? ((a = h), i || ((h = h.previousVisible()), (i = !h || (d && h.equals(d)))))\n            : i || ((a = h = h.nextVisible()), (i = !h || (d && h.equals(d)))),\n          i && (h = null),\n          a\n        );\n      }\n      d && (c ? u(d.node) && (d = a.previousVisible()) : u(d.node) && (d = d.nextVisible()));\n      var g,\n        h = a,\n        i = !1,\n        j = !1;\n      return {\n        next: function () {\n          if (j) return (j = !1), g;\n          for (var a, b; (a = f()); ) if ((b = a.getCharacter(e))) return (g = a), a;\n          return null;\n        },\n        rewind: function () {\n          if (!g) throw b.createError(\"createCharacterIterator: cannot rewind. Only one position can be rewound.\");\n          j = !0;\n        },\n        dispose: function () {\n          a = d = null;\n        },\n      };\n    }\n    function F(a, b, c) {\n      function d(a) {\n        for (var b, c, d = [], e = a ? f : g, h = !1, i = !1; (b = e.next()); ) {\n          if (((c = b.character), Z.test(c))) i && ((i = !1), (h = !0));\n          else {\n            if (h) {\n              e.rewind();\n              break;\n            }\n            i = !0;\n          }\n          d.push(b);\n        }\n        return d;\n      }\n      var f = E(a, !1, null, b),\n        g = E(a, !0, null, b),\n        h = c.tokenizer,\n        i = d(!0),\n        j = d(!1).reverse(),\n        k = e(j.concat(i), c, h),\n        l = i.length ? k.slice(Fa(k, i[0].token)) : [],\n        m = j.length ? k.slice(0, Fa(k, j.pop().token) + 1) : [];\n      return {\n        nextEndToken: function () {\n          for (var a, b; 1 == l.length && !(a = l[0]).isWord && (b = d(!0)).length > 0; )\n            l = e(a.chars.concat(b), c, h);\n          return l.shift();\n        },\n        previousStartToken: function () {\n          for (var a, b; 1 == m.length && !(a = m[0]).isWord && (b = d(!1)).length > 0; )\n            m = e(b.reverse().concat(a.chars), c, h);\n          return m.pop();\n        },\n        dispose: function () {\n          f.dispose(), g.dispose(), (l = m = null);\n        },\n      };\n    }\n    function G(a, b, c, d, e) {\n      var f,\n        g,\n        h,\n        i,\n        j = 0,\n        k = a,\n        l = Math.abs(c);\n      if (0 !== c) {\n        var m = 0 > c;\n        switch (b) {\n          case Q:\n            for (g = E(a, m, null, d); (f = g.next()) && l > j; ) ++j, (k = f);\n            (h = f), g.dispose();\n            break;\n          case R:\n            for (var n = F(a, d, e), o = m ? n.previousStartToken : n.nextEndToken; (i = o()) && l > j; )\n              i.isWord && (++j, (k = m ? i.chars[0] : i.chars[i.chars.length - 1]));\n            break;\n          default:\n            throw new Error(\"movePositionBy: unit '\" + b + \"' not implemented\");\n        }\n        m\n          ? ((k = k.previousVisible()), (j = -j))\n          : k &&\n            k.isLeadingSpace &&\n            !k.isTrailingSpace &&\n            (b == R && ((g = E(a, !1, null, d)), (h = g.next()), g.dispose()), h && (k = h.previousVisible()));\n      }\n      return { position: k, unitsMoved: j };\n    }\n    function H(a, b, c, d) {\n      var e = a.getRangeBoundaryPosition(b, !0),\n        f = a.getRangeBoundaryPosition(b, !1),\n        g = d ? f : e,\n        h = d ? e : f;\n      return E(g, !!d, h, c);\n    }\n    function I(a, b, c) {\n      for (var d, e = [], f = H(a, b, c); (d = f.next()); ) e.push(d);\n      return f.dispose(), e;\n    }\n    function J(b, c, d) {\n      var e = a.createRange(b.node);\n      return e.setStartAndEnd(b.node, b.offset, c.node, c.offset), !e.expand(\"word\", { wordOptions: d });\n    }\n    function K(a, b, c, d, e) {\n      function f(a, b) {\n        var c = p[a].previousVisible(),\n          d = p[b - 1],\n          f = !e.wholeWordsOnly || J(c, d, e.wordOptions);\n        return { startPos: c, endPos: d, valid: f };\n      }\n      for (\n        var g,\n          h,\n          i,\n          j,\n          k,\n          l,\n          m = aa(e.direction),\n          n = E(a, m, a.session.getRangeBoundaryPosition(d, m), e.characterOptions),\n          o = \"\",\n          p = [],\n          q = null;\n        (g = n.next());\n\n      )\n        if (\n          ((h = g.character),\n          c || e.caseSensitive || (h = h.toLowerCase()),\n          m ? (p.unshift(g), (o = h + o)) : (p.push(g), (o += h)),\n          c)\n        ) {\n          if ((k = b.exec(o)))\n            if (((i = k.index), (j = i + k[0].length), l)) {\n              if ((!m && j < o.length) || (m && i > 0)) {\n                q = f(i, j);\n                break;\n              }\n            } else l = !0;\n        } else if (-1 != (i = o.indexOf(b))) {\n          q = f(i, i + b.length);\n          break;\n        }\n      return l && (q = f(i, j)), n.dispose(), q;\n    }\n    function L(a) {\n      return function () {\n        var b = !!Da,\n          c = C(),\n          d = [c].concat(T.toArray(arguments)),\n          e = a.apply(this, d);\n        return b || D(), e;\n      };\n    }\n    function M(a, b) {\n      return L(function (c, d, e, f) {\n        typeof e == P && ((e = d), (d = Q)), (f = h(f, ka));\n        var g = a;\n        b && ((g = e >= 0), this.collapse(!g));\n        var i = G(c.getRangeBoundaryPosition(this, g), d, e, f.characterOptions, f.wordOptions),\n          j = i.position;\n        return this[g ? \"setStart\" : \"setEnd\"](j.node, j.offset), i.unitsMoved;\n      });\n    }\n    function N(a) {\n      return L(function (b, c) {\n        c = V(c, ga);\n        for (var d, e = H(b, this, c, !a), f = 0; (d = e.next()) && Z.test(d.character); ) ++f;\n        e.dispose();\n        var g = f > 0;\n        return g && this[a ? \"moveStart\" : \"moveEnd\"](\"character\", a ? f : -f, { characterOptions: c }), g;\n      });\n    }\n    function O(a) {\n      return L(function (b, c) {\n        var d = !1;\n        return (\n          this.changeEachRange(function (b) {\n            d = b[a](c) || d;\n          }),\n          d\n        );\n      });\n    }\n    var P = \"undefined\",\n      Q = \"character\",\n      R = \"word\",\n      S = a.dom,\n      T = a.util,\n      U = T.extend,\n      V = T.createOptions,\n      W = S.getBody,\n      X = /^[ \\t\\f\\r\\n]+$/,\n      Y = /^[ \\t\\f\\r]+$/,\n      Z = /^[\\t-\\r \\u0085\\u00A0\\u1680\\u180E\\u2000-\\u200B\\u2028\\u2029\\u202F\\u205F\\u3000]+$/,\n      $ = /^[\\t \\u00A0\\u1680\\u180E\\u2000-\\u200B\\u202F\\u205F\\u3000]+$/,\n      _ = \"en\",\n      aa = a.Selection.isDirectionBackward,\n      ba = !1,\n      ca = !1,\n      da = !1,\n      ea = !0;\n    !(function () {\n      var b = S.createTestElement(document, \"<p>1 </p><p></p>\", !0),\n        c = b.firstChild,\n        d = a.getSelection();\n      d.collapse(c.lastChild, 2),\n        d.setStart(c.firstChild, 0),\n        (ba = 1 == (\"\" + d).length),\n        (b.innerHTML = \"1 <br />\"),\n        d.collapse(b, 2),\n        d.setStart(b.firstChild, 0),\n        (ca = 1 == (\"\" + d).length),\n        (b.innerHTML = \"1 <p>1</p>\"),\n        d.collapse(b, 2),\n        d.setStart(b.firstChild, 0),\n        (da = 1 == (\"\" + d).length),\n        S.removeNode(b),\n        d.removeAllRanges();\n    })();\n    var fa,\n      ga = {\n        includeBlockContentTrailingSpace: !0,\n        includeSpaceBeforeBr: !0,\n        includeSpaceBeforeBlock: !0,\n        includePreLineTrailingSpace: !0,\n        ignoreCharacters: \"\",\n      },\n      ha = {\n        includeBlockContentTrailingSpace: !ea,\n        includeSpaceBeforeBr: !ca,\n        includeSpaceBeforeBlock: !da,\n        includePreLineTrailingSpace: !0,\n      },\n      ia = { en: { wordRegex: /[a-z0-9]+('[a-z0-9]+)*/gi, includeTrailingSpace: !1, tokenizer: c } },\n      ja = {\n        caseSensitive: !1,\n        withinRange: null,\n        wholeWordsOnly: !1,\n        wrap: !1,\n        direction: \"forward\",\n        wordOptions: null,\n        characterOptions: null,\n      },\n      ka = { wordOptions: null, characterOptions: null },\n      la = { wordOptions: null, characterOptions: null, trim: !1, trimStart: !0, trimEnd: !0 },\n      ma = { wordOptions: null, characterOptions: null, direction: \"forward\" },\n      na = S.getComputedStyleProperty;\n    !(function () {\n      var a = document.createElement(\"table\"),\n        b = W(document);\n      b.appendChild(a), (fa = \"block\" == na(a, \"display\")), b.removeChild(a);\n    })();\n    var oa = {\n      table: \"table\",\n      caption: \"table-caption\",\n      colgroup: \"table-column-group\",\n      col: \"table-column\",\n      thead: \"table-header-group\",\n      tbody: \"table-row-group\",\n      tfoot: \"table-footer-group\",\n      tr: \"table-row\",\n      td: \"table-cell\",\n      th: \"table-cell\",\n    };\n    w.prototype = {\n      get: function (a) {\n        return this.store.hasOwnProperty(a) ? this.store[a] : null;\n      },\n      set: function (a, b) {\n        return (this.store[a] = b);\n      },\n    };\n    var pa = 0,\n      qa = 0,\n      ra = {\n        getPosition: function (a) {\n          var b = this.positions;\n          return b.get(a) || b.set(a, new z(this, a));\n        },\n        toString: function () {\n          return \"[NodeWrapper(\" + S.inspectNode(this.node) + \")]\";\n        },\n      };\n    y.prototype = ra;\n    var sa = \"EMPTY\",\n      ta = \"NON_SPACE\",\n      ua = \"UNCOLLAPSIBLE_SPACE\",\n      va = \"COLLAPSIBLE_SPACE\",\n      wa = \"TRAILING_SPACE_BEFORE_BLOCK\",\n      xa = \"TRAILING_SPACE_IN_BLOCK\",\n      ya = \"TRAILING_SPACE_BEFORE_BR\",\n      za = \"PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK\",\n      Aa = \"TRAILING_LINE_BREAK_AFTER_BR\",\n      Ba = \"INCLUDED_TRAILING_LINE_BREAK_AFTER_BR\";\n    U(ra, {\n      isCharacterDataNode: x(\"isCharacterDataNode\", S.isCharacterDataNode, \"node\"),\n      getNodeIndex: x(\"nodeIndex\", S.getNodeIndex, \"node\"),\n      getLength: x(\"nodeLength\", S.getNodeLength, \"node\"),\n      containsPositions: x(\"containsPositions\", m, \"node\"),\n      isWhitespace: x(\"isWhitespace\", s, \"node\"),\n      isCollapsedWhitespace: x(\"isCollapsedWhitespace\", t, \"node\"),\n      getComputedDisplay: x(\"computedDisplay\", i, \"node\"),\n      isCollapsed: x(\"collapsed\", u, \"node\"),\n      isIgnored: x(\"ignored\", v, \"node\"),\n      next: x(\"nextPos\", q, \"node\"),\n      previous: x(\"previous\", r, \"node\"),\n      getTextNodeInfo: x(\n        \"textNodeInfo\",\n        function (a) {\n          var b = null,\n            c = !1,\n            d = na(a.parentNode, \"whiteSpace\"),\n            e = \"pre-line\" == d;\n          return (\n            e ? ((b = Y), (c = !0)) : (\"normal\" == d || \"nowrap\" == d) && ((b = X), (c = !0)),\n            { node: a, text: a.data, spaceRegex: b, collapseSpaces: c, preLine: e }\n          );\n        },\n        \"node\"\n      ),\n      hasInnerText: x(\n        \"hasInnerText\",\n        function (a, b) {\n          for (\n            var c = this.session,\n              d = c.getPosition(a.parentNode, this.getNodeIndex() + 1),\n              e = c.getPosition(a, 0),\n              f = b ? d : e,\n              g = b ? e : d;\n            f !== g;\n\n          ) {\n            if ((f.prepopulateChar(), f.isDefinitelyNonEmpty())) return !0;\n            f = b ? f.previousVisible() : f.nextVisible();\n          }\n          return !1;\n        },\n        \"node\"\n      ),\n      isRenderedBlock: x(\n        \"isRenderedBlock\",\n        function (a) {\n          for (var b = a.getElementsByTagName(\"br\"), c = 0, d = b.length; d > c; ++c) if (!u(b[c])) return !0;\n          return this.hasInnerText();\n        },\n        \"node\"\n      ),\n      getTrailingSpace: x(\n        \"trailingSpace\",\n        function (a) {\n          if (\"br\" == a.tagName.toLowerCase()) return \"\";\n          switch (this.getComputedDisplay()) {\n            case \"inline\":\n              for (var b = a.lastChild; b; ) {\n                if (!v(b)) return 1 == b.nodeType ? this.session.getNodeWrapper(b).getTrailingSpace() : \"\";\n                b = b.previousSibling;\n              }\n              break;\n            case \"inline-block\":\n            case \"inline-table\":\n            case \"none\":\n            case \"table-column\":\n            case \"table-column-group\":\n              break;\n            case \"table-cell\":\n              return \"	\";\n            default:\n              return this.isRenderedBlock(!0) ? \"\\n\" : \"\";\n          }\n          return \"\";\n        },\n        \"node\"\n      ),\n      getLeadingSpace: x(\n        \"leadingSpace\",\n        function (a) {\n          switch (this.getComputedDisplay()) {\n            case \"inline\":\n            case \"inline-block\":\n            case \"inline-table\":\n            case \"none\":\n            case \"table-column\":\n            case \"table-column-group\":\n            case \"table-cell\":\n              break;\n            default:\n              return this.isRenderedBlock(!1) ? \"\\n\" : \"\";\n          }\n          return \"\";\n        },\n        \"node\"\n      ),\n    });\n    var Ca = {\n      character: \"\",\n      characterType: sa,\n      isBr: !1,\n      prepopulateChar: function () {\n        var a = this;\n        if (!a.prepopulatedChar) {\n          var b = a.node,\n            c = a.offset,\n            d = \"\",\n            e = sa,\n            f = !1;\n          if (c > 0)\n            if (3 == b.nodeType) {\n              var g = b.data,\n                h = g.charAt(c - 1),\n                i = a.nodeWrapper.getTextNodeInfo(),\n                j = i.spaceRegex;\n              i.collapseSpaces\n                ? j.test(h)\n                  ? (c > 1 && j.test(g.charAt(c - 2))) ||\n                    (i.preLine && \"\\n\" === g.charAt(c) ? ((d = \" \"), (e = za)) : ((d = \" \"), (e = va)))\n                  : ((d = h), (e = ta), (f = !0))\n                : ((d = h), (e = ua), (f = !0));\n            } else {\n              var k = b.childNodes[c - 1];\n              if (\n                (k &&\n                  1 == k.nodeType &&\n                  !u(k) &&\n                  (\"br\" == k.tagName.toLowerCase()\n                    ? ((d = \"\\n\"), (a.isBr = !0), (e = va), (f = !1))\n                    : (a.checkForTrailingSpace = !0)),\n                !d)\n              ) {\n                var l = b.childNodes[c];\n                l && 1 == l.nodeType && !u(l) && (a.checkForLeadingSpace = !0);\n              }\n            }\n          (a.prepopulatedChar = !0), (a.character = d), (a.characterType = e), (a.isCharInvariant = f);\n        }\n      },\n      isDefinitelyNonEmpty: function () {\n        var a = this.characterType;\n        return a == ta || a == ua;\n      },\n      resolveLeadingAndTrailingSpaces: function () {\n        if ((this.prepopulatedChar || this.prepopulateChar(), this.checkForTrailingSpace)) {\n          var a = this.session.getNodeWrapper(this.node.childNodes[this.offset - 1]).getTrailingSpace();\n          a && ((this.isTrailingSpace = !0), (this.character = a), (this.characterType = va)),\n            (this.checkForTrailingSpace = !1);\n        }\n        if (this.checkForLeadingSpace) {\n          var b = this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();\n          b && ((this.isLeadingSpace = !0), (this.character = b), (this.characterType = va)),\n            (this.checkForLeadingSpace = !1);\n        }\n      },\n      getPrecedingUncollapsedPosition: function (a) {\n        for (var b, c = this; (c = c.previousVisible()); ) if (((b = c.getCharacter(a)), \"\" !== b)) return c;\n        return null;\n      },\n      getCharacter: function (a) {\n        function b() {\n          return n || ((k = o.getPrecedingUncollapsedPosition(a)), (n = !0)), k;\n        }\n        this.resolveLeadingAndTrailingSpaces();\n        var c,\n          d = this.character,\n          e = f(a.ignoreCharacters),\n          g = \"\" !== d && e.indexOf(d) > -1;\n        if (this.isCharInvariant) return (c = g ? \"\" : d);\n        var h = [\n            \"character\",\n            a.includeSpaceBeforeBr,\n   ");
        builder.append("         a.includeBlockContentTrailingSpace,\n            a.includePreLineTrailingSpace,\n            e,\n          ].join(\"_\"),\n          i = this.cache.get(h);\n        if (null !== i) return i;\n        var j,\n          k,\n          l = \"\",\n          m = this.characterType == va,\n          n = !1,\n          o = this;\n        return (\n          m &&\n            (this.type == Ba\n              ? (l = \"\\n\")\n              : (\" \" == d &&\n                  (!b() ||\n                    k.isTrailingSpace ||\n                    \"\\n\" == k.character ||\n                    (\" \" == k.character && k.characterType == va))) ||\n                (\"\\n\" == d && this.isLeadingSpace\n                  ? b() && \"\\n\" != k.character && (l = \"\\n\")\n                  : ((j = this.nextUncollapsed()),\n                    j &&\n                      (j.isBr\n                        ? (this.type = ya)\n                        : j.isTrailingSpace && \"\\n\" == j.character\n                        ? (this.type = xa)\n                        : j.isLeadingSpace && \"\\n\" == j.character && (this.type = wa),\n                      \"\\n\" == j.character\n                        ? (this.type != ya || a.includeSpaceBeforeBr) &&\n                          (this.type != wa || a.includeSpaceBeforeBlock) &&\n                          ((this.type == xa && j.isTrailingSpace && !a.includeBlockContentTrailingSpace) ||\n                            ((this.type != za || j.type != ta || a.includePreLineTrailingSpace) &&\n                              (\"\\n\" == d\n                                ? j.isTrailingSpace\n                                  ? this.isTrailingSpace ||\n                                    (this.isBr &&\n                                      ((j.type = Aa),\n                                      b() && k.isLeadingSpace && !k.isTrailingSpace && \"\\n\" == k.character\n                                        ? (j.character = \"\")\n                                        : (j.type = Ba)))\n                                  : (l = \"\\n\")\n                                : \" \" == d && (l = \" \"))))\n                        : (l = d))))),\n          e.indexOf(l) > -1 && (l = \"\"),\n          this.cache.set(h, l),\n          l\n        );\n      },\n      equals: function (a) {\n        return !!a && this.node === a.node && this.offset === a.offset;\n      },\n      inspect: A,\n      toString: function () {\n        return this.character;\n      },\n    };\n    (z.prototype = Ca),\n      U(Ca, {\n        next: x(\"nextPos\", function (a) {\n          var b = a.nodeWrapper,\n            c = a.node,\n            d = a.offset,\n            e = b.session;\n          if (!c) return null;\n          var f, g, h;\n          return (\n            d == b.getLength()\n              ? ((f = c.parentNode), (g = f ? b.getNodeIndex() + 1 : 0))\n              : b.isCharacterDataNode()\n              ? ((f = c), (g = d + 1))\n              : ((h = c.childNodes[d]),\n                e.getNodeWrapper(h).containsPositions() ? ((f = h), (g = 0)) : ((f = c), (g = d + 1))),\n            f ? e.getPosition(f, g) : null\n          );\n        }),\n        previous: x(\"previous\", function (a) {\n          var b,\n            c,\n            d,\n            e = a.nodeWrapper,\n            f = a.node,\n            g = a.offset,\n            h = e.session;\n          return (\n            0 == g\n              ? ((b = f.parentNode), (c = b ? e.getNodeIndex() : 0))\n              : e.isCharacterDataNode()\n              ? ((b = f), (c = g - 1))\n              : ((d = f.childNodes[g - 1]),\n                h.getNodeWrapper(d).containsPositions() ? ((b = d), (c = S.getNodeLength(d))) : ((b = f), (c = g - 1))),\n            b ? h.getPosition(b, c) : null\n          );\n        }),\n        nextVisible: x(\"nextVisible\", function (a) {\n          var b = a.next();\n          if (!b) return null;\n          var c = b.nodeWrapper,\n            d = b.node,\n            e = b;\n          return c.isCollapsed() && (e = c.session.getPosition(d.parentNode, c.getNodeIndex() + 1)), e;\n        }),\n        nextUncollapsed: x(\"nextUncollapsed\", function (a) {\n          for (var b = a; (b = b.nextVisible()); )\n            if ((b.resolveLeadingAndTrailingSpaces(), \"\" !== b.character)) return b;\n          return null;\n        }),\n        previousVisible: x(\"previousVisible\", function (a) {\n          var b = a.previous();\n          if (!b) return null;\n          var c = b.nodeWrapper,\n            d = b.node,\n            e = b;\n          return c.isCollapsed() && (e = c.session.getPosition(d.parentNode, c.getNodeIndex())), e;\n        }),\n      });\n    var Da = null,\n      Ea = (function () {\n        function a(a) {\n          var b = new w();\n          return {\n            get: function (c) {\n              var d = b.get(c[a]);\n              if (d) for (var e, f = 0; (e = d[f++]); ) if (e.node === c) return e;\n              return null;\n            },\n            set: function (c) {\n              var d = c.node[a],\n                e = b.get(d) || b.set(d, []);\n              e.push(c);\n            },\n          };\n        }\n        function b() {\n          this.initCaches();\n        }\n        var c = T.isHostProperty(document.documentElement, \"uniqueID\");\n        return (\n          (b.prototype = {\n            initCaches: function () {\n              (this.elementCache = c\n                ? (function () {\n                    var a = new w();\n                    return {\n                      get: function (b) {\n                        return a.get(b.uniqueID);\n                      },\n                      set: function (b) {\n                        a.set(b.node.uniqueID, b);\n                      },\n                    };\n                  })()\n                : a(\"tagName\")),\n                (this.textNodeCache = a(\"data\")),\n                (this.otherNodeCache = a(\"nodeName\"));\n            },\n            getNodeWrapper: function (a) {\n              var b;\n              switch (a.nodeType) {\n                case 1:\n                  b = this.elementCache;\n                  break;\n                case 3:\n                  b = this.textNodeCache;\n                  break;\n                default:\n                  b = this.otherNodeCache;\n              }\n              var c = b.get(a);\n              return c || ((c = new y(a, this)), b.set(c)), c;\n            },\n            getPosition: function (a, b) {\n              return this.getNodeWrapper(a).getPosition(b);\n            },\n            getRangeBoundaryPosition: function (a, b) {\n              var c = b ? \"start\" : \"end\";\n              return this.getPosition(a[c + \"Container\"], a[c + \"Offset\"]);\n            },\n            detach: function () {\n              this.elementCache = this.textNodeCache = this.otherNodeCache = null;\n            },\n          }),\n          b\n        );\n      })();\n    U(S, { nextNode: q, previousNode: r });\n    var Fa = Array.prototype.indexOf\n      ? function (a, b) {\n          return a.indexOf(b);\n        }\n      : function (a, b) {\n          for (var c = 0, d = a.length; d > c; ++c) if (a[c] === b) return c;\n          return -1;\n        };\n    U(a.rangePrototype, {\n      moveStart: M(!0, !1),\n      moveEnd: M(!1, !1),\n      move: M(!0, !0),\n      trimStart: N(!0),\n      trimEnd: N(!1),\n      trim: L(function (a, b) {\n        var c = this.trimStart(b),\n          d = this.trimEnd(b);\n        return c || d;\n      }),\n      expand: L(function (a, b, c) {\n        var d = !1;\n        c = h(c, la);\n        var e = c.characterOptions;\n        if ((b || (b = Q), b == R)) {\n          var f,\n            g,\n            i = c.wordOptions,\n            j = a.getRangeBoundaryPosition(this, !0),\n            k = a.getRangeBoundaryPosition(this, !1),\n            l = F(j, e, i),\n            m = l.nextEndToken(),\n            n = m.chars[0].previousVisible();\n          if (this.collapsed) f = m;\n          else {\n            var o = F(k, e, i);\n            f = o.previousStartToken();\n          }\n          return (\n            (g = f.chars[f.chars.length - 1]),\n            n.equals(j) || (this.setStart(n.node, n.offset), (d = !0)),\n            g && !g.equals(k) && (this.setEnd(g.node, g.offset), (d = !0)),\n            c.trim && (c.trimStart && (d = this.trimStart(e) || d), c.trimEnd && (d = this.trimEnd(e) || d)),\n            d\n          );\n        }\n        return this.moveEnd(Q, 1, c);\n      }),\n      text: L(function (a, b) {\n        return this.collapsed ? \"\" : I(a, this, V(b, ga)).join(\"\");\n      }),\n      selectCharacters: L(function (a, b, c, d, e) {\n        var f = { characterOptions: e };\n        b || (b = W(this.getDocument())),\n          this.selectNodeContents(b),\n          this.collapse(!0),\n          this.moveStart(\"character\", c, f),\n          this.collapse(!0),\n          this.moveEnd(\"character\", d - c, f);\n      }),\n      toCharacterRange: L(function (a, b, c) {\n        b || (b = W(this.getDocument()));\n        var d,\n          e,\n          f = b.parentNode,\n          g = S.getNodeIndex(b),\n          h = -1 == S.comparePoints(this.startContainer, this.endContainer, f, g),\n          i = this.cloneRange();\n        return (\n          h\n            ? (i.setStartAndEnd(this.startContainer, this.startOffset, f, g), (d = -i.text(c).length))\n            : (i.setStartAndEnd(f, g, this.startContainer, this.startOffset), (d = i.text(c).length)),\n          (e = d + this.text(c).length),\n          { start: d, end: e }\n        );\n      }),\n      findText: L(function (b, c, d) {\n        (d = h(d, ja)), d.wholeWordsOnly && (d.wordOptions.includeTrailingSpace = !1);\n        var e = aa(d.direction),\n          f = d.withinRange;\n        f || ((f = a.createRange()), f.selectNodeContents(this.getDocument()));\n        var g = c,\n          i = !1;\n        \"string\" == typeof g ? d.caseSensitive || (g = g.toLowerCase()) : (i = !0);\n        var j = b.getRangeBoundaryPosition(this, !e),\n          k = f.comparePoint(j.node, j.offset);\n        -1 === k ? (j = b.getRangeBoundaryPosition(f, !0)) : 1 === k && (j = b.getRangeBoundaryPosition(f, !1));\n        for (var l, m = j, n = !1; ; )\n          if ((l = K(m, g, i, f, d))) {\n            if (l.valid)\n              return this.setStartAndEnd(l.startPos.node, l.startPos.offset, l.endPos.node, l.endPos.offset), !0;\n            m = e ? l.startPos : l.endPos;\n          } else {\n            if (!d.wrap || n) return !1;\n            (f = f.cloneRange()), (m = b.getRangeBoundaryPosition(f, !e)), f.setBoundary(j.node, j.offset, e), (n = !0);\n          }\n      }),\n      pasteHtml: function (a) {\n        if ((this.deleteContents(), a)) {\n          var b = this.createContextualFragment(a),\n            c = b.lastChild;\n          this.insertNode(b), this.collapseAfter(c);\n        }\n      },\n    }),\n      U(a.selectionPrototype, {\n        expand: L(function (a, b, c) {\n          this.changeEachRange(function (a) {\n            a.expand(b, c);\n          });\n        }),\n        move: L(function (a, b, c, d) {\n          var e = 0;\n          if (this.focusNode) {\n            this.collapse(this.focusNode, this.focusOffset);\n            var f = this.getRangeAt(0);\n            d || (d = {}),\n              (d.characterOptions = V(d.characterOptions, ha)),\n              (e = f.move(b, c, d)),\n              this.setSingleRange(f);\n          }\n          return e;\n        }),\n        trimStart: O(\"trimStart\"),\n        trimEnd: O(\"trimEnd\"),\n        trim: O(\"trim\"),\n        selectCharacters: L(function (b, c, d, e, f, g) {\n          var h = a.createRange(c);\n          h.selectCharacters(c, d, e, g), this.setSingleRange(h, f);\n        }),\n        saveCharacterRanges: L(function (a, b, c) {\n          for (\n            var d = this.getAllRanges(), e = d.length, f = [], g = 1 == e && this.isBackward(), h = 0, i = d.length;\n            i > h;\n            ++h\n          )\n            f[h] = { characterRange: d[h].toCharacterRange(b, c), backward: g, characterOptions: c };\n          return f;\n        }),\n        restoreCharacterRanges: L(function (b, c, d) {\n          this.removeAllRanges();\n          for (var e, f, g, h = 0, i = d.length; i > h; ++h)\n            (f = d[h]),\n              (g = f.characterRange),\n              (e = a.createRange(c)),\n              e.selectCharacters(c, g.start, g.end, f.characterOptions),\n              this.addRange(e, f.backward);\n        }),\n        text: L(function (a, b) {\n          for (var c = [], d = 0, e = this.rangeCount; e > d; ++d) c[d] = this.getRangeAt(d).text(b);\n          return c.join(\"\");\n        }),\n      }),\n      (a.innerText = function (b, c) {\n        var d = a.createRange(b);\n        d.selectNodeContents(b);\n        var e = d.text(c);\n        return e;\n      }),\n      (a.createWordIterator = function (a, b, c) {\n        var d = C();\n        c = h(c, ma);\n        var e = d.getPosition(a, b),\n          f = F(e, c.characterOptions, c.wordOptions),\n          g = aa(c.direction);\n        return {\n          next: function () {\n            return g ? f.previousStartToken() : f.nextEndToken();\n          },\n          dispose: function () {\n            f.dispose(), (this.next = function () {});\n          },\n        };\n      }),\n      (a.noMutation = function (a) {\n        var b = C();\n        a(b), D();\n      }),\n      (a.noMutation.createEntryPointFunction = L),\n      (a.textRange = {\n        isBlockNode: l,\n        isCollapsedWhitespaceNode: t,\n        createPosition: L(function (a, b, c) {\n          return a.getPosition(b, c);\n        }),\n      });\n  }),\n  (wysihtml.browser = (function () {\n    function a(a) {\n      return +((/ipad|iphone|ipod/.test(a) && a.match(/ os (\\d+).+? like mac os x/)) || [void 0, 0])[1];\n    }\n    function b(a) {\n      return +(a.match(/android (\\d+)/) || [void 0, 0])[1];\n    }\n    function c(a, b) {\n      var c,\n        d = -1;\n      return (\n        \"Microsoft Internet Explorer\" == navigator.appName\n          ? (c = new RegExp(\"MSIE ([0-9]{1,}[.0-9]{0,})\"))\n          : \"Netscape\" == navigator.appName &&\n            (navigator.userAgent.indexOf(\"Trident\") > -1\n              ? (c = new RegExp(\"Trident/.*rv:([0-9]{1,}[.0-9]{0,})\"))\n              : /Edge\\/(\\d+)./i.test(navigator.userAgent) && (c = /Edge\\/(\\d+)./i)),\n        c && null != c.exec(navigator.userAgent) && (d = parseFloat(RegExp.$1)),\n        -1 === d\n          ? !1\n          : a\n          ? b\n            ? \"<\" === b\n              ? d > a\n              : \">\" === b\n              ? a > d\n              : \"<=\" === b\n              ? d >= a\n              : \">=\" === b\n              ? a >= d\n              : void 0\n            : a === d\n          : !0\n      );\n    }\n    var d = navigator.userAgent,\n      e = document.createElement(\"div\"),\n      f = -1 !== d.indexOf(\"Gecko\") && -1 === d.indexOf(\"KHTML\") && !c(),\n      g = -1 !== d.indexOf(\"AppleWebKit/\") && !c(),\n      h = -1 !== d.indexOf(\"Chrome/\") && !c(),\n      i = -1 !== d.indexOf(\"Opera/\") && !c();\n    return {\n      USER_AGENT: d,\n      supported: function () {\n        var c = this.USER_AGENT.toLowerCase(),\n          d = \"contentEditable\" in e,\n          f = document.execCommand && document.queryCommandSupported && document.queryCommandState,\n          g = document.querySelector && document.querySelectorAll,\n          h =\n            (this.isIos() && a(c) < 5) ||\n            (this.isAndroid() && b(c) < 4) ||\n            -1 !== c.indexOf(\"opera mobi\") ||\n            -1 !== c.indexOf(\"hpwos/\");\n        return d && f && g && !h;\n      },\n      isTouchDevice: function () {\n        return this.supportsEvent(\"touchmove\");\n      },\n      isIos: function () {\n        return /ipad|iphone|ipod/i.test(this.USER_AGENT);\n      },\n      isAndroid: function () {\n        return -1 !== this.USER_AGENT.indexOf(\"Android\");\n      },\n      supportsSandboxedIframes: function () {\n        return c();\n      },\n      throwsMixedContentWarningWhenIframeSrcIsEmpty: function () {\n        return !(\"querySelector\" in document);\n      },\n      displaysCaretInEmptyContentEditableCorrectly: function () {\n        return c(12, \">\");\n      },\n      hasCurrentStyleProperty: function () {\n        return \"currentStyle\" in e;\n      },\n      insertsLineBreaksOnReturn: function () {\n        return f;\n      },\n      supportsPlaceholderAttributeOn: function (a) {\n        return \"placeholder\" in a;\n      },\n      supportsEvent: function (a) {\n        return (\n          \"on\" + a in e ||\n          (function () {\n            return e.setAttribute(\"on\" + a, \"return;\"), \"f");
        builder.append("unction\" == typeof e[\"on\" + a];\n          })()\n        );\n      },\n      supportsEventsInIframeCorrectly: function () {\n        return !i;\n      },\n      supportsHTML5Tags: function (a) {\n        var b = a.createElement(\"div\"),\n          c = \"<article>foo</article>\";\n        return (b.innerHTML = c), b.innerHTML.toLowerCase() === c;\n      },\n      supportsCommand: (function () {\n        var a = { formatBlock: c(10, \"<=\"), insertUnorderedList: c(), insertOrderedList: c() },\n          b = { insertHTML: f };\n        return function (c, d) {\n          var e = a[d];\n          if (!e) {\n            try {\n              return c.queryCommandSupported(d);\n            } catch (f) {}\n            try {\n              return c.queryCommandEnabled(d);\n            } catch (g) {\n              return !!b[d];\n            }\n          }\n          return !1;\n        };\n      })(),\n      doesAutoLinkingInContentEditable: function () {\n        return c();\n      },\n      canDisableAutoLinking: function () {\n        return this.supportsCommand(document, \"AutoUrlDetect\");\n      },\n      clearsContentEditableCorrectly: function () {\n        return f || i || g;\n      },\n      supportsGetAttributeCorrectly: function () {\n        var a = document.createElement(\"td\");\n        return \"1\" != a.getAttribute(\"rowspan\");\n      },\n      canSelectImagesInContentEditable: function () {\n        return f || c() || i;\n      },\n      autoScrollsToCaret: function () {\n        return !g;\n      },\n      autoClosesUnclosedTags: function () {\n        var a,\n          b,\n          c = e.cloneNode(!1);\n        return (\n          (c.innerHTML = \"<p><div></div>\"),\n          (b = c.innerHTML.toLowerCase()),\n          (a = \"<p></p><div></div>\" === b || \"<p><div></div></p>\" === b),\n          (this.autoClosesUnclosedTags = function () {\n            return a;\n          }),\n          a\n        );\n      },\n      supportsNativeGetElementsByClassName: function () {\n        return -1 !== String(document.getElementsByClassName).indexOf(\"[native code]\");\n      },\n      supportsSelectionModify: function () {\n        return \"getSelection\" in window && \"modify\" in window.getSelection();\n      },\n      needsSpaceAfterLineBreak: function () {\n        return i;\n      },\n      supportsSpeechApiOn: function (a) {\n        var b = d.match(/Chrome\\/(\\d+)/) || [void 0, 0];\n        return b[1] >= 11 && (\"onwebkitspeechchange\" in a || \"speech\" in a);\n      },\n      crashesWhenDefineProperty: function (a) {\n        return c(9) && (\"XMLHttpRequest\" === a || \"XDomainRequest\" === a);\n      },\n      doesAsyncFocus: function () {\n        return c(12, \">\");\n      },\n      hasProblemsSettingCaretAfterImg: function () {\n        return c();\n      },\n      hasLiDeletingProblem: function () {\n        return c();\n      },\n      hasUndoInContextMenu: function () {\n        return f || h || i;\n      },\n      hasInsertNodeIssue: function () {\n        return i;\n      },\n      hasIframeFocusIssue: function () {\n        return c();\n      },\n      createsNestedInvalidMarkupAfterPaste: function () {\n        return g;\n      },\n      hasCaretBlockElementIssue: function () {\n        return g;\n      },\n      supportsMutationEvents: function () {\n        return \"MutationEvent\" in window;\n      },\n      supportsModernPaste: function () {\n        return !c();\n      },\n      fixStyleKey: function (a) {\n        return \"cssFloat\" === a ? (\"styleFloat\" in document.createElement(\"div\").style ? \"styleFloat\" : \"cssFloat\") : a;\n      },\n      usesControlRanges: function () {\n        return document.body && \"createControlRange\" in document.body;\n      },\n      hasCaretAtLinkEndInsertionProblems: function () {\n        return g;\n      },\n    };\n  })()),\n  (wysihtml.lang.array = function (a) {\n    return {\n      contains: function (b) {\n        if (Array.isArray(b)) {\n          for (var c = b.length; c--; ) if (-1 !== wysihtml.lang.array(a).indexOf(b[c])) return !0;\n          return !1;\n        }\n        return -1 !== wysihtml.lang.array(a).indexOf(b);\n      },\n      indexOf: function (b) {\n        if (a.indexOf) return a.indexOf(b);\n        for (var c = 0, d = a.length; d > c; c++) if (a[c] === b) return c;\n        return -1;\n      },\n      without: function (b) {\n        b = wysihtml.lang.array(b);\n        for (var c = [], d = 0, e = a.length; e > d; d++) b.contains(a[d]) || c.push(a[d]);\n        return c;\n      },\n      get: function () {\n        for (var b = 0, c = a.length, d = []; c > b; b++) d.push(a[b]);\n        return d;\n      },\n      map: function (b, c) {\n        if (Array.prototype.map) return a.map(b, c);\n        for (var d = a.length >>> 0, e = new Array(d), f = 0; d > f; f++) e[f] = b.call(c, a[f], f, a);\n        return e;\n      },\n      unique: function () {\n        for (var b = [], c = a.length, d = 0; c > d; ) wysihtml.lang.array(b).contains(a[d]) || b.push(a[d]), d++;\n        return b;\n      },\n    };\n  }),\n  (wysihtml.lang.Dispatcher = Base.extend({\n    on: function (a, b) {\n      return (this.events = this.events || {}), (this.events[a] = this.events[a] || []), this.events[a].push(b), this;\n    },\n    off: function (a, b) {\n      this.events = this.events || {};\n      var c,\n        d,\n        e = 0;\n      if (a) {\n        for (c = this.events[a] || [], d = []; e < c.length; e++) c[e] !== b && b && d.push(c[e]);\n        this.events[a] = d;\n      } else this.events = {};\n      return this;\n    },\n    fire: function (a, b) {\n      this.events = this.events || {};\n      for (var c = this.events[a] || [], d = 0; d < c.length; d++) c[d].call(this, b);\n      return this;\n    },\n    observe: function () {\n      return this.on.apply(this, arguments);\n    },\n    stopObserving: function () {\n      return this.off.apply(this, arguments);\n    },\n  })),\n  (wysihtml.lang.object = function (a) {\n    return {\n      merge: function (b, c) {\n        for (var d in b)\n          c &&\n          wysihtml.lang.object(b[d]).isPlainObject() &&\n          (\"undefined\" == typeof a[d] || wysihtml.lang.object(a[d]).isPlainObject())\n            ? \"undefined\" == typeof a[d]\n              ? (a[d] = wysihtml.lang.object(b[d]).clone(!0))\n              : wysihtml.lang.object(a[d]).merge(wysihtml.lang.object(b[d]).clone(!0))\n            : (a[d] = wysihtml.lang.object(b[d]).isPlainObject() ? wysihtml.lang.object(b[d]).clone(!0) : b[d]);\n        return this;\n      },\n      difference: function (b) {\n        var c = {};\n        for (var d in a) a.hasOwnProperty(d) && (b.hasOwnProperty(d) || (c[d] = a[d]));\n        for (var e in b) b.hasOwnProperty(e) && ((a.hasOwnProperty(e) && a[e] === b[e]) || (c[0] = a[0]));\n        return c;\n      },\n      get: function () {\n        return a;\n      },\n      clone: function (b) {\n        var c,\n          d = {};\n        if (null === a || !wysihtml.lang.object(a).isPlainObject()) return a;\n        for (c in a) a.hasOwnProperty(c) && (b ? (d[c] = wysihtml.lang.object(a[c]).clone(b)) : (d[c] = a[c]));\n        return d;\n      },\n      isArray: function () {\n        return \"[object Array]\" === Object.prototype.toString.call(a);\n      },\n      isFunction: function () {\n        return \"[object Function]\" === Object.prototype.toString.call(a);\n      },\n      isPlainObject: function () {\n        return (\n          a &&\n          \"[object Object]\" === Object.prototype.toString.call(a) &&\n          !(\"Node\" in window ? a instanceof Node : a instanceof Element || a instanceof Text)\n        );\n      },\n      isEmpty: function () {\n        for (var b in a) if (a.hasOwnProperty(b)) return !1;\n        return !0;\n      },\n    };\n  }),\n  (function () {\n    var a = /^\\s+/,\n      b = /\\s+$/,\n      c = /[&<>\\t\"]/g,\n      d = { \"&\": \"&amp;\", \"<\": \"&lt;\", \">\": \"&gt;\", '\"': \"&quot;\", \"	\": \"&nbsp; \" };\n    wysihtml.lang.string = function (e) {\n      return (\n        (e = String(e)),\n        {\n          trim: function () {\n            return e.replace(a, \"\").replace(b, \"\");\n          },\n          interpolate: function (a) {\n            for (var b in a) e = this.replace(\"#{\" + b + \"}\").by(a[b]);\n            return e;\n          },\n          replace: function (a) {\n            return {\n              by: function (b) {\n                return e.split(a).join(b);\n              },\n            };\n          },\n          escapeHTML: function (a, b) {\n            var f = e.replace(c, function (a) {\n              return d[a];\n            });\n            return a && (f = f.replace(/(?:\\r\\n|\\r|\\n)/g, \"<br />\")), b && (f = f.replace(/  /gi, \"&nbsp; \")), f;\n          },\n        }\n      );\n    };\n  })(),\n  (function (a) {\n    function b(a, b) {\n      return f(a, b) ? a : (a === a.ownerDocument.documentElement && (a = a.ownerDocument.body), g(a, b));\n    }\n    function c(a) {\n      return a.replace(i, function (a, b) {\n        var c = (b.match(j) || [])[1] || \"\",\n          d = l[c];\n        (b = b.replace(j, \"\")), b.split(d).length > b.split(c).length && ((b += c), (c = \"\"));\n        var e = b,\n          f = b;\n        return (\n          b.length > k && (f = f.substr(0, k) + \"...\"),\n          \"www.\" === e.substr(0, 4) && (e = \"http://\" + e),\n          '<a href=\"' + e + '\">' + f + \"</a>\" + c\n        );\n      });\n    }\n    function d(a) {\n      var b = a._wysihtml_tempElement;\n      return b || (b = a._wysihtml_tempElement = a.createElement(\"div\")), b;\n    }\n    function e(b) {\n      var e = b.parentNode,\n        f = a.lang.string(b.data).escapeHTML(),\n        g = d(e.ownerDocument);\n      for (g.innerHTML = \"<span></span>\" + c(f), g.removeChild(g.firstChild); g.firstChild; )\n        e.insertBefore(g.firstChild, b);\n      e.removeChild(b);\n    }\n    function f(b, c) {\n      for (var d; b.parentNode; ) {\n        if (((b = b.parentNode), (d = b.nodeName), b.className && a.lang.array(b.className.split(\" \")).contains(c)))\n          return !0;\n        if (h.contains(d)) return !0;\n        if (\"body\" === d) return !1;\n      }\n      return !1;\n    }\n    function g(b, c) {\n      if (!(h.contains(b.nodeName) || (b.className && a.lang.array(b.className.split(\" \")).contains(c)))) {\n        if (b.nodeType === a.TEXT_NODE && b.data.match(i)) return void e(b);\n        for (var d = a.lang.array(b.childNodes).get(), f = d.length, j = 0; f > j; j++) g(d[j], c);\n        return b;\n      }\n    }\n    var h = a.lang.array([\"CODE\", \"PRE\", \"A\", \"SCRIPT\", \"HEAD\", \"TITLE\", \"STYLE\"]),\n      i = /((https?:\\/\\/|www\\.)[^\\s<]{3,})/gi,\n      j = /([^\\w\\/\\-](,?))$/i,\n      k = 100,\n      l = { \")\": \"(\", \"]\": \"[\", \"}\": \"{\" };\n    (a.dom.autoLink = b), (a.dom.autoLink.URL_REG_EXP = i);\n  })(wysihtml),\n  (function (a) {\n    var b = a.dom;\n    (b.addClass = function (a, c) {\n      var d = a.classList;\n      return d ? d.add(c) : void (b.hasClass(a, c) || (a.className += \" \" + c));\n    }),\n      (b.removeClass = function (a, b) {\n        var c = a.classList;\n        return c ? c.remove(b) : void (a.className = a.className.replace(new RegExp(\"(^|\\\\s+)\" + b + \"(\\\\s+|$)\"), \" \"));\n      }),\n      (b.hasClass = function (a, b) {\n        var c = a.classList;\n        if (c) return c.contains(b);\n        var d = a.className;\n        return d.length > 0 && (d == b || new RegExp(\"(^|\\\\s)\" + b + \"(\\\\s|$)\").test(d));\n      });\n  })(wysihtml),\n  (wysihtml.dom.compareDocumentPosition = (function () {\n    var a = document.documentElement;\n    return a.compareDocumentPosition\n      ? function (a, b) {\n          return a.compareDocumentPosition(b);\n        }\n      : function (a, b) {\n          var c, d;\n          if (((c = 9 === a.nodeType ? a : a.ownerDocument), (d = 9 === b.nodeType ? b : b.ownerDocument), a === b))\n            return 0;\n          if (a === b.ownerDocument) return 20;\n          if (a.ownerDocument === b) return 10;\n          if (c !== d) return 1;\n          if (2 === a.nodeType && a.childNodes && -1 !== wysihtml.lang.array(a.childNodes).indexOf(b)) return 20;\n          if (2 === b.nodeType && b.childNodes && -1 !== wysihtml.lang.array(b.childNodes).indexOf(a)) return 10;\n          for (var e = a, f = [], g = null; e; ) {\n            if (e == b) return 10;\n            f.push(e), (e = e.parentNode);\n          }\n          for (e = b, g = null; e; ) {\n            if (e == a) return 20;\n            var h = wysihtml.lang.array(f).indexOf(e);\n            if (-1 !== h) {\n              var i = f[h],\n                j = wysihtml.lang.array(i.childNodes).indexOf(f[h - 1]),\n                k = wysihtml.lang.array(i.childNodes).indexOf(g);\n              return j > k ? 2 : 4;\n            }\n            (g = e), (e = e.parentNode);\n          }\n          return 1;\n        };\n  })()),\n  (wysihtml.dom.contains = (function () {\n    var a = document.documentElement;\n    return a.contains\n      ? function (a, b) {\n          if (b.nodeType !== wysihtml.ELEMENT_NODE) {\n            if (b.parentNode === a) return !0;\n            b = b.parentNode;\n          }\n          return a !== b && a.contains(b);\n        }\n      : a.compareDocumentPosition\n      ? function (a, b) {\n          return !!(16 & a.compareDocumentPosition(b));\n        }\n      : void 0;\n  })()),\n  (function (a) {\n    var b = document;\n    a.dom.ContentEditableArea = Base.extend({\n      getContentEditable: function () {\n        return this.element;\n      },\n      getWindow: function () {\n        return this.element.ownerDocument.defaultView || this.element.ownerDocument.parentWindow;\n      },\n      getDocument: function () {\n        return this.element.ownerDocument;\n      },\n      constructor: function (b, c, d) {\n        (this.callback = b || a.EMPTY_FUNCTION),\n          (this.config = a.lang.object({}).merge(c).get()),\n          this.config.className || (this.config.className = \"wysihtml-sandbox\"),\n          d ? (this.element = this._bindElement(d)) : (this.element = this._createElement());\n      },\n      destroy: function () {},\n      _createElement: function () {\n        var a = b.createElement(\"div\");\n        return (a.className = this.config.className), this._loadElement(a), a;\n      },\n      _bindElement: function (a) {\n        return (\n          (a.className = a.className ? a.className + \" wysihtml-sandbox\" : \"wysihtml-sandbox\"),\n          this._loadElement(a, !0),\n          a\n        );\n      },\n      _loadElement: function (a, b) {\n        var c = this;\n        if (!b) {\n          var d = this._getHtml();\n          a.innerHTML = d;\n        }\n        (this.loaded = !0),\n          setTimeout(function () {\n            c.callback(c);\n          }, 0);\n      },\n      _getHtml: function (a) {\n        return \"\";\n      },\n    });\n  })(wysihtml),\n  (wysihtml.dom.convertToList = (function () {\n    function a(a, b) {\n      var c = a.createElement(\"li\");\n      return b.appendChild(c), c;\n    }\n    function b(a, b) {\n      return a.createElement(b);\n    }\n    function c(c, d, e) {\n      if (\"UL\" === c.nodeName || \"OL\" === c.nodeName || \"MENU\" === c.nodeName) return c;\n      var f,\n        g,\n        h,\n        i,\n        j,\n        k,\n        l,\n        m,\n        n,\n        o = c.ownerDocument,\n        p = b(o, d),\n        q = c.querySelectorAll(\"br\"),\n        r = q.length;\n      for (n = 0; r > n; n++)\n        for (i = q[n]; (j = i.parentNode) && j !== c && j.lastChild === i; ) {\n          if (\"block\" === wysihtml.dom.getStyle(\"display\").from(j)) {\n            j.removeChild(i);\n            break;\n          }\n          wysihtml.dom.insert(i).after(i.parentNode);\n        }\n      for (f = wysihtml.lang.array(c.childNodes).get(), g = f.length, n = 0; g > n; n++)\n        (m = m || a(o, p)),\n          (h = f[n]),\n          (k = \"block\" === wysihtml.dom.getStyle(\"display\").from(h)),\n          (l = \"BR\" === h.nodeName),\n          !k || (e && wysihtml.dom.hasClass(h, e))\n            ? l\n              ? (m = m.firstChild ? null : m)\n              : m.appendChild(h)\n            : ((m = m.firstChild ? a(o, p) : m), m.appendChild(h), (m = null));\n      return 0 === f.length && a(o, p), c.parentNode.replaceChild(p, c), p;\n    }\n    return c;\n  })()),\n  (wysihtml.dom.copyAttributes = function (a) {\n    return {\n      from: function (b) {\n        return {\n          to: function c(d) {\n            for (var e, f = 0, g = a.length; g > f; f++)\n              (e = a[f]), \"undefined\" != typeof b[e] && \"\" !== b[e] && (d[e] = b[e]);\n            return { andTo: c };\n          },\n        };\n      },\n    };\n  }),\n  (function (a) {\n    var b = [\"-webkit-box-sizing\", \"-moz-box-sizing\", \"-ms-box-sizing\", \"box-sizing\"],\n      c = function (b)");
        builder.append(" {\n        return d(b) ? parseInt(a.getStyle(\"width\").from(b), 10) < b.offsetWidth : !1;\n      },\n      d = function (c) {\n        for (var d = 0, e = b.length; e > d; d++) if (\"border-box\" === a.getStyle(b[d]).from(c)) return b[d];\n      };\n    a.copyStyles = function (d) {\n      return {\n        from: function (e) {\n          c(e) && (d = wysihtml.lang.array(d).without(b));\n          for (var f, g = \"\", h = d.length, i = 0; h > i; i++) (f = d[i]), (g += f + \":\" + a.getStyle(f).from(e) + \";\");\n          return {\n            to: function j(b) {\n              return a.setStyles(g).on(b), { andTo: j };\n            },\n          };\n        },\n      };\n    };\n  })(wysihtml.dom),\n  (function (a) {\n    a.dom.delegate = function (a, b, c, d) {\n      var e = function (c) {\n        for (\n          var e = c.target, f = 3 === e.nodeType ? e.parentNode : e, g = a.querySelectorAll(b), h = 0, i = g.length;\n          i > h;\n          h++\n        )\n          g[h].contains(f) && d.call(g[h], c);\n      };\n      return (\n        a.addEventListener(c, e, !1),\n        {\n          stop: function () {\n            a.removeEventListener(c, e, !1);\n          },\n        }\n      );\n    };\n  })(wysihtml),\n  (function (a) {\n    function b(a, b) {\n      for (var c = [a], d = a; (b && d && d !== b) || (!b && d); ) c.unshift(d), (d = d.parentNode);\n      return c;\n    }\n    a.dom.domNode = function (c) {\n      var d = [a.ELEMENT_NODE, a.TEXT_NODE];\n      return {\n        is: {\n          emptyTextNode: function (b) {\n            var d = b ? /^\\s*$/g : /^[\\r\\n]*$/g;\n            return c && c.nodeType === a.TEXT_NODE && d.test(c.data);\n          },\n          rangyBookmark: function () {\n            return c && 1 === c.nodeType && c.classList.contains(\"rangySelectionBoundary\");\n          },\n          visible: function () {\n            var b = !/^\\s*$/g.test(a.dom.getTextContent(c));\n            return (\n              b ||\n                (1 === c.nodeType &&\n                  c.querySelector(\"img, br, hr, object, embed, canvas, input, textarea\") &&\n                  (b = !0)),\n              b\n            );\n          },\n          lineBreak: function () {\n            return c && 1 === c.nodeType && \"BR\" === c.nodeName;\n          },\n          block: function () {\n            return c && 1 === c.nodeType && \"block\" === c.ownerDocument.defaultView.getComputedStyle(c).display;\n          },\n          voidElement: function () {\n            return a.dom.domNode(c).test({ query: a.VOID_ELEMENTS });\n          },\n        },\n        prev: function (b) {\n          var e = c.previousSibling,\n            f = b && b.nodeTypes ? b.nodeTypes : d;\n          return e\n            ? a.dom.domNode(e).is.rangyBookmark() ||\n              !a.lang.array(f).contains(e.nodeType) ||\n              (b && b.ignoreBlankTexts && a.dom.domNode(e).is.emptyTextNode(!0))\n              ? a.dom.domNode(e).prev(b)\n              : e\n            : null;\n        },\n        next: function (b) {\n          var e = c.nextSibling,\n            f = b && b.nodeTypes ? b.nodeTypes : d;\n          return e\n            ? a.dom.domNode(e).is.rangyBookmark() ||\n              !a.lang.array(f).contains(e.nodeType) ||\n              (b && b.ignoreBlankTexts && a.dom.domNode(e).is.emptyTextNode(!0))\n              ? a.dom.domNode(e).next(b)\n              : e\n            : null;\n        },\n        commonAncestor: function (a, d) {\n          var e = b(c, d),\n            f = b(a, d);\n          if (e[0] != f[0]) return null;\n          for (var g = 0; g < e.length; g++) if (e[g] != f[g]) return e[g - 1];\n          return null;\n        },\n        lastLeafNode: function (b) {\n          var d;\n          if (1 !== c.nodeType) return c;\n          if (((d = c.lastChild), !d)) return c;\n          if (b && b.leafClasses)\n            for (var e = b.leafClasses.length; e--; ) if (a.dom.hasClass(c, b.leafClasses[e])) return c;\n          return a.dom.domNode(d).lastLeafNode(b);\n        },\n        escapeParent: function (b, d) {\n          var e,\n            f,\n            g,\n            h = c;\n          if (!a.dom.contains(b, c)) throw new Error(\"Child is not a descendant of node.\");\n          do {\n            for (e = h.parentNode, f = e.cloneNode(!1); e.lastChild && e.lastChild !== h; )\n              f.insertBefore(e.lastChild, f.firstChild);\n            if (\n              (e !== b && ((g = e.cloneNode(!1)), g.appendChild(h), (h = g)),\n              e.parentNode.insertBefore(h, e.nextSibling),\n              \"\" !== f.innerHTML)\n            )\n              if (/^\\s+$/.test(f.innerHTML))\n                for (; f.lastChild; ) e.parentNode.insertBefore(f.lastChild, h.nextSibling);\n              else e.parentNode.insertBefore(f, h.nextSibling);\n            if (\"\" === e.innerHTML) e.parentNode.removeChild(e);\n            else if (/^\\s+$/.test(e.innerHTML)) {\n              for (; e.firstChild; ) e.parentNode.insertBefore(e.firstChild, e);\n              e.parentNode.removeChild(e);\n            }\n          } while (e && e !== b);\n          d && h && (h.parentNode.insertBefore(d, h), d.appendChild(h));\n        },\n        transferContentTo: function (b, d) {\n          if (1 === c.nodeType) {\n            if (a.dom.domNode(b).is.voidElement() || 3 === b.nodeType)\n              for (; c.lastChild; ) b.parentNode.insertBefore(c.lastChild, b.nextSibling);\n            else for (; c.firstChild; ) b.appendChild(c.firstChild);\n            d && c.parentNode.removeChild(c);\n          } else\n            (3 === c.nodeType || 8 === c.nodeType) &&\n              (a.dom.domNode(b).is.voidElement() ? b.parentNode.insertBefore(c, b.nextSibling) : b.appendChild(c));\n        },\n        test: function (b) {\n          var d;\n          if (!b) return !1;\n          if (1 !== c.nodeType) return !1;\n          if (b.query && !c.matches(b.query)) return !1;\n          if (b.nodeName && c.nodeName.toLowerCase() !== b.nodeName.toLowerCase()) return !1;\n          if (b.className && !c.classList.contains(b.className)) return !1;\n          if (b.classRegExp) {\n            var e = (c.className || \"\").match(b.classRegExp) || [];\n            if (0 === e.length) return !1;\n          }\n          if (b.styleProperty && b.styleProperty.length > 0)\n            for (\n              var f = !1, g = Array.isArray(b.styleProperty) ? b.styleProperty : [b.styleProperty], h = 0, i = g.length;\n              i > h;\n              h++\n            ) {\n              if (((d = a.browser.fixStyleKey(g[h])), c.style[d])) {\n                if (!b.styleValue) {\n                  f = !0;\n                  break;\n                }\n                if (b.styleValue instanceof RegExp) {\n                  if (c.style[d].trim().match(b.styleValue).length > 0) {\n                    f = !0;\n                    break;\n                  }\n                } else if (Array.isArray(b.styleValue)) {\n                  if (b.styleValue.indexOf(c.style[d].trim())) {\n                    f = !0;\n                    break;\n                  }\n                } else if (b.styleValue === c.style[d].trim().replace(/, /g, \",\")) {\n                  f = !0;\n                  break;\n                }\n              }\n              if (!f) return !1;\n            }\n          if (b.attribute) {\n            var j = a.dom.getAttributes(c),\n              k = [],\n              l = !1;\n            Array.isArray(b.attribute) ? (k = b.attribute) : (k[b.attribute] = b.attributeValue);\n            for (var m in k)\n              if (k.hasOwnProperty(m))\n                if (\"undefined\" == typeof k[m]) {\n                  if (\"undefined\" != typeof j[m]) {\n                    l = !0;\n                    break;\n                  }\n                } else if (j[m] === k[m]) {\n                  l = !0;\n                  break;\n                }\n            if (!l) return !1;\n          }\n          return !0;\n        },\n      };\n    };\n  })(wysihtml),\n  (wysihtml.dom.getAsDom = (function () {\n    var a = function (a, b) {\n        var c = b.createElement(\"div\");\n        (c.style.display = \"none\"), b.body.appendChild(c);\n        try {\n          c.innerHTML = a;\n        } catch (d) {}\n        return b.body.removeChild(c), c;\n      },\n      b = function (a) {\n        if (!a._wysihtml_supportsHTML5Tags) {\n          for (var b = 0, d = c.length; d > b; b++) a.createElement(c[b]);\n          a._wysihtml_supportsHTML5Tags = !0;\n        }\n      },\n      c = [\n        \"abbr\",\n        \"article\",\n        \"aside\",\n        \"audio\",\n        \"bdi\",\n        \"canvas\",\n        \"command\",\n        \"datalist\",\n        \"details\",\n        \"figcaption\",\n        \"figure\",\n        \"footer\",\n        \"header\",\n        \"hgroup\",\n        \"keygen\",\n        \"mark\",\n        \"meter\",\n        \"nav\",\n        \"output\",\n        \"progress\",\n        \"rp\",\n        \"rt\",\n        \"ruby\",\n        \"svg\",\n        \"section\",\n        \"source\",\n        \"summary\",\n        \"time\",\n        \"track\",\n        \"video\",\n        \"wbr\",\n      ];\n    return function (c, d) {\n      d = d || document;\n      var e;\n      return (\n        \"object\" == typeof c && c.nodeType\n          ? ((e = d.createElement(\"div\")), e.appendChild(c))\n          : wysihtml.browser.supportsHTML5Tags(d)\n          ? ((e = d.createElement(\"div\")), (e.innerHTML = c))\n          : (b(d), (e = a(c, d))),\n        e\n      );\n    };\n  })()),\n  (wysihtml.dom.getAttribute = function (a, b) {\n    var c = !wysihtml.browser.supportsGetAttributeCorrectly();\n    b = b.toLowerCase();\n    var d = a.nodeName;\n    if (\"IMG\" == d && \"src\" == b && wysihtml.dom.isLoadedImage(a) === !0) return a.src;\n    if (c && \"outerHTML\" in a) {\n      var e = a.outerHTML.toLowerCase(),\n        f = -1 != e.indexOf(\" \" + b + \"=\");\n      return f ? a.getAttribute(b) : null;\n    }\n    return a.getAttribute(b);\n  }),\n  (wysihtml.dom.getAttributes = function (a) {\n    var b,\n      c = !wysihtml.browser.supportsGetAttributeCorrectly(),\n      d = a.nodeName,\n      e = [];\n    for (b in a.attributes)\n      ((a.attributes.hasOwnProperty && a.attributes.hasOwnProperty(b)) ||\n        (!a.attributes.hasOwnProperty && Object.prototype.hasOwnProperty.call(a.attributes, b))) &&\n        a.attributes[b].specified &&\n        (\"IMG\" == d && \"src\" == a.attributes[b].name.toLowerCase() && wysihtml.dom.isLoadedImage(a) === !0\n          ? (e.src = a.src)\n          : wysihtml.lang.array([\"rowspan\", \"colspan\"]).contains(a.attributes[b].name.toLowerCase()) && c\n          ? 1 !== a.attributes[b].value && (e[a.attributes[b].name] = a.attributes[b].value)\n          : (e[a.attributes[b].name] = a.attributes[b].value));\n    return e;\n  }),\n  (wysihtml.dom.getParentElement = (function () {\n    return function (a, b, c, d) {\n      for (c = c || 50; c-- && a && \"BODY\" !== a.nodeName && (!d || a !== d); ) {\n        if (wysihtml.dom.domNode(a).test(b)) return a;\n        a = a.parentNode;\n      }\n      return null;\n    };\n  })()),\n  (wysihtml.dom.getPastedHtml = function (a) {\n    var b;\n    return (\n      wysihtml.browser.supportsModernPaste() &&\n        a.clipboardData &&\n        (wysihtml.lang.array(a.clipboardData.types).contains(\"text/html\")\n          ? (b = a.clipboardData.getData(\"text/html\"))\n          : wysihtml.lang.array(a.clipboardData.types).contains(\"text/plain\") &&\n            (b = wysihtml.lang.string(a.clipboardData.getData(\"text/plain\")).escapeHTML(!0, !0))),\n      b\n    );\n  }),\n  (wysihtml.dom.getPastedHtmlWithDiv = function (a, b) {\n    var c = a.selection.getBookmark(),\n      d = a.element.ownerDocument,\n      e = d.createElement(\"DIV\"),\n      f = a.getScrollPos();\n    d.body.appendChild(e),\n      (e.style.width = \"1px\"),\n      (e.style.height = \"1px\"),\n      (e.style.overflow = \"hidden\"),\n      (e.style.position = \"absolute\"),\n      (e.style.top = f.y + \"px\"),\n      (e.style.left = f.x + \"px\"),\n      e.setAttribute(\"contenteditable\", \"true\"),\n      e.focus(),\n      setTimeout(function () {\n        var d;\n        a.selection.setBookmark(c),\n          (d = e.innerHTML),\n          d && /^<br\\/?>$/i.test(d.trim()) && (d = !1),\n          b(d),\n          e.parentNode.removeChild(e);\n      }, 0);\n  }),\n  (wysihtml.dom.getStyle = (function () {\n    function a(a) {\n      return a.replace(c, function (a) {\n        return a.charAt(1).toUpperCase();\n      });\n    }\n    var b = { float: \"styleFloat\" in document.createElement(\"div\").style ? \"styleFloat\" : \"cssFloat\" },\n      c = /\\-[a-z]/g;\n    return function (c) {\n      return {\n        from: function (d) {\n          if (d.nodeType === wysihtml.ELEMENT_NODE) {\n            var e = d.ownerDocument,\n              f = b[c] || a(c),\n              g = d.style,\n              h = d.currentStyle,\n              i = g[f];\n            if (i) return i;\n            if (h)\n              try {\n                return h[f];\n              } catch (j) {}\n            var k,\n              l,\n              m = e.defaultView || e.parentWindow,\n              n = (\"height\" === c || \"width\" === c) && \"TEXTAREA\" === d.nodeName;\n            return m.getComputedStyle\n              ? (n && ((k = g.overflow), (g.overflow = \"hidden\")),\n                (l = m.getComputedStyle(d, null).getPropertyValue(c)),\n                n && (g.overflow = k || \"\"),\n                l)\n              : void 0;\n          }\n        },\n      };\n    };\n  })()),\n  (wysihtml.dom.getTextNodes = function (a, b) {\n    var c = [];\n    for (a = a.firstChild; a; a = a.nextSibling)\n      3 == a.nodeType\n        ? (b && /^\\s*$/.test(a.innerText || a.textContent)) || c.push(a)\n        : (c = c.concat(wysihtml.dom.getTextNodes(a, b)));\n    return c;\n  }),\n  (function (a) {\n    function b(a) {\n      return a._wysihtml_identifier || (a._wysihtml_identifier = d++);\n    }\n    var c = {},\n      d = 1;\n    a.dom.hasElementWithClassName = function (d, e) {\n      if (!a.browser.supportsNativeGetElementsByClassName()) return !!d.querySelector(\".\" + e);\n      var f = b(d) + \":\" + e,\n        g = c[f];\n      return g || (g = c[f] = d.getElementsByClassName(e)), g.length > 0;\n    };\n  })(wysihtml),\n  (wysihtml.dom.hasElementWithTagName = (function () {\n    function a(a) {\n      return a._wysihtml_identifier || (a._wysihtml_identifier = c++);\n    }\n    var b = {},\n      c = 1;\n    return function (c, d) {\n      var e = a(c) + \":\" + d,\n        f = b[e];\n      return f || (f = b[e] = c.getElementsByTagName(d)), f.length > 0;\n    };\n  })()),\n  (wysihtml.dom.insert = function (a) {\n    return {\n      after: function (b) {\n        b.parentNode.insertBefore(a, b.nextSibling);\n      },\n      before: function (b) {\n        b.parentNode.insertBefore(a, b);\n      },\n      into: function (b) {\n        b.appendChild(a);\n      },\n    };\n  }),\n  (wysihtml.dom.insertCSS = function (a) {\n    return (\n      (a = a.join(\"\\n\")),\n      {\n        into: function (b) {\n          var c = b.createElement(\"style\");\n          (c.type = \"text/css\"), c.styleSheet ? (c.styleSheet.cssText = a) : c.appendChild(b.createTextNode(a));\n          var d = b.querySelector(\"head link\");\n          if (d) return void d.parentNode.insertBefore(c, d);\n          var e = b.querySelector(\"head\");\n          e && e.appendChild(c);\n        },\n      }\n    );\n  }),\n  (wysihtml.dom.isLoadedImage = function (a) {\n    try {\n      return a.complete && !a.mozMatchesSelector(\":-moz-broken\");\n    } catch (b) {\n      if (a.complete && \"complete\" === a.readyState) return !0;\n    }\n  }),\n  (function (a) {\n    a.dom.lineBreaks = function (b) {\n      function c(a) {\n        return \"BR\" === a.nodeName;\n      }\n      function d(b) {\n        return c(b) ? !0 : \"block\" === a.dom.getStyle(\"display\").from(b) ? !0 : !1;\n      }\n      return {\n        add: function (c) {\n          var e = b.ownerDocument,\n            f = a.dom.domNode(b).next({ ignoreBlankTexts: !0 }),\n            g = a.dom.domNode(b).prev({ ignoreBlankTexts: !0 });\n          f && !d(f) && a.dom.insert(e.createElement(\"br\")).after(b),\n            g && !d(g) && a.dom.insert(e.createElement(\"br\")).before(b);\n        },\n        remove: function (d) {\n          var e = a.dom.domNode(b).next({ ignoreBlankTexts: !0 }),\n            f = a.dom.domNode(b).prev({ ignoreBlankTexts: !0 });\n          e && c(e) && e.parentNode.removeChild(e), f && c(f) && f.parentNode.removeChild(f);\n        },\n      };\n    };\n  })(wysihtml),\n  (wysihtml.dom.observe = function (a, b, c) {\n    b = \"string\" == typeof b ? [b] : b;\n    for (var d, e, f = 0, g = b.length; g > f; f++)\n      (e = b[f]),\n        a.addEventListe");
        builder.append("ner\n          ? a.addEventListener(e, c, !1)\n          : ((d = function (b) {\n              \"target\" in b || (b.target = b.srcElement),\n                (b.preventDefault =\n                  b.preventDefault ||\n                  function () {\n                    this.returnValue = !1;\n                  }),\n                (b.stopPropagation =\n                  b.stopPropagation ||\n                  function () {\n                    this.cancelBubble = !0;\n                  }),\n                c.call(a, b);\n            }),\n            a.attachEvent(\"on\" + e, d));\n    return {\n      stop: function () {\n        for (var e, f = 0, g = b.length; g > f; f++)\n          (e = b[f]), a.removeEventListener ? a.removeEventListener(e, c, !1) : a.detachEvent(\"on\" + e, d);\n      },\n    };\n  }),\n  (wysihtml.dom.parse = function (a, b) {\n    function c(a, b) {\n      wysihtml.lang.object(t).merge(s).merge(b.rules).get();\n      var c,\n        f,\n        g,\n        h = b.context || a.ownerDocument || document,\n        i = h.createDocumentFragment(),\n        j = \"string\" == typeof a,\n        k = !1;\n      for (\n        b.clearInternals === !0 && (k = !0), c = j ? wysihtml.dom.getAsDom(a, h) : a, t.selectors && e(c, t.selectors);\n        c.firstChild;\n\n      )\n        (g = c.firstChild),\n          (f = d(g, b.cleanUp, k, b.uneditableClass)),\n          f && i.appendChild(f),\n          g !== f && c.removeChild(g);\n      if (b.unjoinNbsps)\n        for (var l = wysihtml.dom.getTextNodes(i), m = l.length; m--; )\n          l[m].nodeValue = l[m].nodeValue.replace(/([\\S\\u00A0])\\u00A0/gi, \"$1 \");\n      return (c.innerHTML = \"\"), c.appendChild(i), j ? wysihtml.quirks.getCorrectInnerHTML(c) : c;\n    }\n    function d(a, b, c, e) {\n      var f,\n        g,\n        h,\n        i,\n        j = a.nodeType,\n        k = a.childNodes,\n        l = k.length,\n        m = p[j],\n        n = 0;\n      if (e && 1 === j && wysihtml.dom.hasClass(a, e)) return a;\n      if (((g = m && m(a, c)), !g)) {\n        if (g === !1) {\n          for (f = a.ownerDocument.createDocumentFragment(), n = l; n--; )\n            k[n] && ((h = d(k[n], b, c, e)), h && (k[n] === h && n--, f.insertBefore(h, f.firstChild)));\n          return (\n            (i = wysihtml.dom.getStyle(\"display\").from(a)),\n            \"\" === i && (i = wysihtml.lang.array(u).contains(a.tagName) ? \"block\" : \"\"),\n            wysihtml.lang.array([\"block\", \"flex\", \"table\"]).contains(i) &&\n              f.appendChild(a.ownerDocument.createElement(\"br\")),\n            wysihtml.lang\n              .array([\n                \"div\",\n                \"pre\",\n                \"p\",\n                \"table\",\n                \"td\",\n                \"th\",\n                \"ul\",\n                \"ol\",\n                \"li\",\n                \"dd\",\n                \"dl\",\n                \"footer\",\n                \"header\",\n                \"section\",\n                \"h1\",\n                \"h2\",\n                \"h3\",\n                \"h4\",\n                \"h5\",\n                \"h6\",\n              ])\n              .contains(a.nodeName.toLowerCase()) &&\n              a.parentNode.lastChild !== a &&\n              ((a.nextSibling && 3 === a.nextSibling.nodeType && /^\\s/.test(a.nextSibling.nodeValue)) ||\n                f.appendChild(a.ownerDocument.createTextNode(\" \"))),\n            f.normalize && f.normalize(),\n            f\n          );\n        }\n        return null;\n      }\n      for (n = 0; l > n; n++) k[n] && ((h = d(k[n], b, c, e)), h && (k[n] === h && n--, g.appendChild(h)));\n      if (\n        b &&\n        g.nodeName.toLowerCase() === q &&\n        (!g.childNodes.length ||\n          (/^\\s*$/gi.test(g.innerHTML) &&\n            (c || (\"_wysihtml-temp-placeholder\" !== a.className && \"rangySelectionBoundary\" !== a.className))) ||\n          !g.attributes.length)\n      ) {\n        for (f = g.ownerDocument.createDocumentFragment(); g.firstChild; ) f.appendChild(g.firstChild);\n        return f.normalize && f.normalize(), f;\n      }\n      return g.normalize && g.normalize(), g;\n    }\n    function e(a, b) {\n      var c, d, e;\n      for (c in b)\n        if (b.hasOwnProperty(c)) {\n          wysihtml.lang.object(b[c]).isFunction() ? (d = b[c]) : \"string\" == typeof b[c] && z[b[c]] && (d = z[b[c]]),\n            (e = a.querySelectorAll(c));\n          for (var f = e.length; f--; ) d(e[f]);\n        }\n    }\n    function f(a, b) {\n      var c,\n        d,\n        e,\n        f = t.tags,\n        h = a.nodeName.toLowerCase(),\n        j = a.scopeName;\n      if (a._wysihtml) return null;\n      if (((a._wysihtml = 1), \"wysihtml-temp\" === a.className)) return null;\n      if (\n        (j && \"HTML\" != j && (h = j + \":\" + h),\n        \"outerHTML\" in a &&\n          (wysihtml.browser.autoClosesUnclosedTags() ||\n            \"P\" !== a.nodeName ||\n            \"</p>\" === a.outerHTML.slice(-4).toLowerCase() ||\n            (h = \"div\")),\n        h in f)\n      ) {\n        if (((c = f[h]), !c || c.remove)) return null;\n        if (c.unwrap) return !1;\n        c = \"string\" == typeof c ? { rename_tag: c } : c;\n      } else {\n        if (!a.firstChild) return null;\n        c = { rename_tag: q };\n      }\n      if (c.one_of_type && !g(a, t, c.one_of_type, b)) {\n        if (!c.remove_action) return null;\n        if (\"unwrap\" === c.remove_action) return !1;\n        if (\"rename\" !== c.remove_action) return null;\n        e = c.remove_action_rename_to || q;\n      }\n      return (\n        (d = a.ownerDocument.createElement(e || c.rename_tag || h)),\n        m(a, d, c, b),\n        i(a, d, c),\n        (a = null),\n        d.normalize && d.normalize(),\n        d\n      );\n    }\n    function g(a, b, c, d) {\n      var e, f;\n      if (\n        \"SPAN\" === a.nodeName &&\n        !d &&\n        (\"_wysihtml-temp-placeholder\" === a.className || \"rangySelectionBoundary\" === a.className)\n      )\n        return !0;\n      for (f in c)\n        if (\n          c.hasOwnProperty(f) &&\n          b.type_definitions &&\n          b.type_definitions[f] &&\n          ((e = b.type_definitions[f]), h(a, e))\n        )\n          return !0;\n      return !1;\n    }\n    function h(a, b) {\n      var c,\n        d,\n        e,\n        f,\n        g,\n        h = a.getAttribute(\"class\"),\n        i = a.getAttribute(\"style\");\n      if (b.methods) for (var j in b.methods) if (b.methods.hasOwnProperty(j) && y[j] && y[j](a)) return !0;\n      if (h && b.classes) {\n        (h = h.replace(/^\\s+/g, \"\").replace(/\\s+$/g, \"\").split(r)), (c = h.length);\n        for (var k = 0; c > k; k++) if (b.classes[h[k]]) return !0;\n      }\n      if (i && b.styles) {\n        i = i.split(\";\");\n        for (d in b.styles)\n          if (b.styles.hasOwnProperty(d))\n            for (var l = i.length; l--; )\n              if (\n                ((g = i[l].split(\":\")),\n                g[0].replace(/\\s/g, \"\").toLowerCase() === d &&\n                  (b.styles[d] === !0 ||\n                    1 === b.styles[d] ||\n                    wysihtml.lang.array(b.styles[d]).contains(g[1].replace(/\\s/g, \"\").toLowerCase())))\n              )\n                return !0;\n      }\n      if (b.attrs)\n        for (e in b.attrs)\n          if (\n            b.attrs.hasOwnProperty(e) &&\n            ((f = wysihtml.dom.getAttribute(a, e)), \"string\" == typeof f && f.search(b.attrs[e]) > -1)\n          )\n            return !0;\n      return !1;\n    }\n    function i(a, b, c) {\n      var d, e;\n      if (c && c.keep_styles)\n        for (d in c.keep_styles)\n          if (c.keep_styles.hasOwnProperty(d)) {\n            if (\n              ((e = \"float\" === d ? a.style.styleFloat || a.style.cssFloat : a.style[d]),\n              c.keep_styles[d] instanceof RegExp && !c.keep_styles[d].test(e))\n            )\n              continue;\n            \"float\" === d\n              ? (b.style[a.style.styleFloat ? \"styleFloat\" : \"cssFloat\"] = e)\n              : a.style[d] && (b.style[d] = e);\n          }\n    }\n    function j(a, b) {\n      var c = [];\n      for (var d in b) b.hasOwnProperty(d) && 0 === d.indexOf(a) && c.push(d);\n      return c;\n    }\n    function k(a, b, c, d) {\n      var e,\n        f = wysihtml.lang.object(c).isFunction() ? c : v[c];\n      return f && ((e = f(b, d)), \"string\" == typeof e) ? e : !1;\n    }\n    function l(a, b) {\n      var c,\n        d,\n        e,\n        f = wysihtml.lang.object(t.attributes || {}).clone(),\n        g = wysihtml.lang\n          .object(f)\n          .merge(wysihtml.lang.object(b || {}).clone())\n          .get(),\n        h = {},\n        i = wysihtml.dom.getAttributes(a);\n      for (c in g)\n        if (/\\*$/.test(c)) {\n          e = j(c.slice(0, -1), i);\n          for (var l = 0, m = e.length; m > l; l++) (d = k(e[l], i[e[l]], g[c], a.nodeName)), d !== !1 && (h[e[l]] = d);\n        } else (d = k(c, i[c], g[c], a.nodeName)), d !== !1 && (h[c] = d);\n      return h;\n    }\n    function m(a, b, c, d) {\n      var e,\n        f,\n        g,\n        h,\n        i,\n        j = {},\n        k = c.set_class,\n        m = c.add_class,\n        n = c.add_style,\n        o = c.set_attributes,\n        p = t.classes,\n        q = 0,\n        s = [],\n        u = [],\n        v = [],\n        y = [];\n      if (\n        (o && (j = wysihtml.lang.object(o).clone()),\n        (j = wysihtml.lang.object(j).merge(l(a, c.check_attributes)).get()),\n        k && s.push(k),\n        m)\n      )\n        for (h in m) (i = x[m[h]]), i && ((g = i(wysihtml.dom.getAttribute(a, h))), \"string\" == typeof g && s.push(g));\n      if (n)\n        for (h in n)\n          (i = w[n[h]]),\n            i && ((newStyle = i(wysihtml.dom.getAttribute(a, h))), \"string\" == typeof newStyle && u.push(newStyle));\n      if (\"string\" == typeof p && \"any\" === p)\n        if (a.getAttribute(\"class\"))\n          if (t.classes_blacklist) {\n            for (y = a.getAttribute(\"class\"), y && (s = s.concat(y.split(r))), e = s.length; e > q; q++)\n              (f = s[q]), t.classes_blacklist[f] || v.push(f);\n            v.length && (j[\"class\"] = wysihtml.lang.array(v).unique().join(\" \"));\n          } else j[\"class\"] = a.getAttribute(\"class\");\n        else s && s.length > 0 && (j[\"class\"] = wysihtml.lang.array(s).unique().join(\" \"));\n      else {\n        for (\n          d ||\n            ((p[\"_wysihtml-temp-placeholder\"] = 1),\n            (p._rangySelectionBoundary = 1),\n            (p[\"wysiwyg-tmp-selected-cell\"] = 1)),\n            y = a.getAttribute(\"class\"),\n            y && (s = s.concat(y.split(r))),\n            e = s.length;\n          e > q;\n          q++\n        )\n          (f = s[q]), p[f] && v.push(f);\n        v.length && (j[\"class\"] = wysihtml.lang.array(v).unique().join(\" \"));\n      }\n      j[\"class\"] &&\n        d &&\n        ((j[\"class\"] = j[\"class\"].replace(\"wysiwyg-tmp-selected-cell\", \"\")),\n        /^\\s*$/g.test(j[\"class\"]) && delete j[\"class\"]),\n        u.length && (j.style = wysihtml.lang.array(u).unique().join(\" \"));\n      for (h in j)\n        try {\n          b.setAttribute(h, j[h]);\n        } catch (z) {}\n      j.src &&\n        (\"undefined\" != typeof j.width && b.setAttribute(\"width\", j.width),\n        \"undefined\" != typeof j.height && b.setAttribute(\"height\", j.height));\n    }\n    function n(a) {\n      var b = a.nextSibling;\n      if (!b || b.nodeType !== wysihtml.TEXT_NODE) {\n        var c = a.data.replace(wysihtml.INVISIBLE_SPACE_REG_EXP, \"\");\n        return a.ownerDocument.createTextNode(c);\n      }\n      b.data =\n        a.data.replace(wysihtml.INVISIBLE_SPACE_REG_EXP, \"\") + b.data.replace(wysihtml.INVISIBLE_SPACE_REG_EXP, \"\");\n    }\n    function o(a) {\n      return t.comments ? a.ownerDocument.createComment(a.nodeValue) : void 0;\n    }\n    var p = { 1: f, 3: n, 8: o },\n      q = \"span\",\n      r = /\\s+/,\n      s = { tags: {}, classes: {} },\n      t = {},\n      u = [\n        \"ADDRESS\",\n        \"BLOCKQUOTE\",\n        \"CENTER\",\n        \"DIR\",\n        \"DIV\",\n        \"DL\",\n        \"FIELDSET\",\n        \"FORM\",\n        \"H1\",\n        \"H2\",\n        \"H3\",\n        \"H4\",\n        \"H5\",\n        \"H6\",\n        \"ISINDEX\",\n        \"MENU\",\n        \"NOFRAMES\",\n        \"NOSCRIPT\",\n        \"OL\",\n        \"P\",\n        \"PRE\",\n        \"TABLE\",\n        \"UL\",\n      ],\n      v = {\n        url: (function () {\n          var a = /^https?:\\/\\//i;\n          return function (b) {\n            return b && b.match(a)\n              ? b.replace(a, function (a) {\n                  return a.toLowerCase();\n                })\n              : null;\n          };\n        })(),\n        src: (function () {\n          var a = /^(\\/|https?:\\/\\/)/i;\n          return function (b) {\n            return b && b.match(a)\n              ? b.replace(a, function (a) {\n                  return a.toLowerCase();\n                })\n              : null;\n          };\n        })(),\n        href: (function () {\n          var a = /^(#|\\/|https?:\\/\\/|mailto:|tel:)/i;\n          return function (b) {\n            return b && b.match(a)\n              ? b.replace(a, function (a) {\n                  return a.toLowerCase();\n                })\n              : null;\n          };\n        })(),\n        alt: (function () {\n          var a = /[^ a-z0-9_\\-]/gi;\n          return function (b, c) {\n            return b ? b.replace(a, \"\") : \"IMG\" === c ? \"\" : null;\n          };\n        })(),\n        numbers: (function () {\n          var a = /\\D/g;\n          return function (b) {\n            return (b = (b || \"\").replace(a, \"\")), b || null;\n          };\n        })(),\n        dimension: (function () {\n          var a = /\\D*(\\d+)(\\.\\d+)?\\s?(%)?\\D*/;\n          return function (b) {\n            return (b = (b || \"\").replace(a, \"$1$2$3\")), b || null;\n          };\n        })(),\n        any: (function () {\n          return function (a) {\n            return a ? a : null;\n          };\n        })(),\n      },\n      w = {\n        align_text: (function () {\n          var a = { left: \"text-align: left;\", right: \"text-align: right;\", center: \"text-align: center;\" };\n          return function (b) {\n            return a[String(b).toLowerCase()];\n          };\n        })(),\n      },\n      x = {\n        align_img: (function () {\n          var a = { left: \"wysiwyg-float-left\", right: \"wysiwyg-float-right\" };\n          return function (b) {\n            return a[String(b).toLowerCase()];\n          };\n        })(),\n        align_text: (function () {\n          var a = {\n            left: \"wysiwyg-text-align-left\",\n            right: \"wysiwyg-text-align-right\",\n            center: \"wysiwyg-text-align-center\",\n            justify: \"wysiwyg-text-align-justify\",\n          };\n          return function (b) {\n            return a[String(b).toLowerCase()];\n          };\n        })(),\n        clear_br: (function () {\n          var a = {\n            left: \"wysiwyg-clear-left\",\n            right: \"wysiwyg-clear-right\",\n            both: \"wysiwyg-clear-both\",\n            all: \"wysiwyg-clear-both\",\n          };\n          return function (b) {\n            return a[String(b).toLowerCase()];\n          };\n        })(),\n        size_font: (function () {\n          var a = {\n            1: \"wysiwyg-font-size-xx-small\",\n            2: \"wysiwyg-font-size-small\",\n            3: \"wysiwyg-font-size-medium\",\n            4: \"wysiwyg-font-size-large\",\n            5: \"wysiwyg-font-size-x-large\",\n            6: \"wysiwyg-font-size-xx-large\",\n            7: \"wysiwyg-font-size-xx-large\",\n            \"-\": \"wysiwyg-font-size-smaller\",\n            \"+\": \"wysiwyg-font-size-larger\",\n          };\n          return function (b) {\n            return a[String(b).charAt(0)];\n          };\n        })(),\n      },\n      y = {\n        has_visible_contet: (function () {\n          var a,\n            b = [\n              \"img\",\n              \"video\",\n              \"picture\",\n              \"br\",\n              \"script\",\n              \"noscript\",\n              \"style\",\n              \"table\",\n              \"iframe\",\n              \"object\",\n              \"embed\",\n              \"audio\",\n              \"svg\",\n              \"input\",\n              \"button\",\n              \"select\",\n              \"textarea\",\n              \"canvas\",\n            ];\n          return function (c) {\n            if (((a = (c.innerText || c.textContent).replace(/\\s/g, \"\")), a && a.length > 0)) return !0;\n            for (var d = b.length; d--; ) if (c.querySelector(b[d])) return !0;\n            return c.offsetWidth && c.offsetWidth > 0 && c.offsetHeight && c.offsetHeight > 0 ? !0 : !1;\n          };\n        })(),\n      },\n      z = {\n        unwrap: function (a) {\n          wysihtml.dom.unwrap(a);\n        },\n      ");
        builder.append("  remove: function (a) {\n          a.parentNode.removeChild(a);\n        },\n      };\n    return c(a, b);\n  }),\n  (wysihtml.dom.query = function (a, b) {\n    var c,\n      d = [];\n    a.nodeType && (a = [a]);\n    for (var e = 0, f = a.length; f > e; e++)\n      if ((c = a[e].querySelectorAll(b))) for (var g = c.length; g--; d.unshift(c[g]));\n    return d;\n  }),\n  (wysihtml.dom.removeEmptyTextNodes = function (a) {\n    for (var b, c = wysihtml.lang.array(a.childNodes).get(), d = c.length, e = 0; d > e; e++)\n      (b = c[e]), b.nodeType === wysihtml.TEXT_NODE && /^[\\n\\r]*$/.test(b.data) && b.parentNode.removeChild(b);\n  }),\n  (wysihtml.dom.removeInvisibleSpaces = function (a) {\n    for (var b = wysihtml.dom.getTextNodes(a), c = b.length; c--; )\n      b[c].nodeValue = b[c].nodeValue.replace(wysihtml.INVISIBLE_SPACE_REG_EXP, \"\");\n  }),\n  (wysihtml.dom.renameElement = function (a, b) {\n    for (var c, d = a.ownerDocument.createElement(b); (c = a.firstChild); ) d.appendChild(c);\n    return (\n      wysihtml.dom.copyAttributes([\"align\", \"className\"]).from(a).to(d),\n      a.parentNode && a.parentNode.replaceChild(d, a),\n      d\n    );\n  }),\n  (wysihtml.dom.replaceWithChildNodes = function (a) {\n    if (a.parentNode) {\n      for (; a.firstChild; ) a.parentNode.insertBefore(a.firstChild, a);\n      a.parentNode.removeChild(a);\n    }\n  }),\n  (function (a) {\n    function b(b) {\n      return \"block\" === a.getStyle(\"display\").from(b);\n    }\n    function c(a) {\n      return \"BR\" === a.nodeName;\n    }\n    function d(a) {\n      var b = a.ownerDocument.createElement(\"br\");\n      a.appendChild(b);\n    }\n    function e(a, e) {\n      if (a.nodeName.match(/^(MENU|UL|OL)$/)) {\n        var f,\n          g,\n          h,\n          i,\n          j,\n          k,\n          l,\n          m = a.ownerDocument,\n          n = m.createDocumentFragment(),\n          o = wysihtml.dom.domNode(a).prev({ ignoreBlankTexts: !0 }),\n          p = wysihtml.dom.domNode(a).next({ ignoreBlankTexts: !0 }),\n          q = a.lastElementChild || a.lastChild;\n        if (e)\n          for (!o || b(o) || c(o) || d(n); (k = a.firstElementChild || a.firstChild); ) {\n            for (g = k.lastChild, l = k === q; (f = k.firstChild); )\n              (h = f === g), (i = (!l || (p && !b(p))) && h && !b(f) && !c(f)), n.appendChild(f), i && d(n);\n            k.parentNode.removeChild(k);\n          }\n        else\n          for (; (k = a.firstElementChild || a.firstChild); ) {\n            if (k.querySelector && k.querySelector(\"div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6\"))\n              for (; (f = k.firstChild); ) n.appendChild(f);\n            else {\n              for (j = m.createElement(\"p\"); (f = k.firstChild); ) j.appendChild(f);\n              n.appendChild(j);\n            }\n            k.parentNode.removeChild(k);\n          }\n        a.parentNode.replaceChild(n, a);\n      }\n    }\n    a.resolveList = e;\n  })(wysihtml.dom),\n  (function (a) {\n    var b = document,\n      c = [\n        \"parent\",\n        \"top\",\n        \"opener\",\n        \"frameElement\",\n        \"frames\",\n        \"localStorage\",\n        \"globalStorage\",\n        \"sessionStorage\",\n        \"indexedDB\",\n      ],\n      d = [\n        \"open\",\n        \"close\",\n        \"openDialog\",\n        \"showModalDialog\",\n        \"alert\",\n        \"confirm\",\n        \"prompt\",\n        \"openDatabase\",\n        \"postMessage\",\n        \"XMLHttpRequest\",\n        \"XDomainRequest\",\n      ],\n      e = [\"referrer\", \"write\", \"open\", \"close\"];\n    a.dom.Sandbox = Base.extend({\n      constructor: function (b, c) {\n        (this.callback = b || a.EMPTY_FUNCTION),\n          (this.config = a.lang.object({}).merge(c).get()),\n          this.config.className || (this.config.className = \"wysihtml-sandbox\"),\n          (this.editableArea = this._createIframe());\n      },\n      insertInto: function (a) {\n        \"string\" == typeof a && (a = b.getElementById(a)), a.appendChild(this.editableArea);\n      },\n      getIframe: function () {\n        return this.editableArea;\n      },\n      getWindow: function () {\n        this._readyError();\n      },\n      getDocument: function () {\n        this._readyError();\n      },\n      destroy: function () {\n        var a = this.getIframe();\n        a.parentNode.removeChild(a);\n      },\n      _readyError: function () {\n        throw new Error(\"wysihtml.Sandbox: Sandbox iframe isn't loaded yet\");\n      },\n      _createIframe: function () {\n        var c = this,\n          d = b.createElement(\"iframe\");\n        return (\n          (d.className = this.config.className),\n          a.dom\n            .setAttributes({\n              security: \"restricted\",\n              allowtransparency: \"true\",\n              frameborder: 0,\n              width: 0,\n              height: 0,\n              marginwidth: 0,\n              marginheight: 0,\n            })\n            .on(d),\n          a.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty() && (d.src = \"javascript:'<html></html>'\"),\n          (d.onload = function () {\n            (d.onreadystatechange = d.onload = null), c._onLoadIframe(d);\n          }),\n          (d.onreadystatechange = function () {\n            /loaded|complete/.test(d.readyState) && ((d.onreadystatechange = d.onload = null), c._onLoadIframe(d));\n          }),\n          d\n        );\n      },\n      _onLoadIframe: function (f) {\n        if (a.dom.contains(b.documentElement, f)) {\n          var g = this,\n            h = f.contentWindow,\n            i = f.contentWindow.document,\n            j = b.characterSet || b.charset || \"utf-8\",\n            k = this._getHtml({ charset: j, stylesheets: this.config.stylesheets });\n          if (\n            (i.open(\"text/html\", \"replace\"),\n            i.write(k),\n            i.close(),\n            (this.getWindow = function () {\n              return f.contentWindow;\n            }),\n            (this.getDocument = function () {\n              return f.contentWindow.document;\n            }),\n            (h.onerror = function (a, b, c) {\n              throw new Error(\"wysihtml.Sandbox: \" + a, b, c);\n            }),\n            !a.browser.supportsSandboxedIframes())\n          ) {\n            var l, m;\n            for (l = 0, m = c.length; m > l; l++) this._unset(h, c[l]);\n            for (l = 0, m = d.length; m > l; l++) this._unset(h, d[l], a.EMPTY_FUNCTION);\n            for (l = 0, m = e.length; m > l; l++) this._unset(i, e[l]);\n            this._unset(i, \"cookie\", \"\", !0);\n          }\n          a.polyfills && a.polyfills(h, i).apply(),\n            (this.loaded = !0),\n            setTimeout(function () {\n              g.callback(g);\n            }, 0);\n        }\n      },\n      _getHtml: function (b) {\n        var c,\n          d = b.stylesheets,\n          e = \"\",\n          f = 0;\n        if ((d = \"string\" == typeof d ? [d] : d))\n          for (c = d.length; c > f; f++) e += '<link rel=\"stylesheet\" href=\"' + d[f] + '\">';\n        return (\n          (b.stylesheets = e),\n          a.lang\n            .string('<!DOCTYPE html><html><head><meta charset=\"#{charset}\">#{stylesheets}</head><body></body></html>')\n            .interpolate(b)\n        );\n      },\n      _unset: function (b, c, d, e) {\n        try {\n          b[c] = d;\n        } catch (f) {}\n        try {\n          b.__defineGetter__(c, function () {\n            return d;\n          });\n        } catch (f) {}\n        if (e)\n          try {\n            b.__defineSetter__(c, function () {});\n          } catch (f) {}\n        if (!a.browser.crashesWhenDefineProperty(c))\n          try {\n            var g = {\n              get: function () {\n                return d;\n              },\n            };\n            e && (g.set = function () {}), Object.defineProperty(b, c, g);\n          } catch (f) {}\n      },\n    });\n  })(wysihtml),\n  (function () {\n    var a = { className: \"class\" };\n    wysihtml.dom.setAttributes = function (b) {\n      return {\n        on: function (c) {\n          for (var d in b) c.setAttribute(a[d] || d, b[d]);\n        },\n      };\n    };\n  })(),\n  (wysihtml.dom.setStyles = function (a) {\n    return {\n      on: function (b) {\n        var c = b.style;\n        if (\"string\" == typeof a) return void (c.cssText += \";\" + a);\n        for (var d in a) \"float\" === d ? ((c.cssFloat = a[d]), (c.styleFloat = a[d])) : (c[d] = a[d]);\n      },\n    };\n  }),\n  (function (a) {\n    a.simulatePlaceholder = function (b, c, d, e) {\n      var f = e || \"wysihtml-placeholder\",\n        g = function () {\n          var b = c.element.offsetWidth > 0 && c.element.offsetHeight > 0;\n          c.hasPlaceholderSet() &&\n            (c.clear(),\n            c.element.focus(),\n            b &&\n              setTimeout(function () {\n                var a = c.selection.getSelection();\n                (a.focusNode && a.anchorNode) || c.selection.selectNode(c.element.firstChild || c.element);\n              }, 0)),\n            (c.placeholderSet = !1),\n            a.removeClass(c.element, f);\n        },\n        h = function () {\n          c.isEmpty() && !c.placeholderSet && ((c.placeholderSet = !0), c.setValue(d, !1), a.addClass(c.element, f));\n        };\n      b\n        .on(\"set_placeholder\", h)\n        .on(\"unset_placeholder\", g)\n        .on(\"focus:composer\", g)\n        .on(\"paste:composer\", g)\n        .on(\"blur:composer\", h),\n        h();\n    };\n  })(wysihtml.dom),\n  (function (a) {\n    var b = document.documentElement;\n    \"textContent\" in b\n      ? ((a.setTextContent = function (a, b) {\n          a.textContent = b;\n        }),\n        (a.getTextContent = function (a) {\n          return a.textContent;\n        }))\n      : \"innerText\" in b\n      ? ((a.setTextContent = function (a, b) {\n          a.innerText = b;\n        }),\n        (a.getTextContent = function (a) {\n          return a.innerText;\n        }))\n      : ((a.setTextContent = function (a, b) {\n          a.nodeValue = b;\n        }),\n        (a.getTextContent = function (a) {\n          return a.nodeValue;\n        }));\n  })(wysihtml.dom),\n  (wysihtml.dom.unwrap = function (a) {\n    var b = [];\n    if (a.parentNode) {\n      for (; a.lastChild; ) b.unshift(a.lastChild), wysihtml.dom.insert(a.lastChild).after(a);\n      a.parentNode.removeChild(a);\n    }\n    return b;\n  }),\n  (wysihtml.quirks.cleanPastedHTML = (function () {\n    var a = function (a) {\n        var b = wysihtml.lang.string(a).trim(),\n          c = b.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n        return new RegExp(\"^((?!^\" + c + \"$).)*$\", \"i\");\n      },\n      b = function (b, c) {\n        var d,\n          e,\n          f = wysihtml.lang.object(b).clone(!0);\n        for (d in f.tags)\n          if (f.tags.hasOwnProperty(d) && f.tags[d].keep_styles)\n            for (e in f.tags[d].keep_styles)\n              f.tags[d].keep_styles.hasOwnProperty(e) && c[e] && (f.tags[d].keep_styles[e] = a(c[e]));\n        return f;\n      },\n      c = function (a, b) {\n        var c;\n        if (!a) return null;\n        for (var d = 0, e = a.length; e > d; d++)\n          if ((a[d].condition || (c = a[d].set), a[d].condition && a[d].condition.test(b))) return a[d].set;\n        return c;\n      };\n    return function (a, d) {\n      var e,\n        f = {\n          color: wysihtml.dom.getStyle(\"color\").from(d.referenceNode),\n          fontSize: wysihtml.dom.getStyle(\"font-size\").from(d.referenceNode),\n        },\n        g = b(c(d.rules, a) || {}, f);\n      return (e = wysihtml.dom.parse(a, {\n        rules: g,\n        cleanUp: !0,\n        context: d.referenceNode.ownerDocument,\n        uneditableClass: d.uneditableClass,\n        clearInternals: !0,\n        unjoinNbsps: !0,\n      }));\n    };\n  })()),\n  (wysihtml.quirks.ensureProperClearing = (function () {\n    var a = function () {\n      var a = this;\n      setTimeout(function () {\n        var b = a.innerHTML.toLowerCase();\n        (\"<p>&nbsp;</p>\" == b || \"<p>&nbsp;</p><p>&nbsp;</p>\" == b) && (a.innerHTML = \"\");\n      }, 0);\n    };\n    return function (b) {\n      wysihtml.dom.observe(b.element, [\"cut\", \"keydown\"], a);\n    };\n  })()),\n  (function (a) {\n    var b = \"%7E\";\n    a.quirks.getCorrectInnerHTML = function (c) {\n      var d = c.innerHTML;\n      if (-1 === d.indexOf(b)) return d;\n      var e,\n        f,\n        g,\n        h,\n        i = c.querySelectorAll(\"[href*='~'], [src*='~']\");\n      for (h = 0, g = i.length; g > h; h++)\n        (e = i[h].href || i[h].src), (f = a.lang.string(e).replace(\"~\").by(b)), (d = a.lang.string(d).replace(f).by(e));\n      return d;\n    };\n  })(wysihtml),\n  (function (a) {\n    var b = \"wysihtml-quirks-redraw\";\n    a.quirks.redraw = function (c) {\n      a.dom.addClass(c, b), a.dom.removeClass(c, b);\n      try {\n        var d = c.ownerDocument;\n        d.execCommand(\"italic\", !1, null), d.execCommand(\"italic\", !1, null);\n      } catch (e) {}\n    };\n  })(wysihtml),\n  (function (a) {\n    function b(a) {\n      var b, c;\n      for (b in d) if (d.hasOwnProperty(b) && ((c = d[b]), c.regex.test(a))) return c;\n    }\n    function c(a) {\n      var c = b(a);\n      return c ? c.name : void 0;\n    }\n    var d = {\n        rgba: { regex: /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*([\\d\\.]+)\\s*\\)/i, name: \"rgba\" },\n        rgb: { regex: /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)/i, name: \"rgb\" },\n        hex6: { regex: /^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i, name: \"hex\", radix: 16 },\n        hex3: { regex: /^#([0-9a-f])([0-9a-f])([0-9a-f])/i, name: \"hex\", radix: 16 },\n      },\n      e = function (a) {\n        return new RegExp(\"(^|\\\\s|;)\" + a + \"\\\\s*:\\\\s*[^;$]+\", \"gi\");\n      };\n    a.quirks.styleParser = {\n      getColorParseMethod: b,\n      getColorFormat: c,\n      parseColor: function (c, f) {\n        var g,\n          h,\n          i,\n          j,\n          k,\n          l = c;\n        if (f) {\n          if (((g = e(f)), !(h = c.match(g)))) return !1;\n          (h = h.pop().split(\":\")[1]), (l = a.lang.string(h).trim());\n        }\n        return (i = b(l)) && (j = l.match(i.regex))\n          ? ((k = i.radix || 10),\n            i === d.hex3\n              ? (j.shift(),\n                j.push(1),\n                a.lang.array(j).map(function (a, b) {\n                  return 3 > b ? parseInt(a, k) * k + parseInt(a, k) : parseFloat(a);\n                }))\n              : (j.shift(),\n                j[3] || j.push(1),\n                a.lang.array(j).map(function (a, b) {\n                  return 3 > b ? parseInt(a, k) : parseFloat(a);\n                })))\n          : !1;\n      },\n      unparseColor: function (a, b) {\n        var c = 16;\n        return \"hex\" === b\n          ? (a[0].toString(c) + a[1].toString(c) + a[2].toString(c)).toUpperCase()\n          : \"hash\" === b\n          ? \"#\" + (a[0].toString(c) + a[1].toString(c) + a[2].toString(c)).toUpperCase()\n          : \"rgb\" === b\n          ? \"rgb(\" + a[0] + \",\" + a[1] + \",\" + a[2] + \")\"\n          : \"rgba\" === b\n          ? \"rgba(\" + a[0] + \",\" + a[1] + \",\" + a[2] + \",\" + a[3] + \")\"\n          : \"csv\" === b\n          ? a[0] + \",\" + a[1] + \",\" + a[2] + \",\" + a[3]\n          : a[3] && 1 !== a[3]\n          ? \"rgba(\" + a[0] + \",\" + a[1] + \",\" + a[2] + \",\" + a[3] + \")\"\n          : \"rgb(\" + a[0] + \",\" + a[1] + \",\" + a[2] + \")\";\n      },\n      parseFontSize: function (b) {\n        var c = b.match(e(\"font-size\"));\n        return c ? a.lang.string(c[c.length - 1].split(\":\")[1]).trim() : !1;\n      },\n    };\n  })(wysihtml),\n  (function (a) {\n    function b(a) {\n      var b = 0;\n      if (a.parentNode)\n        do (b += a.offsetTop || 0), (a = a.offsetParent);\n        while (a);\n      return b;\n    }\n    function c(a, b) {\n      for (var c = 0; b !== a; ) if ((c++, (b = b.parentNode), !b)) throw new Error(\"not a descendant of ancestor!\");\n      return c;\n    }\n    function d(a, b) {\n      return 3 === a.nodeType ? a : a.childNodes[b] || a;\n    }\n    function e(b) {\n      var c = document.createElement(\"span\"),\n        d = function (a) {\n          b.removeEventListener(\"mouseup\", d),\n            b.removeEventListener(\"keydown\", d),\n            b.removeEventListener(\"touchstart\", d),\n            b.removeEventListener(\"focus\", d),\n            b.removeEventListener(\"blur\", d),\n            b.removeEventListener(\"paste\", e),\n            b.removeEventListener(\"drop\", e),\n            b.removeEventListener(\"beforepaste\", e),\n            c && c.parentNode && c.parentNode.removeChild(c);\n        },\n        e = function (a) {\n          c && c.parentNode && setTimeout(d, 0);\n        };\n      return");
        builder.append(" (\n        c.appendChild(b.ownerDocument.createTextNode(a.INVISIBLE_SPACE)),\n        (c.className = \"_wysihtml-temp-caret-fix\"),\n        (c.style.display = \"block\"),\n        (c.style.minWidth = \"1px\"),\n        (c.style.height = \"0px\"),\n        b.addEventListener(\"mouseup\", d),\n        b.addEventListener(\"keydown\", d),\n        b.addEventListener(\"touchstart\", d),\n        b.addEventListener(\"focus\", d),\n        b.addEventListener(\"blur\", d),\n        b.addEventListener(\"paste\", e),\n        b.addEventListener(\"drop\", e),\n        b.addEventListener(\"beforepaste\", e),\n        c\n      );\n    }\n    function f(a) {\n      if (!a.canSurroundContents())\n        for (\n          var b = a.commonAncestorContainer, d = c(b, a.startContainer), e = c(b, a.endContainer);\n          !a.canSurroundContents();\n\n        )\n          d > e\n            ? (a.setStartBefore(a.startContainer), (d = c(b, a.startContainer)))\n            : (a.setEndAfter(a.endContainer), (e = c(b, a.endContainer)));\n    }\n    var g = a.dom;\n    a.Selection = Base.extend({\n      constructor: function (a, b, c) {\n        rangy.init(),\n          (this.editor = a),\n          (this.composer = a.composer),\n          (this.doc = this.composer.doc),\n          (this.win = this.composer.win),\n          (this.contain = b),\n          (this.unselectableClass = c || !1);\n      },\n      getBookmark: function () {\n        var a = this.getRange();\n        return a && a.cloneRange();\n      },\n      setBookmark: function (a) {\n        a && this.setSelection(a);\n      },\n      setBefore: function (a) {\n        var b = rangy.createRange(this.doc);\n        return b.setStartBefore(a), b.setEndBefore(a), this.setSelection(b);\n      },\n      createTemporaryCaretSpaceAfter: function (b) {\n        var c = this.doc.createElement(\"span\"),\n          d = this.doc.createTextNode(a.INVISIBLE_SPACE),\n          e = function (b) {\n            var d;\n            this.contain.removeEventListener(\"mouseup\", e),\n              this.contain.removeEventListener(\"keydown\", g),\n              this.contain.removeEventListener(\"touchstart\", e),\n              this.contain.removeEventListener(\"focus\", e),\n              this.contain.removeEventListener(\"blur\", e),\n              this.contain.removeEventListener(\"paste\", f),\n              this.contain.removeEventListener(\"drop\", f),\n              this.contain.removeEventListener(\"beforepaste\", f),\n              c &&\n                c.parentNode &&\n                ((c.innerHTML = c.innerHTML.replace(a.INVISIBLE_SPACE_REG_EXP, \"\")),\n                /[^\\s]+/.test(c.innerHTML)\n                  ? ((d = c.lastChild), a.dom.unwrap(c), this.setAfter(d))\n                  : c.parentNode.removeChild(c));\n          }.bind(this),\n          f = function (a) {\n            c && c.parentNode && setTimeout(e, 0);\n          },\n          g = function (a) {\n            8 === a.which || 91 === a.which || 17 === a.which || (86 === a.which && (a.ctrlKey || a.metaKey)) || e();\n          };\n        return (\n          (c.className = \"_wysihtml-temp-caret-fix\"),\n          (c.style.position = \"absolute\"),\n          (c.style.display = \"block\"),\n          (c.style.minWidth = \"1px\"),\n          (c.style.zIndex = \"99999\"),\n          c.appendChild(d),\n          b.parentNode.insertBefore(c, b.nextSibling),\n          this.setBefore(d),\n          this.contain.addEventListener(\"mouseup\", e),\n          this.contain.addEventListener(\"keydown\", g),\n          this.contain.addEventListener(\"touchstart\", e),\n          this.contain.addEventListener(\"focus\", e),\n          this.contain.addEventListener(\"blur\", e),\n          this.contain.addEventListener(\"paste\", f),\n          this.contain.addEventListener(\"drop\", f),\n          this.contain.addEventListener(\"beforepaste\", f),\n          c\n        );\n      },\n      setAfter: function (b, c, d) {\n        var e,\n          f = this.win,\n          g = rangy.createRange(this.doc),\n          h = function () {\n            var d = b.parentNode,\n              g = d ? d.childNodes[d.childNodes.length - 1] : null;\n            if (!e || (g === b && 1 === b.nodeType && \"block\" === f.getComputedStyle(b).display))\n              if (c) {\n                var h = this.doc.createTextNode(a.INVISIBLE_SPACE);\n                b.parentNode.insertBefore(h, b.nextSibling),\n                  this.selectNode(h),\n                  setTimeout(function () {\n                    h && h.parentNode && h.parentNode.removeChild(h);\n                  }, 0);\n              } else this.createTemporaryCaretSpaceAfter(b);\n          }.bind(this);\n        if (\n          (g.setStartAfter(b),\n          g.setEndAfter(b),\n          document.activeElement && document.activeElement === this.composer.element)\n        )\n          (e = this.setSelection(g)), h(), d && d(e);\n        else {\n          var i = this.composer.getScrollPos();\n          this.composer.element.focus(),\n            this.composer.setScrollPos(i),\n            setTimeout(\n              function () {\n                (e = this.setSelection(g)), h(), d && d(e);\n              }.bind(this),\n              0\n            );\n        }\n      },\n      selectNode: function (b, c) {\n        var d = rangy.createRange(this.doc),\n          e = b.nodeType === a.ELEMENT_NODE,\n          f = \"canHaveHTML\" in b ? b.canHaveHTML : \"IMG\" !== b.nodeName,\n          h = e ? b.innerHTML : b.data,\n          i = \"\" === h || h === a.INVISIBLE_SPACE,\n          j = g.getStyle(\"display\").from(b),\n          k = \"block\" === j || \"list-item\" === j;\n        if (i && e && f && !c)\n          try {\n            b.innerHTML = a.INVISIBLE_SPACE;\n          } catch (l) {}\n        f ? d.selectNodeContents(b) : d.selectNode(b),\n          f && i && e ? d.collapse(k) : f && i && (d.setStartAfter(b), d.setEndAfter(b)),\n          this.setSelection(d);\n      },\n      getSelectedNode: function (a) {\n        var b, c;\n        return a &&\n          this.doc.selection &&\n          \"Control\" === this.doc.selection.type &&\n          ((c = this.doc.selection.createRange()), c && c.length)\n          ? c.item(0)\n          : ((b = this.getSelection(this.doc)),\n            b.focusNode === b.anchorNode\n              ? b.focusNode\n              : ((c = this.getRange(this.doc)), c ? c.commonAncestorContainer : this.doc.body));\n      },\n      fixSelBorders: function () {\n        var a = this.getRange();\n        f(a), this.setSelection(a);\n      },\n      getSelectedOwnNodes: function (a) {\n        for (var b = this.getOwnRanges(), c = [], d = 0, e = b.length; e > d; d++)\n          c.push(b[d].commonAncestorContainer || this.doc.body);\n        return c;\n      },\n      findNodesInSelection: function (b) {\n        for (var c, d = this.getOwnRanges(), e = [], f = 0, g = d.length; g > f; f++)\n          (c = d[f].getNodes([1], function (c) {\n            return a.lang.array(b).contains(c.nodeName);\n          })),\n            (e = e.concat(c));\n        return e;\n      },\n      filterElements: function (a) {\n        for (var b, c = this.getOwnRanges(), d = [], e = 0, f = c.length; f > e; e++)\n          (b = c[e].getNodes([1], function (b) {\n            return a(b, c[e]);\n          })),\n            (d = d.concat(b));\n        return d;\n      },\n      containsUneditable: function () {\n        for (var a = this.getOwnUneditables(), b = this.getSelection(), c = 0, d = a.length; d > c; c++)\n          if (b.containsNode(a[c])) return !0;\n        return !1;\n      },\n      deleteContents: function () {\n        var a = this.getRange();\n        this.deleteRangeContents(a), this.setSelection(a);\n      },\n      deleteRangeContents: function (b) {\n        var c, d, e, f;\n        if (this.unselectableClass) {\n          (c = a.dom.getParentElement(b.startContainer, { query: \".\" + this.unselectableClass }, !1, this.contain)) &&\n            b.setStartBefore(c),\n            (d = a.dom.getParentElement(b.endContainer, { query: \".\" + this.unselectableClass }, !1, this.contain)) &&\n              b.setEndAfter(d),\n            (e = b.getNodes(\n              [1],\n              function (b) {\n                return a.dom.hasClass(b, this.unselectableClass);\n              }.bind(this)\n            ));\n          for (var g = e.length; g--; )\n            try {\n              (f = new CustomEvent(\"wysihtml:uneditable:delete\")), e[g].dispatchEvent(f);\n            } catch (h) {}\n        }\n        b.deleteContents();\n      },\n      getCaretNode: function () {\n        var a = this.getSelection();\n        return a && a.anchorNode ? d(a.anchorNode, a.anchorOffset) : null;\n      },\n      getPreviousNode: function (b, c) {\n        var e;\n        if (!b) {\n          var f = this.getSelection();\n          b = f && f.anchorNode ? d(f.anchorNode, f.anchorOffset) : null;\n        }\n        if (b === this.contain) return !1;\n        var g,\n          h = b.previousSibling;\n        return h === this.contain\n          ? !1\n          : (h && 3 !== h.nodeType && 1 !== h.nodeType\n              ? (h = this.getPreviousNode(h, c))\n              : h && 3 === h.nodeType && /^\\s*$/.test(h.textContent)\n              ? (h = this.getPreviousNode(h, c))\n              : c && h && 1 === h.nodeType\n              ? ((e = a.dom.getStyle(\"display\").from(h)),\n                a.lang.array([\"BR\", \"HR\", \"IMG\"]).contains(h.nodeName) ||\n                  a.lang.array([\"block\", \"inline-block\", \"flex\", \"list-item\", \"table\"]).contains(e) ||\n                  !/^[\\s]*$/.test(h.innerHTML) ||\n                  (h = this.getPreviousNode(h, c)))\n              : h || b === this.contain || ((g = b.parentNode), g !== this.contain && (h = this.getPreviousNode(g, c))),\n            h !== this.contain ? h : !1);\n      },\n      getNodesNearCaret: function () {\n        if (!this.isCollapsed()) throw \"Selection must be caret when using selection.getNodesNearCaret()\";\n        var a,\n          b,\n          c,\n          d,\n          e = this.getOwnRanges();\n        return e && e.length > 0\n          ? (1 === e[0].startContainer.nodeType\n              ? ((a = e[0].startContainer.childNodes[e[0].startOffset - 1]),\n                a || 0 !== e[0].startOffset\n                  ? a && ((b = a.previousSibling), (c = a.nextSibling))\n                  : (c = e[0].startContainer.childNodes[0]))\n              : (0 === e[0].startOffset && e[0].startContainer.previousSibling\n                  ? ((a = e[0].startContainer.previousSibling), 3 === a.nodeType && (d = a.data.length))\n                  : ((a = e[0].startContainer), (d = e[0].startOffset)),\n                (b = a.previousSibling),\n                (c = a.nextSibling)),\n            { caretNode: a, prevNode: b, nextNode: c, textOffset: d })\n          : null;\n      },\n      getSelectionParentsByTag: function (b) {\n        for (var c, d = this.getSelectedOwnNodes(), e = [], f = 0, g = d.length; g > f; f++)\n          (c =\n            d[f].nodeName && \"LI\" === d[f].nodeName\n              ? d[f]\n              : a.dom.getParentElement(d[f], { query: \"li\" }, !1, this.contain)),\n            c && e.push(c);\n        return e.length ? e : null;\n      },\n      getRangeToNodeEnd: function () {\n        if (this.isCollapsed()) {\n          var a,\n            b,\n            c,\n            d = this.getRange();\n          if (d)\n            return (\n              (a = d.startContainer),\n              (b = d.startOffset),\n              (c = rangy.createRange(this.doc)),\n              c.selectNodeContents(a),\n              c.setStart(a, b),\n              c\n            );\n        }\n      },\n      getRangeToNodeBeginning: function () {\n        if (this.isCollapsed()) {\n          var a = this.getRange(),\n            b = a.startContainer,\n            c = a.startOffset,\n            d = rangy.createRange(this.doc);\n          return d.selectNodeContents(b), d.setEnd(b, c), d;\n        }\n      },\n      caretIsInTheEndOfNode: function (a) {\n        var b,\n          c,\n          d,\n          e,\n          f = (rangy.createRange(this.doc), this.getSelection(), this.getRangeToNodeEnd());\n        return f\n          ? ((b = f.cloneContents()),\n            (c = b.textContent),\n            /^\\s*$/.test(c)\n              ? a\n                ? ((d = this.getRangeToNodeBeginning().cloneContents()),\n                  (e = d.textContent),\n                  !/[\\u00A0 ][\\s\\uFEFF]*$/.test(e))\n                : !0\n              : !1)\n          : !1;\n      },\n      caretIsFirstInSelection: function (b) {\n        var c = rangy.createRange(this.doc),\n          e = this.getSelection(),\n          f = this.getRange(),\n          g = d(f.startContainer, f.startOffset);\n        if (g) {\n          if (g.nodeType === a.TEXT_NODE) {\n            if (!g.parentNode) return !1;\n            if (!this.isCollapsed() || (g.parentNode.firstChild !== g && !a.dom.domNode(g.previousSibling).is.block()))\n              return !1;\n            var h = this.win.getComputedStyle(g.parentNode).whiteSpace;\n            return \"pre\" === h || \"pre-wrap\" === h\n              ? 0 === f.startOffset\n              : /^\\s*$/.test(g.data.substr(0, f.startOffset));\n          }\n          return b && a.dom.domNode(g).is.lineBreak()\n            ? !0\n            : (c.selectNodeContents(this.getRange().commonAncestorContainer),\n              c.collapse(!0),\n              this.isCollapsed() &&\n                (c.startContainer === e.anchorNode || c.endContainer === e.anchorNode) &&\n                c.startOffset === e.anchorOffset);\n        }\n      },\n      caretIsInTheBeginnig: function (b) {\n        var c = this.getSelection(),\n          d = c.anchorNode,\n          e = c.anchorOffset;\n        return b && d\n          ? 0 === e &&\n              ((d.nodeName && d.nodeName === b.toUpperCase()) || a.dom.getParentElement(d.parentNode, { query: b }, 1))\n          : d\n          ? 0 === e && !this.getPreviousNode(d, !0)\n          : void 0;\n      },\n      getBeforeSelection: function (b) {\n        var c,\n          d,\n          e = this.getSelection(),\n          f = e.isBackwards() ? e.focusNode : e.anchorNode,\n          g = e.isBackwards() ? e.focusOffset : e.anchorOffset,\n          h = this.createRange();\n        if (\n          (f && 3 === f.nodeType && /^\\s*$/.test(f.data.slice(0, g)) && (g = 0),\n          (d = a.dom.getParentElement(f, { query: \"._wysihtml-temp-caret-fix\" }, 1)),\n          d && ((f = d.parentNode), (g = Array.prototype.indexOf.call(f.childNodes, d))),\n          f)\n        ) {\n          if (g > 0)\n            return 3 === f.nodeType\n              ? (h.setStart(f, 0), h.setEnd(f, g), { type: \"text\", range: h, offset: g, node: f })\n              : (h.setStartBefore(f.childNodes[0]),\n                (c = f.childNodes[g - 1]),\n                h.setEndAfter(c),\n                { type: \"element\", range: h, offset: g, node: c });\n          if ((h.setStartAndEnd(f, 0), b)) {\n            var i = this.getPreviousNode(f, !0),\n              j = null;\n            if (\n              (i &&\n                (j =\n                  1 === i.nodeType && a.dom.hasClass(i, this.unselectableClass) ? i : a.dom.domNode(i).lastLeafNode()),\n              j)\n            )\n              return { type: \"leafnode\", range: h, offset: g, node: j };\n          }\n          return { type: \"none\", range: h, offset: g, node: f };\n        }\n        return null;\n      },\n      executeAndRestoreRangy: function (a, b) {\n        var c = rangy.saveSelection(this.win);\n        if (c)\n          try {\n            a();\n          } catch (d) {\n            setTimeout(function () {\n              throw d;\n            }, 0);\n          }\n        else a();\n        rangy.restoreSelection(c);\n      },\n      executeAndRestore: function (b, c) {\n        var d,\n          e,\n          f,\n          h,\n          i,\n          j,\n          k,\n          l,\n          m = this.doc.body,\n          n = c && m.scrollTop,\n          o = c && m.scrollLeft,\n          p = \"_wysihtml-temp-placeholder\",\n          q = '<span class=\"' + p + '\">' + a.INVISIBLE_SPACE + \"</span>\",\n          r = this.getRange(!0);\n        if (!r) return void b(m, m);\n        r.collapsed ||\n          ((k = r.cloneRange()), (j = k.createContextualFragment(q)), k.collapse(!1), k.insertNode(j), k.detach()),\n          (i = r.createContextualFragment(q)),\n          r.insertNode(i),\n          j && ((d = this.contain.querySelectorAll(\".\" + p)), r.setStartBefore(d[0]), r.setEndAfter(d[d.length - 1])),\n          this.setSelection(r);\n        try {\n          b(r.startContainer, r.endContainer);\n        } catch (s) {\n        ");
        builder.append("  setTimeout(function () {\n            throw s;\n          }, 0);\n        }\n        if (((d = this.contain.querySelectorAll(\".\" + p)), d && d.length)) {\n          (l = rangy.createRange(this.doc)),\n            (f = d[0].nextSibling),\n            d.length > 1 && (h = d[d.length - 1].previousSibling),\n            h && f\n              ? (l.setStartBefore(f), l.setEndAfter(h))\n              : ((e = this.doc.createTextNode(a.INVISIBLE_SPACE)),\n                g.insert(e).after(d[0]),\n                l.setStartBefore(e),\n                l.setEndAfter(e)),\n            this.setSelection(l);\n          for (var t = d.length; t--; ) d[t].parentNode.removeChild(d[t]);\n        } else this.contain.focus();\n        c && ((m.scrollTop = n), (m.scrollLeft = o));\n        try {\n          d.parentNode.removeChild(d);\n        } catch (u) {}\n      },\n      set: function (a, b) {\n        var c = rangy.createRange(this.doc);\n        c.setStart(a, b || 0), this.setSelection(c);\n      },\n      insertHTML: function (a) {\n        var b,\n          c,\n          d = this.getRange(),\n          e = this.doc.createElement(\"DIV\"),\n          f = this.doc.createDocumentFragment();\n        if (d) {\n          for (d.deleteContents(), e.innerHTML = a, b = e.lastChild; e.firstChild; ) f.appendChild(e.firstChild);\n          for (\n            d.insertNode(f), c = this.contain.lastChild;\n            c && 3 === c.nodeType && c.previousSibling && /^\\s*$/.test(c.data);\n\n          )\n            c = c.previousSibling;\n          b &&\n            (c && b === c && 1 === b.nodeType && this.contain.appendChild(this.doc.createElement(\"br\")),\n            this.setAfter(b));\n        }\n      },\n      insertNode: function (a) {\n        var b = this.getRange();\n        b && (b.deleteContents(), b.insertNode(a));\n      },\n      canAppendChild: function (a) {\n        var b,\n          c,\n          d = [\n            \"area\",\n            \"base\",\n            \"br\",\n            \"col\",\n            \"command\",\n            \"embed\",\n            \"hr\",\n            \"img\",\n            \"input\",\n            \"keygen\",\n            \"link\",\n            \"meta\",\n            \"param\",\n            \"source\",\n            \"track\",\n            \"wbr\",\n          ],\n          e = this.getRange();\n        return (b = a || e.startContainer), b && (c = (b.tagName || b.nodeName).toLowerCase()), -1 === d.indexOf(c);\n      },\n      splitElementAtCaret: function (b, c) {\n        var d,\n          e,\n          f,\n          g,\n          h,\n          i = this.getSelection();\n        if (i.rangeCount > 0) {\n          (d = i.getRangeAt(0).cloneRange()), d.setEndAfter(b), (e = d.extractContents()), (h = e.childNodes);\n          for (var j = h.length; j--; ) a.dom.domNode(h[j]).is.visible() || e.removeChild(h[j]);\n          b.parentNode.insertBefore(e, b.nextSibling),\n            c\n              ? ((f = c.firstChild || c),\n                (g = c.lastChild || c),\n                b.parentNode.insertBefore(c, b.nextSibling),\n                f && g && (d.setStartBefore(f), d.setEndAfter(g), this.setSelection(d)))\n              : (d.setStartAfter(b), d.setEndAfter(b)),\n            a.dom.domNode(b).is.visible() ||\n              (\"\" === a.dom.getTextContent(b)\n                ? b.parentNode.removeChild(b)\n                : b.parentNode.replaceChild(this.doc.createTextNode(\" \"), b));\n        }\n      },\n      surround: function (a) {\n        var b,\n          c = this.getOwnRanges(),\n          d = [];\n        if (0 == c.length) return d;\n        for (var e = c.length; e--; ) {\n          (b = this.doc.createElement(a.nodeName)),\n            d.push(b),\n            a.className && (b.className = a.className),\n            a.cssStyle && b.setAttribute(\"style\", a.cssStyle);\n          try {\n            c[e].surroundContents(b), this.selectNode(b);\n          } catch (f) {\n            b.appendChild(c[e].extractContents()), c[e].insertNode(b);\n          }\n        }\n        return d;\n      },\n      scrollIntoView: function () {\n        var c,\n          d = this.doc,\n          e = 5,\n          f = d.documentElement.scrollHeight > d.documentElement.offsetHeight,\n          g = (d._wysihtmlScrollIntoViewElement =\n            d._wysihtmlScrollIntoViewElement ||\n            (function () {\n              var b = d.createElement(\"span\");\n              return (b.innerHTML = a.INVISIBLE_SPACE), b;\n            })());\n        f &&\n          (this.insertNode(g),\n          (c = b(g)),\n          g.parentNode.removeChild(g),\n          c >= d.body.scrollTop + d.documentElement.offsetHeight - e && (d.body.scrollTop = c));\n      },\n      selectLine: function () {\n        var b = rangy.createRange();\n        a.browser.supportsSelectionModify()\n          ? this._selectLine_W3C()\n          : b.nativeRange && b.nativeRange.getBoundingClientRect && this._selectLineUniversal();\n      },\n      includeRangyRangeHelpers: function () {\n        var a = this.getSelection(),\n          b = a.getRangeAt(0),\n          c = function (a) {\n            return a && 1 === a.nodeType && a.classList.contains(\"rangySelectionBoundary\");\n          },\n          d = function (a) {\n            return 1 === a.nodeType ? (a.childNodes && a.childNodes.length) || 0 : (a.data && a.data.length) || 0;\n          },\n          e = 1 === a.anchorNode.nodeType ? a.anchorNode.childNodes[a.anchorOffset] : a.anchorNode,\n          f = 1 === a.focusNode.nodeType ? a.focusNode.childNodes[a.focusOffset] : a.focusNode;\n        f && a.focusOffset === d(f) && f.nextSibling && c(f.nextSibling) && b.setEndAfter(f.nextSibling),\n          e && 0 === a.anchorOffset && e.previousSibling && c(e.previousSibling) && b.setStartBefore(e.previousSibling),\n          b.select();\n      },\n      _selectLine_W3C: function () {\n        var a = this.win.getSelection(),\n          b = [a.anchorNode, a.anchorOffset, a.focusNode, a.focusOffset];\n        a.modify(\"move\", \"left\", \"lineboundary\"),\n          a.modify(\"extend\", \"right\", \"lineboundary\"),\n          a.anchorNode === b[0] && a.anchorOffset === b[1] && a.focusNode === b[2] && a.focusOffset === b[3]\n            ? this._selectLineUniversal()\n            : this.includeRangyRangeHelpers();\n      },\n      toLineBoundary: function (b, c) {\n        if (((c = \"undefined\" == typeof c ? !1 : c), a.browser.supportsSelectionModify())) {\n          var d = this.win.getSelection();\n          d.modify(\"extend\", b, \"lineboundary\"),\n            c && (\"left\" === b ? d.collapseToStart() : \"right\" === b && d.collapseToEnd());\n        }\n      },\n      getRangeRect: function (a) {\n        var b,\n          c = (this.doc.createTextNode(\"i\"), this.doc.createTextNode(\"i\"));\n        return (\n          a.collapsed\n            ? (a.insertNode(c), a.selectNode(c), (b = a.nativeRange.getBoundingClientRect()), a.deleteContents())\n            : (b = a.nativeRange.getBoundingClientRect()),\n          b\n        );\n      },\n      _selectLineUniversal: function () {\n        var b,\n          c,\n          d,\n          e,\n          f,\n          g,\n          h = this.getSelection(),\n          i = h.getRangeAt(0),\n          j = 0,\n          k = this,\n          l = function (b) {\n            return (\n              b &&\n              1 === b.nodeType &&\n              (\"block\" === k.win.getComputedStyle(b).display || a.lang.array([\"BR\", \"HR\"]).contains(b.nodeName))\n            );\n          },\n          m = function (a) {\n            var b = a;\n            if (b)\n              for (\n                ;\n                b &&\n                ((1 === b.nodeType && b.classList.contains(\"rangySelectionBoundary\")) ||\n                  (3 === b.nodeType && /^\\s*$/.test(b.data)));\n\n              )\n                b = b.previousSibling;\n            return b;\n          };\n        (c = i.cloneRange()),\n          (d = i.cloneRange()),\n          i.collapsed &&\n            (3 === i.startContainer.nodeType && i.startOffset < i.startContainer.data.length\n              ? i.moveEnd(\"character\", 1)\n              : 1 === i.startContainer.nodeType &&\n                i.startContainer.childNodes[i.startOffset] &&\n                3 === i.startContainer.childNodes[i.startOffset].nodeType &&\n                i.startContainer.childNodes[i.startOffset].data.length > 0\n              ? i.moveEnd(\"character\", 1)\n              : i.startOffset > 0 &&\n                (3 === i.startContainer.nodeType ||\n                  (1 === i.startContainer.nodeType && !l(m(i.startContainer.childNodes[i.startOffset - 1])))) &&\n                i.moveStart(\"character\", -1)),\n          i.collapsed || i.insertNode(this.doc.createTextNode(a.INVISIBLE_SPACE)),\n          (b = i.nativeRange.getBoundingClientRect());\n        do\n          (e = i.moveStart(\"character\", -1)),\n            (f = i.nativeRange.getBoundingClientRect()),\n            (f && Math.floor(f.top) === Math.floor(b.top)) || (i.moveStart(\"character\", 1), (g = !0)),\n            j++;\n        while (0 !== e && !g && 2e3 > j);\n        if (\n          ((j = 0),\n          (g = !1),\n          (b = i.nativeRange.getBoundingClientRect()),\n          i.endContainer !== this.contain ||\n            (this.contain.lastChild && this.contain.childNodes[i.endOffset] !== this.contain.lastChild))\n        )\n          do\n            (e = i.moveEnd(\"character\", 1)),\n              (f = i.nativeRange.getBoundingClientRect()),\n              (f && Math.floor(f.bottom) === Math.floor(b.bottom)) ||\n                (i.moveEnd(\"character\", -1),\n                i.endContainer &&\n                  1 === i.endContainer.nodeType &&\n                  i.endContainer.childNodes[i.endOffset] &&\n                  1 === i.endContainer.childNodes[i.endOffset].nodeType &&\n                  \"BR\" === i.endContainer.childNodes[i.endOffset].nodeName &&\n                  i.endContainer.childNodes[i.endOffset].previousSibling &&\n                  (1 === i.endContainer.childNodes[i.endOffset].previousSibling.nodeType\n                    ? i.setEnd(\n                        i.endContainer.childNodes[i.endOffset].previousSibling,\n                        i.endContainer.childNodes[i.endOffset].previousSibling.childNodes.length\n                      )\n                    : 3 === i.endContainer.childNodes[i.endOffset].previousSibling.nodeType &&\n                      i.setEnd(\n                        i.endContainer.childNodes[i.endOffset].previousSibling,\n                        i.endContainer.childNodes[i.endOffset].previousSibling.data.length\n                      )),\n                (g = !0)),\n              j++;\n          while (0 !== e && !g && 2e3 > j);\n        i.select(), this.includeRangyRangeHelpers();\n      },\n      getText: function () {\n        var a = this.getSelection();\n        return a ? a.toString() : \"\";\n      },\n      getNodes: function (a, b) {\n        var c = this.getRange();\n        return c ? c.getNodes(Array.isArray(a) ? a : [a], b) : [];\n      },\n      getOwnNodes: function (a, b, c) {\n        for (var d = this.getOwnRanges(), e = [], f = 0, g = d.length; g > f; f++)\n          d[f] && (c && d[f].splitBoundaries(), (e = e.concat(d[f].getNodes(Array.isArray(a) ? a : [a], b))));\n        return e;\n      },\n      fixRangeOverflow: function (a) {\n        if (this.contain && this.contain.firstChild && a) {\n          var b = a.compareNode(this.contain);\n          if (2 !== b)\n            1 === b && a.setStartBefore(this.contain.firstChild),\n              0 === b && a.setEndAfter(this.contain.lastChild),\n              3 === b && (a.setStartBefore(this.contain.firstChild), a.setEndAfter(this.contain.lastChild));\n          else if (this._detectInlineRangeProblems(a)) {\n            var c = a.endContainer.previousElementSibling;\n            c && a.setEnd(c, this._endOffsetForNode(c));\n          }\n        }\n      },\n      _endOffsetForNode: function (a) {\n        var b = document.createRange();\n        return b.selectNodeContents(a), b.endOffset;\n      },\n      _detectInlineRangeProblems: function (a) {\n        var b = g.compareDocumentPosition(a.startContainer, a.endContainer);\n        return 0 == a.endOffset && 4 & b;\n      },\n      getRange: function (a) {\n        var b = this.getSelection(),\n          c = b && b.rangeCount && b.getRangeAt(0);\n        return a !== !0 && this.fixRangeOverflow(c), c;\n      },\n      getOwnUneditables: function () {\n        var b = g.query(this.contain, \".\" + this.unselectableClass),\n          c = g.query(b, \".\" + this.unselectableClass);\n        return a.lang.array(b).without(c);\n      },\n      getOwnRanges: function () {\n        var a,\n          b = [],\n          c = this.getRange();\n        if ((c && b.push(c), this.unselectableClass && this.contain && c)) {\n          var d,\n            e = this.getOwnUneditables();\n          if (e.length > 0)\n            for (var f = 0, g = e.length; g > f; f++) {\n              a = [];\n              for (var h = 0, i = b.length; i > h; h++) {\n                if (b[h])\n                  switch (b[h].compareNode(e[f])) {\n                    case 2:\n                      break;\n                    case 3:\n                      (d = b[h].cloneRange()),\n                        d.setEndBefore(e[f]),\n                        a.push(d),\n                        (d = b[h].cloneRange()),\n                        d.setStartAfter(e[f]),\n                        a.push(d);\n                      break;\n                    default:\n                      a.push(b[h]);\n                  }\n                b = a;\n              }\n            }\n        }\n        return b;\n      },\n      getSelection: function () {\n        return rangy.getSelection(this.win);\n      },\n      setSelection: function (a) {\n        var b = rangy.getSelection(this.win);\n        return b.setSingleRange(a), b && b.anchorNode && b.focusNode ? b : null;\n      },\n      selectAll: function () {\n        var b,\n          c = this.createRange(),\n          d = this.composer,\n          f = this,\n          g = e(this.composer.element),\n          h = e(this.composer.element),\n          i = function () {\n            c.setStart(d.element, 0), c.setEnd(d.element, d.element.childNodes.length), (b = f.setSelection(c));\n          },\n          j = function () {\n            return (\n              !b ||\n              (b.nativeSelection &&\n                b.nativeSelection.type &&\n                (\"Caret\" === b.nativeSelection.type || \"None\" === b.nativeSelection.type))\n            );\n          };\n        a.dom.removeInvisibleSpaces(this.composer.element),\n          i(),\n          this.composer.element.firstChild &&\n            j() &&\n            (this.composer.element.appendChild(g),\n            i(),\n            j() &&\n              (g.parentNode.removeChild(g),\n              this.composer.element.insertBefore(h, this.composer.element.firstChild),\n              i(),\n              j() && (this.composer.element.appendChild(g), i())));\n      },\n      createRange: function () {\n        return rangy.createRange(this.doc);\n      },\n      isCollapsed: function () {\n        return this.getSelection().isCollapsed;\n      },\n      getHtml: function () {\n        return this.getSelection().toHtml();\n      },\n      getPlainText: function () {\n        return this.getSelection().toString();\n      },\n      isEndToEndInNode: function (b) {\n        var c = this.getRange(),\n          d = c.commonAncestorContainer,\n          e = c.startContainer,\n          f = c.endContainer;\n        if (\n          (d.nodeType === a.TEXT_NODE && (d = d.parentNode),\n          e.nodeType === a.TEXT_NODE && !/^\\s*$/.test(e.data.substr(c.startOffset)))\n        )\n          return !1;\n        if (f.nodeType === a.TEXT_NODE && !/^\\s*$/.test(f.data.substr(c.endOffset))) return !1;\n        for (; e && e !== d; ) {\n          if (e.nodeType !== a.TEXT_NODE && !a.dom.contains(d, e)) return !1;\n          if (a.dom.domNode(e).prev({ ignoreBlankTexts: !0 })) return !1;\n          e = e.parentNode;\n        }\n        for (; f && f !== d; ) {\n          if (f.nodeType !== a.TEXT_NODE && !a.dom.contains(d, f)) return !1;\n          if (a.dom.domNode(f).next({ ignoreBlankTexts: !0 })) return !1;\n          f = f.parentNode;\n        }\n        return a.lang.array(b).contains(d.nodeName) ? d : !1;\n      },\n      isInThisEditable: function () {\n        var b = this.getSelection(),\n          c = b.focusNode,\n          d = b.anchorNode;\n        return (\n          c && 1 !== c.nodeType && (c = c.parentNode),\n          d && 1 !== d.nodeType && (d = d.parentNode),\n          d &&\n            c &");
        builder.append("&\n            (a.dom.contains(this.composer.element, c) || this.composer.element === c) &&\n            (a.dom.contains(this.composer.element, d) || this.composer.element === d)\n        );\n      },\n      deselect: function () {\n        var a = this.getSelection();\n        a && a.removeAllRanges();\n      },\n    });\n  })(wysihtml),\n  (wysihtml.Commands = Base.extend({\n    constructor: function (a) {\n      (this.editor = a), (this.composer = a.composer), (this.doc = this.composer.doc);\n    },\n    support: function (a) {\n      return wysihtml.browser.supportsCommand(this.doc, a);\n    },\n    exec: function (a, b) {\n      var c = wysihtml.commands[a],\n        d = wysihtml.lang.array(arguments).get(),\n        e = c && c.exec,\n        f = null;\n      if (\n        (this.composer.hasPlaceholderSet() &&\n          !wysihtml.lang.array([\"styleWithCSS\", \"enableObjectResizing\", \"enableInlineTableEditing\"]).contains(a) &&\n          ((this.composer.element.innerHTML = \"\"), this.composer.selection.selectNode(this.composer.element)),\n        this.editor.fire(\"beforecommand:composer\"),\n        e)\n      )\n        d.unshift(this.composer), (f = e.apply(c, d));\n      else\n        try {\n          f = this.doc.execCommand(a, !1, b);\n        } catch (g) {}\n      return this.editor.fire(\"aftercommand:composer\"), f;\n    },\n    remove: function (a, b) {\n      var c = wysihtml.commands[a],\n        d = wysihtml.lang.array(arguments).get(),\n        e = c && c.remove;\n      return e ? (d.unshift(this.composer), e.apply(c, d)) : void 0;\n    },\n    state: function (a, b) {\n      var c = wysihtml.commands[a],\n        d = wysihtml.lang.array(arguments).get(),\n        e = c && c.state;\n      if (e) return d.unshift(this.composer), e.apply(c, d);\n      try {\n        return this.doc.queryCommandState(a);\n      } catch (f) {\n        return !1;\n      }\n    },\n    stateValue: function (a) {\n      var b = wysihtml.commands[a],\n        c = wysihtml.lang.array(arguments).get(),\n        d = b && b.stateValue;\n      return d ? (c.unshift(this.composer), d.apply(b, c)) : !1;\n    },\n  })),\n  (function (a) {\n    function b(b) {\n      return a.lang.object({}).merge(c).merge({ attribute: b }).get();\n    }\n    var c = { nodeName: \"A\", toggle: !1 };\n    a.commands.createLink = {\n      exec: function (c, d, e) {\n        var f = b(e);\n        if (c.selection.isCollapsed() && !this.state(c, d)) {\n          var g = c.doc.createTextNode(f.attribute.href);\n          c.selection.insertNode(g), c.selection.selectNode(g);\n        }\n        a.commands.formatInline.exec(c, d, f);\n      },\n      state: function (b, d) {\n        return a.commands.formatInline.state(b, d, c);\n      },\n    };\n  })(wysihtml),\n  (function (a) {\n    function b(a) {\n      return {\n        nodeName: a.nodeName || null,\n        className: a.classRegExp ? null : a.className || null,\n        classRegExp: a.classRegExp || null,\n        styleProperty: a.styleProperty || null,\n      };\n    }\n    function c(a, b) {\n      return 3 === a.nodeType ? a : a.childNodes[b] || a;\n    }\n    function d(a) {\n      return a && 1 === a.nodeType && \"BR\" === a.nodeName;\n    }\n    function e(a, b) {\n      return a && 1 === a.nodeType && \"block\" === b.win.getComputedStyle(a).display;\n    }\n    function f(a) {\n      return a && 1 === a.nodeType && a.classList.contains(\"rangySelectionBoundary\");\n    }\n    function g(a, b) {\n      return d(a) || e(a, b);\n    }\n    function h(b, c) {\n      a.dom.removeInvisibleSpaces(b.element);\n      for (\n        var d,\n          e = b.element,\n          f = e.querySelectorAll(E),\n          g =\n            b.config.classNames.uneditableContainer +\n            [\"\"].concat(E.split(\",\")).join(\", \" + b.config.classNames.uneditableContainer + \" \"),\n          h = e.querySelectorAll(g),\n          i = a.lang.array(f).without(h),\n          j = i.length;\n        j--;\n\n      )\n        \"\" !== i[j].innerHTML.replace(/[\\uFEFF]/g, \"\") ||\n          (0 !== c.length && i[j] === c[c.length - 1]) ||\n          ((d = a.lang.array(c).indexOf(i[j])), d > -1 && c.splice(d, 1), i[j].parentNode.removeChild(i[j]));\n      return c;\n    }\n    function i(a) {\n      return a.config.useLineBreaks ? \"DIV\" : \"P\";\n    }\n    function j(a, b, c) {\n      for (var d = a, e = null; d && b && d !== b; )\n        1 === d.nodeType && d.matches(c ? E : D) && (e = d), (d = d.parentNode);\n      return e;\n    }\n    function k(a, b) {\n      for (var c, d, e, f = a, g = null; f && b && f !== b; )\n        1 === f.nodeType &&\n          f.matches(F) &&\n          ((d = f), null === g ? ((g = f.cloneNode(!1)), (c = g)) : ((e = f.cloneNode(!1)), e.appendChild(g), (g = e))),\n          (f = f.parentNode);\n      return { parent: d, outerNode: g, innerNode: c };\n    }\n    function l(b, c, d) {\n      return (\n        b || ((b = d.doc.createElement(c.nodeName || i(d))), b.appendChild(d.doc.createTextNode(a.INVISIBLE_SPACE))),\n        c.nodeName && b.nodeName !== c.nodeName && (b = C.renameElement(b, c.nodeName)),\n        c.classRegExp && (b.className = b.className.replace(c.classRegExp, \"\")),\n        c.className && b.classList.add(c.className),\n        c.styleProperty &&\n          \"undefined\" != typeof c.styleValue &&\n          (b.style[a.browser.fixStyleKey(c.styleProperty)] = c.styleValue),\n        b\n      );\n    }\n    function m(b, c, d) {\n      var e,\n        f = b.previousSibling,\n        g = b.nextSibling,\n        h = !1;\n      c.styleProperty && (b.style[a.browser.fixStyleKey(c.styleProperty)] = \"\"),\n        c.className && b.classList.remove(c.className),\n        c.classRegExp && (b.className = b.className.replace(c.classRegExp, \"\")),\n        null !== b.getAttribute(\"class\") && \"\" === b.getAttribute(\"class\").trim() && b.removeAttribute(\"class\"),\n        c.nodeName &&\n          b.nodeName.toLowerCase() === c.nodeName.toLowerCase() &&\n          ((e = b.getAttribute(\"style\")),\n          e && \"\" !== e.trim() ? (b = C.renameElement(b, i(d))) : (C.unwrap(b), (h = !0))),\n        null !== b.getAttribute(\"style\") && \"\" === b.getAttribute(\"style\").trim() && b.removeAttribute(\"style\"),\n        h && u(f, g, d);\n    }\n    function n(b) {\n      for (var c, d, e = b.querySelectorAll(E) || [], f = e.length; f--; )\n        (c = a.dom.domNode(e[f]).next({ nodeTypes: [1, 3], ignoreBlankTexts: !0 })),\n          (d = a.dom.domNode(e[f]).prev({ nodeTypes: [1, 3], ignoreBlankTexts: !0 })),\n          c &&\n            1 !== c.nodeType &&\n            \"BR\" !== c.nodeName &&\n            \"\" !== (e[f].innerHTML || e[f].nodeValue || \"\").trim() &&\n            e[f].parentNode.insertBefore(e[f].ownerDocument.createElement(\"BR\"), c),\n          c &&\n            1 !== c.nodeType &&\n            \"BR\" !== c.nodeName &&\n            \"\" !== (e[f].innerHTML || e[f].nodeValue || \"\").trim() &&\n            e[f].parentNode.insertBefore(e[f].ownerDocument.createElement(\"BR\"), c),\n          a.dom.unwrap(e[f]);\n    }\n    function o(a, b) {\n      var c,\n        d = a.startContainer,\n        e = a.endContainer;\n      return d && 1 === d.nodeType && d === e\n        ? void (\n            d.firstChild === d.lastChild &&\n            1 === a.endOffset &&\n            d !== b.element &&\n            \"LI\" !== d.nodeName &&\n            \"TD\" !== d.nodeName &&\n            (a.setStartBefore(d), a.setEndAfter(e))\n          )\n        : d && 1 === d.nodeType && 3 === e.nodeType\n        ? void (\n            d.firstChild === e &&\n            a.endOffset === e.data.length &&\n            d !== b.element &&\n            \"LI\" !== d.nodeName &&\n            \"TD\" !== d.nodeName &&\n            a.setEndAfter(d)\n          )\n        : e && 1 === e.nodeType && 3 === d.nodeType\n        ? void (\n            e.firstChild === d &&\n            0 === a.startOffset &&\n            e !== b.element &&\n            \"LI\" !== e.nodeName &&\n            \"TD\" !== e.nodeName &&\n            a.setStartBefore(e)\n          )\n        : d && 3 === d.nodeType && d === e && 1 === d.parentNode.childNodes.length\n        ? void (\n            a.endOffset == e.data.length &&\n            0 === a.startOffset &&\n            ((c = d.parentNode),\n            c !== b.element && \"LI\" !== c.nodeName && \"TD\" !== c.nodeName && (a.setStartBefore(c), a.setEndAfter(c)))\n          )\n        : void 0;\n    }\n    function p(b) {\n      for (var c, d, e, f, g, h, i = [], j = 0, k = b.length; k > j; j++)\n        if (\n          (1 === b[j].startContainer.nodeType &&\n            b[j].startContainer.matches(\"ul, ol\") &&\n            b[j].setStart(b[j].startContainer.childNodes[b[j].startOffset], 0),\n          1 === b[j].endContainer.nodeType &&\n            b[j].endContainer.matches(\"ul, ol\") &&\n            ((h = b[j].endContainer.childNodes[Math.max(b[j].endOffset - 1, 0)]),\n            h.childNodes && b[j].setEnd(h, h.childNodes.length)),\n          (c = b[j].getNodes([1], function (a) {\n            return \"LI\" === a.nodeName;\n          })),\n          c.length > 0)\n        ) {\n          for (d = 0, e = c.length; e > d; d++)\n            (g = b[j].compareNode(c[d])),\n              (g === b[j].NODE_AFTER || g === b[j].NODE_INSIDE) &&\n                ((f = b[j].cloneRange()),\n                (h = a.dom.domNode(c[d]).prev({ nodeTypes: [1] })),\n                h\n                  ? f.setEnd(h, h.childNodes.length)\n                  : c[d].closest(\"ul, ol\")\n                  ? f.setEndBefore(c[d].closest(\"ul, ol\"))\n                  : f.setEndBefore(c[d]),\n                i.push(f),\n                b[j].setStart(c[d], 0)),\n              (g === b[j].NODE_BEFORE || g === b[j].NODE_INSIDE) &&\n                ((f = b[j].cloneRange()),\n                f.setEnd(c[d], c[d].childNodes.length),\n                i.push(f),\n                (h = a.dom.domNode(c[d]).next({ nodeTypes: [1] })),\n                h\n                  ? b[j].setStart(h, 0)\n                  : c[d].closest(\"ul, ol\")\n                  ? b[j].setStartAfter(c[d].closest(\"ul, ol\"))\n                  : b[j].setStartAfter(c[d]));\n          i.push(b[j]);\n        } else i.push(b[j]);\n      return i;\n    }\n    function q(b, c, d) {\n      var e = b ? a.lang.object(b).clone(!0) : null;\n      return e && (e.nodeName = e.nodeName || c || i(d)), e;\n    }\n    function r(b, c, d, e) {\n      var f,\n        h,\n        i,\n        l,\n        m,\n        n = c.startContainer,\n        e = e || j(n, d.element, !0);\n      if (e)\n        (h = b.firstChild),\n          (i = b.lastChild),\n          d.selection.splitElementAtCaret(e, b),\n          (m = a.dom.domNode(i).next({ nodeTypes: [1, 3], ignoreBlankTexts: !0 })),\n          (l = a.dom.domNode(h).prev({ nodeTypes: [1, 3], ignoreBlankTexts: !0 })),\n          h && !g(h, d) && l && !g(l, d) && h.parentNode.insertBefore(d.doc.createElement(\"br\"), h),\n          i && !g(i, d) && m && !g(m, d) && m.parentNode.insertBefore(d.doc.createElement(\"br\"), m);\n      else if (((f = k(n, d.element)), f.outerNode && f.innerNode && f.parent)) {\n        if (1 === b.childNodes.length) {\n          for (; b.firstChild.firstChild; ) f.innerNode.appendChild(b.firstChild.firstChild);\n          b.firstChild.appendChild(f.outerNode);\n        }\n        d.selection.splitElementAtCaret(f.parent, b);\n      } else {\n        var o = b.firstChild,\n          p = b.lastChild;\n        c.insertNode(b), c.setStartBefore(o), c.setEndAfter(p);\n      }\n    }\n    function s(b, d, e) {\n      for (\n        var f,\n          h,\n          i = b.cloneRange(),\n          j = c(i.startContainer, i.startOffset).previousSibling,\n          k = c(i.endContainer, i.endOffset).nextSibling,\n          l = i.extractContents(),\n          m = e.doc.createDocumentFragment(),\n          o = !0;\n        l.firstChild;\n\n      ) {\n        if (1 === l.firstChild.nodeType && l.firstChild.matches(E)) {\n          n(l.firstChild),\n            (f = a.dom.unwrap(l.firstChild)),\n            f.length > 0 &&\n              ((m.lastChild && (1 !== m.lastChild.nodeType || !g(m.lastChild, e))) ||\n                (!m.lastChild && j && (1 !== j.nodeType || g(j, e)))) &&\n              m.appendChild(e.doc.createElement(\"BR\"));\n          for (var p = 0, q = f.length; q > p; p++) m.appendChild(f[p]);\n          f.length > 0 &&\n            ((1 === m.lastChild.nodeType && g(m.lastChild, e)) ||\n              ((k || m.lastChild !== l.lastChild) && m.appendChild(e.doc.createElement(\"BR\"))));\n        } else m.appendChild(l.firstChild);\n        o = !1;\n      }\n      return (h = a.lang.array(m.childNodes).get()), r(m, i, e), h;\n    }\n    function t(b, c, e) {\n      var f = b && a.dom.domNode(b).prev({ nodeTypes: [1, 3], ignoreBlankTexts: !0 });\n      d(c) && c.parentNode.removeChild(c),\n        !d(b) ||\n          (f && 1 === f.nodeType && \"block\" === e.win.getComputedStyle(f).display) ||\n          b.parentNode.removeChild(b);\n    }\n    function u(a, b, c) {\n      var e;\n      a && f(a) && (a = a.previousSibling),\n        b && f(b) && (b = b.nextSibling),\n        (e = a && a.previousSibling),\n        a &&\n          (1 !== a.nodeType || (\"block\" !== c.win.getComputedStyle(a).display && !d(a))) &&\n          a.parentNode &&\n          a.parentNode.insertBefore(c.doc.createElement(\"br\"), a.nextSibling),\n        b &&\n          (1 !== b.nodeType || \"block\" !== c.win.getComputedStyle(b).display) &&\n          b.parentNode &&\n          b.parentNode.insertBefore(c.doc.createElement(\"br\"), b);\n    }\n    function v(d, e, f, g) {\n      var h,\n        i,\n        k = e ? b(e) : null,\n        m = d.cloneRange(),\n        o = m.startContainer,\n        p = c(m.startContainer, m.startOffset),\n        s = c(m.endContainer, m.endOffset),\n        u =\n          m.startContainer !== p || 3 !== p.nodeType || G(p, m.startOffset)\n            ? a.dom.domNode(p).prev({ nodeTypes: [1, 3], ignoreBlankTexts: !0 })\n            : p,\n        v =\n          (1 === m.endContainer.nodeType &&\n            m.endContainer.childNodes[m.endOffset] === s &&\n            (1 === s.nodeType || (!H(s, m.endOffset) && !a.dom.domNode(s).is.rangyBookmark()))) ||\n          (m.endContainer === s && 3 === s.nodeType && !H(s, m.endOffset))\n            ? s\n            : a.dom.domNode(s).next({ nodeTypes: [1, 3], ignoreBlankTexts: !0 }),\n        w = m.extractContents(),\n        x = g.doc.createDocumentFragment(),\n        y = k ? a.dom.getParentElement(o, k, null, g.element) : null,\n        z = !f || !e || (\"BLOCKQUOTE\" === e.nodeName && \"BLOCKQUOTE\" === f),\n        A = y || j(o, g.element, z);\n      if (\n        (a.dom.domNode(v).is.rangyBookmark() && ((s = v), (v = s.nextSibling)), I(w), e && \"BLOCKQUOTE\" === e.nodeName)\n      ) {\n        var B = l(null, e, g);\n        B.appendChild(w), x.appendChild(B), (i = [B]);\n      } else {\n        if (w.firstChild)\n          for (; w.firstChild; )\n            if (1 == w.firstChild.nodeType && w.firstChild.matches(E))\n              l(w.firstChild, e, g), w.firstChild.matches(D) && n(w.firstChild), x.appendChild(w.firstChild);\n            else {\n              for (\n                h = l(null, q(e, f, g), g);\n                w.firstChild && (1 !== w.firstChild.nodeType || !w.firstChild.matches(E));\n\n              )\n                1 == w.firstChild.nodeType && h.matches(D) && n(w.firstChild), h.appendChild(w.firstChild);\n              x.appendChild(h);\n            }\n        else x.appendChild(l(null, e, g));\n        i = a.lang.array(x.childNodes).get();\n      }\n      return (\n        r(x, m, g, A),\n        t(u, v, g),\n        i.length > 0 &&\n          (\"undefined\" == typeof i[i.length - 1].lastChild ||\n            a.dom.domNode(i[i.length - 1].lastChild).is.rangyBookmark()) &&\n          i[i.length - 1].appendChild(g.doc.createElement(\"br\")),\n        i\n      );\n    }\n    function w(b, c) {\n      var d = a.dom.getParentElement(b, { query: E }, null, c.element);\n      return d ? d.nodeName : null;\n    }\n    function x(b, c) {\n      var d,\n        e = a.dom.getParentElement(\n          b.selection.getOwnRanges()[0].startContainer,\n          { query: D + \", \" + (c ? c.toLowerCase() : \"div\") },\n          null,\n          b.element\n        );\n      e\n        ? ((d = b.selection.createRange()), d.selectNode(e), b.selection.setSelection(d))\n        : b.isEmpty() || b.selection.selectLine();\n    }\n    function y(a, b) {\n      var c = b.selection.createRange(),\n        d = a[a.length - 1],\n        e = 1 === d.nodeType && d.childNodes ? 0 | d.childNodes.length : d.length || 0;\n      c.setStart(a[0], 0), c.setEnd(d, e), c.select();\n    }\n    function z(a, b, c) {\n      var d,\n        e = b.selecti");
        builder.append("on.getOwnRanges(),\n        f = [];\n      e = p(e);\n      for (var g = e.length; g--; )\n        o(e[g], b),\n          (d = w(e[g].startContainer, b)),\n          (f = \"remove\" === a ? f.concat(s(e[g], d, b)) : f.concat(v(e[g], c, d, b)));\n      return f;\n    }\n    function A(a) {\n      return \"string\" == typeof a && (a = { nodeName: a.toUpperCase() }), a;\n    }\n    function B(b) {\n      var c;\n      return b.selection.isCollapsed() &&\n        ((c = b.selection.getNodesNearCaret()),\n        c &&\n          c.caretNode &&\n          (a.dom.domNode(c.caretNode).is.lineBreak() ||\n            (3 === c.caretNode.nodeType &&\n              0 === c.textOffset &&\n              (!c.prevNode || a.dom.domNode(c.prevNode).is.lineBreak())) ||\n            (1 === c.caretNode.nodeType &&\n              c.caretNode.classList.contains(\"rangySelectionBoundary\") &&\n              (!c.prevNode || a.dom.domNode(c.prevNode).is.lineBreak() || a.dom.domNode(c.prevNode).is.block()) &&\n              (!c.nextNode || a.dom.domNode(c.nextNode).is.lineBreak() || a.dom.domNode(c.nextNode).is.block()))))\n        ? !0\n        : !1;\n    }\n    var C = a.dom,\n      D = \"h1, h2, h3, h4, h5, h6, p, pre\",\n      E = \"h1, h2, h3, h4, h5, h6, p, pre, div, blockquote\",\n      F =\n        \"b, big, i, small, tt, abbr, acronym, cite, code, dfn, em, kbd, strong, samp, var, a, bdo, br, q, span, sub, sup, button, label, textarea, input, select, u\",\n      G = function (a, b) {\n        var c = a.data ? a.data.slice(0, b) : \"\";\n        return /^\\s*$/.test(c);\n      },\n      H = function (a, b) {\n        var c = a.data ? a.data.slice(b) : \"\";\n        return /^\\s*$/.test(c);\n      },\n      I = function (a) {\n        if (a) {\n          for (\n            ;\n            a.firstChild &&\n            3 === a.firstChild.nodeType &&\n            /^\\s*$/.test(a.firstChild.data) &&\n            a.lastChild !== a.firstChild;\n\n          )\n            a.removeChild(a.firstChild);\n          for (\n            ;\n            a.lastChild && 3 === a.lastChild.nodeType && /^\\s*$/.test(a.lastChild.data) && a.lastChild !== a.firstChild;\n\n          )\n            a.removeChild(a.lastChild);\n          a.firstChild &&\n            1 === a.firstChild.nodeType &&\n            \"BR\" === a.firstChild.nodeName &&\n            a.lastChild !== a.firstChild &&\n            a.removeChild(a.firstChild),\n            a.lastChild &&\n              1 === a.lastChild.nodeType &&\n              \"BR\" === a.lastChild.nodeName &&\n              a.lastChild !== a.firstChild &&\n              a.removeChild(a.lastChild);\n        }\n      };\n    a.commands.formatBlock = {\n      exec: function (a, b, c) {\n        c = A(c);\n        var d,\n          e,\n          f = [];\n        if ((c && c.toggle && (e = this.state(a, b, c)), e)) {\n          d = rangy.saveSelection(a.win);\n          for (var g = 0, i = e.length; i > g; g++) m(e[g], c, a);\n        } else\n          a.selection.isCollapsed() &&\n            ((d = rangy.saveSelection(a.win)),\n            B(a) ? a.selection.selectLine() : x(a, c && c.nodeName ? c.nodeName.toUpperCase() : void 0)),\n            (f = c ? z(\"apply\", a, c) : z(\"remove\", a));\n        (f = h(a, f)), d ? rangy.restoreSelection(d) : y(f, a);\n      },\n      remove: function (a, b, c) {\n        c = A(c);\n        var d, e;\n        a.selection.isCollapsed() &&\n          ((e = rangy.saveSelection(a.win)), x(a, c && c.nodeName ? c.nodeName.toUpperCase() : void 0)),\n          (d = z(\"remove\", a)),\n          (d = h(a, d)),\n          e ? rangy.restoreSelection(e) : y(d, a);\n      },\n      state: function (b, c, d) {\n        d = A(d);\n        for (\n          var e,\n            f = b.selection.filterElements(\n              function (b) {\n                return a.dom.domNode(b).test(d || { query: E });\n              }.bind(this)\n            ),\n            g = b.selection.getSelectedOwnNodes(),\n            h = 0,\n            i = g.length;\n          i > h;\n          h++\n        )\n          (e = C.getParentElement(g[h], d || { query: E }, null, b.element)), e && -1 === f.indexOf(e) && f.push(e);\n        return 0 === f.length ? !1 : f;\n      },\n    };\n  })(wysihtml),\n  (function (a) {\n    function b(a) {\n      return /^\\s*$/.test(a.className);\n    }\n    function c(a) {\n      return !a.getAttribute(\"style\") || /^\\s*$/.test(a.getAttribute(\"style\"));\n    }\n    function d(b) {\n      var c = a.dom.getAttributes(b);\n      return a.lang.object(c).isEmpty();\n    }\n    function e(b, c) {\n      var d, e, f, g;\n      return 1 !== b.nodeType || 1 !== c.nodeType\n        ? !1\n        : b.nodeName !== c.nodeName\n        ? !1\n        : ((d = b.className.trim().replace(/\\s+/g, \" \").split(\" \")),\n          (e = c.className.trim().replace(/\\s+/g, \" \").split(\" \")),\n          a.lang.array(d).without(e).length > 0\n            ? !1\n            : ((f = a.dom.getAttributes(b)),\n              (g = a.dom.getAttributes(c)),\n              f.length === g.length && a.lang.object(a.lang.object(f).difference(g)).isEmpty() ? !0 : !1));\n    }\n    function f(b, c) {\n      var d = (c && c.nodeName) || F,\n        e = b.ownerDocument.createElement(d);\n      if (\n        (c.classRegExp && (e.className = e.className.replace(c.classRegExp, \"\")),\n        c.className && e.classList.add(c.className),\n        c.styleProperty &&\n          \"undefined\" != typeof c.styleValue &&\n          (e.style[a.browser.fixStyleKey(c.styleProperty)] = c.styleValue),\n        c.attribute)\n      )\n        if (\"object\" == typeof c.attribute)\n          for (var f in c.attribute) c.attribute.hasOwnProperty(f) && e.setAttribute(f, c.attribute[f]);\n        else \"undefined\" != typeof c.attributeValue && e.setAttribute(c.attribute, c.attributeValue);\n      return e;\n    }\n    function g(a, b) {\n      for (var c in a) if (a.hasOwnProperty(c) && (void 0 === typeof b[c] || b[c] !== a[c])) return !1;\n      return !0;\n    }\n    function h(b, c, d) {\n      var e,\n        f = a.dom.getAttributes(b),\n        h = g(c, f);\n      a.lang.object(f).difference(c);\n      if (h && d !== !1) for (e in c) c.hasOwnProperty(e) && b.removeAttribute(e);\n      else for (e in c) c.hasOwnProperty(e) && b.setAttribute(e, c[e]);\n    }\n    function i(e, f) {\n      var g, i, j;\n      f.className &&\n        (f.toggle !== !1 && e.classList.contains(f.className)\n          ? e.classList.remove(f.className)\n          : (f.classRegExp && (e.className = e.className.replace(f.classRegExp, \"\")), e.classList.add(f.className)),\n        b(e) && e.removeAttribute(\"class\")),\n        f.styleProperty &&\n          (f.toggle !== !1 &&\n          e.style[a.browser.fixStyleKey(f.styleProperty)].trim().replace(/, /g, \",\") === f.styleValue\n            ? (e.style[a.browser.fixStyleKey(f.styleProperty)] = \"\")\n            : (e.style[a.browser.fixStyleKey(f.styleProperty)] = f.styleValue)),\n        c(e) && e.removeAttribute(\"style\"),\n        f.attribute &&\n          (\"object\" == typeof f.attribute ? (g = f.attribute) : ((g = {}), (g[f.attribute] = f.attributeValue || \"\")),\n          h(e, g, f.toggle)),\n        (i = f.nodeName ? H[f.nodeName.toLowerCase()] || f.nodeName.toLowerCase() : null),\n        (j = i ? a.dom.domNode(e).test({ query: i }) : !1),\n        (!f.nodeName || f.nodeName === F || j) &&\n          ((f.toggle !== !1 && j) || (!f.nodeName && e.nodeName === F)) &&\n          b(e) &&\n          c(e) &&\n          d(e) &&\n          a.dom.unwrap(e);\n    }\n    function j(b, c) {\n      var d = [];\n      return (\n        b.isCollapsed() ||\n          (d = d.concat(\n            b.getOwnNodes(\n              [3],\n              function (b) {\n                return !a.dom.domNode(b).is.emptyTextNode();\n              },\n              c\n            )\n          )),\n        d\n      );\n    }\n    function k(a, b, c, d) {\n      var e = a,\n        f = d ? b : l(b);\n      do {\n        if (1 === e.nodeType && m(e, f)) return e;\n        e = e.parentNode;\n      } while (e && e !== c);\n      return null;\n    }\n    function l(a) {\n      return {\n        nodeName: a.nodeName || null,\n        className: a.classRegExp ? null : a.className || null,\n        classRegExp: a.classRegExp || null,\n        styleProperty: a.styleProperty || null,\n      };\n    }\n    function m(b, c) {\n      var d;\n      if (c.nodeName) {\n        var e = H[c.nodeName.toLowerCase()] || c.nodeName.toLowerCase();\n        return a.dom.domNode(b).test({ query: e });\n      }\n      return (d = a.lang.object(c).clone()), (d.query = G), a.dom.domNode(b).test(d);\n    }\n    function n(b, c) {\n      var d = document.documentElement || document.body,\n        e = d.scrollTop,\n        f = d.scrollLeft;\n      rangy.getSelection(b.win);\n      rangy.getSelection(b.win).removeAllRanges();\n      try {\n        rangy.getSelection(b.win).addRange(c);\n      } catch (g) {}\n      (b.doc.activeElement && a.dom.contains(b.element, b.doc.activeElement)) ||\n        (b.element.focus(), (d.scrollTop = e), (d.scrollLeft = f), rangy.getSelection(b.win).addRange(c));\n    }\n    function o(a, b) {\n      var c = rangy.createRange(b.doc),\n        d = a[a.length - 1];\n      a[0] && d && (c.setStart(a[0], 0), c.setEnd(d, d.length), n(b, c));\n    }\n    function p(a, b, c, d) {\n      var e = rangy.createRange(a.doc);\n      b && (e.setStart(b, c), e.setEnd(b, \"undefined\" != typeof d ? d : c), n(a, e));\n    }\n    function q(a, b, c) {\n      var d,\n        e,\n        f,\n        g = j(a.selection),\n        h = [],\n        i = !1;\n      if (a.selection.isInThisEditable()) {\n        if (0 === g.length && a.selection.isCollapsed()) {\n          if (((f = a.selection.getSelection().anchorNode), !f)) return { nodes: [], partial: !1 };\n          3 === f.nodeType && (g = [f]);\n        }\n        g.length || ((e = a.selection.getOwnRanges()[0]), e && (g = [e.endContainer]));\n        for (var l = 0, m = g.length; m > l; l++) (d = k(g[l], b, a.element, c)), d ? h.push(d) : (i = !0);\n      }\n      return { nodes: h, partial: i };\n    }\n    function r(a) {\n      var b, c, d, e;\n      return a && ((b = a.anchorNode), (c = a.anchorOffset), b && 3 === b.nodeType && c > 0 && c < b.data.length)\n        ? ((d = b.data[c - 1]), (e = b.data[c]), /\\w/.test(d) && /\\w/.test(e))\n        : !1;\n    }\n    function s(b) {\n      var c,\n        d,\n        e,\n        f,\n        g,\n        h,\n        i = [];\n      if (\n        b &&\n        ((c = b.anchorNode),\n        (d = g = h = b.anchorOffset),\n        (e = c.ownerDocument),\n        (f = rangy.createRange(e)),\n        c && 3 === c.nodeType)\n      ) {\n        for (; g > 0 && /\\w/.test(c.data[g - 1]); ) g--;\n        for (; h < c.data.length && /\\w/.test(c.data[h]); ) h++;\n        return (\n          f.setStartAndEnd(c, g, h),\n          f.splitBoundaries(),\n          (i = f.getNodes([3], function (b) {\n            return !a.dom.domNode(b).is.emptyTextNode();\n          })),\n          { wordOffset: d - g, range: f, textNode: i[0] }\n        );\n      }\n      return !1;\n    }\n    function t(a, b) {\n      for (; b.firstChild; ) a.appendChild(b.firstChild);\n      b.parentNode.removeChild(b);\n    }\n    function u(a) {\n      for (var b = a.length; b--; )\n        a[b] &&\n          a[b].parentNode &&\n          (a[b].nextSibling && e(a[b], a[b].nextSibling) && t(a[b], a[b].nextSibling),\n          a[b].previousSibling && e(a[b], a[b].previousSibling) && t(a[b].previousSibling, a[b]));\n    }\n    function v(a, b, c) {\n      b.length > 0 && o(b, a), u(q(a, c).nodes), b.length > 0 && o(b, a);\n    }\n    function w(a, b, c, d) {\n      p(a, b, c), u(q(a, d).nodes), p(a, b, c);\n    }\n    function x(a, b) {\n      var c = f(a, b);\n      a.parentNode.insertBefore(c, a), c.appendChild(a);\n    }\n    function y(b, c, d) {\n      var e,\n        f = c.element,\n        g = k(b, d, f);\n      g && ((e = g.cloneNode(!1)), a.dom.domNode(b).escapeParent(g, e), i(e, d));\n    }\n    function z(b, c, d) {\n      var e = c.element,\n        f = k(b, d, e);\n      f && a.dom.domNode(b).escapeParent(f);\n    }\n    function A(a, b, c) {\n      var d = f(a.endContainer, c);\n      a.surroundContents(d), b.selection.selectNode(d);\n    }\n    function B(b, c, d, e) {\n      var f,\n        g,\n        h,\n        j,\n        l = q(b, e, !0),\n        m = b.selection.getSelection();\n      if (c.length) {\n        if (l.partial || e.toggle === !1)\n          for (j = c.length; j--; ) k(c[j], e, b.element) && y(c[j], b, e), k(c[j], e, b.element) || x(c[j], e);\n        else for (j = c.length; j--; ) y(c[j], b, e);\n        v(b, c, e);\n      } else if (e.toggle !== !1)\n        if (r(m)) (f = s(m)), (g = f.textNode), y(f.textNode, b, e), w(b, f.textNode, f.wordOffset, e);\n        else {\n          (g = b.doc.createTextNode(a.INVISIBLE_SPACE)),\n            (h = d.nodes[0].cloneNode(!1)),\n            h.appendChild(g),\n            b.selection.splitElementAtCaret(d.nodes[0], h),\n            i(h, e),\n            v(b, [g], e);\n          var n = b.selection.getSelection();\n          if (n.anchorNode && n.focusNode)\n            try {\n              n.collapseToEnd();\n            } catch (o) {}\n        }\n      else for (j = d.nodes.length; j--; ) i(d.nodes[j], e);\n    }\n    function C(b, c, d, e) {\n      var f,\n        g,\n        h,\n        i = b.selection.getSelection();\n      if (c.length) {\n        for (h = c.length; h--; ) z(c[h], b, e);\n        v(b, c, e);\n      } else {\n        for (f = i.anchorNode, g = i.anchorOffset, h = d.nodes.length; h--; ) a.dom.unwrap(d.nodes[h]);\n        w(b, f, g, e);\n      }\n    }\n    function D(a, b, c) {\n      var d,\n        e,\n        f = a.selection.getSelection();\n      if (b.length) {\n        for (e = b.length; e--; ) x(b[e], c);\n        v(a, b, c);\n      } else if (r(f)) (d = s(f)), x(d.textNode, c), w(a, d.textNode, d.wordOffset, c);\n      else {\n        var g = a.selection.getOwnRanges()[0];\n        g && A(g, a, c);\n      }\n    }\n    function E(a) {\n      return (a = \"string\" == typeof a ? { nodeName: a } : a), a.nodeName && (a.nodeName = a.nodeName.toUpperCase()), a;\n    }\n    var F = \"SPAN\",\n      G =\n        \"b, big, i, small, tt, abbr, acronym, cite, code, dfn, em, kbd, strong, samp, var, a, bdo, br, q, span, sub, sup, button, label, textarea, input, select, u\",\n      H = { b: \"b, strong\", strong: \"b, strong\", em: \"em, i\", i: \"em, i\" };\n    a.commands.formatInline = {\n      exec: function (a, b, c) {\n        (c = E(c)), a.element.normalize();\n        var d = j(a.selection, !0),\n          e = q(a, c);\n        e.nodes.length > 0 ? B(a, d, e, c) : D(a, d, c), a.element.normalize();\n      },\n      remove: function (a, b, c) {\n        (c = E(c)), a.element.normalize();\n        var d = j(a.selection, !0),\n          e = q(a, c);\n        e.nodes.length > 0 && C(a, d, e, c), a.element.normalize();\n      },\n      state: function (a, b, c) {\n        c = E(c);\n        var d = q(a, c, !0).nodes;\n        return 0 === d.length ? !1 : d;\n      },\n    };\n  })(wysihtml),\n  (function (a) {\n    a.commands.indentList = {\n      exec: function (a, b, c) {\n        var d = a.selection.getSelectionParentsByTag(\"LI\");\n        return d ? this.tryToPushLiLevel(d, a.selection) : !1;\n      },\n      state: function (a, b) {\n        return !1;\n      },\n      tryToPushLiLevel: function (b, c) {\n        var d,\n          e,\n          f,\n          g,\n          h,\n          i = !1;\n        return (\n          c.executeAndRestoreRangy(function () {\n            for (var c = b.length; c--; )\n              (g = b[c]),\n                (d = \"OL\" === g.parentNode.nodeName ? \"OL\" : \"UL\"),\n                (e = g.ownerDocument.createElement(d)),\n                (f = a.dom.domNode(g).prev({ nodeTypes: [a.ELEMENT_NODE] })),\n                (h = f ? f.querySelector(\"ul, ol\") : null),\n                f && (h ? h.appendChild(g) : (e.appendChild(g), f.appendChild(e)), (i = !0));\n          }),\n          i\n        );\n      },\n    };\n  })(wysihtml),\n  (function (a) {\n    a.commands.insertHTML = {\n      exec: function (a, b, c) {\n        a.selection.insertHTML(c);\n      },\n      state: function () {\n        return !1;\n      },\n    };\n  })(wysihtml),\n  (function (a) {\n    var b = \"<br>\" + (a.browser.needsSpaceAfterLineBreak() ? \" \" : \"\");\n    a.commands.insertLineBreak = {\n      exec: function (a, c) {\n        a.selection.insertHTML(b);\n      },\n      state: function () {\n        return !1;\n      },\n    };\n  })(wysihtml),\n  (wysihtml.commands.insertList = (function (a) {\n    var b = function (a, b) {\n        if (a && a.nodeName) {\n          \"string\" == typeof b && (b = [b]);\n          for");
        builder.append(" (var c = b.length; c--; ) if (a.nodeName === b[c]) return !0;\n        }\n        return !1;\n      },\n      c = function (c, d, e) {\n        var f = { el: null, other: !1 };\n        if (c) {\n          var g = a.dom.getParentElement(c, { query: \"li\" }, !1, e.element),\n            h = \"UL\" === d ? \"OL\" : \"UL\";\n          b(c, d)\n            ? (f.el = c)\n            : b(c, h)\n            ? (f = { el: c, other: !0 })\n            : g &&\n              (b(g.parentNode, d)\n                ? (f.el = g.parentNode)\n                : b(g.parentNode, h) && (f = { el: g.parentNode, other: !0 }));\n        }\n        return f.el && !e.element.contains(f.el) && (f.el = null), f;\n      },\n      d = function (b, c, d) {\n        var e,\n          g,\n          h = \"UL\" === c ? \"OL\" : \"UL\";\n        d.selection.executeAndRestoreRangy(function () {\n          if (((e = f(h, d)), e.length)) for (var i = e.length; i--; ) a.dom.renameElement(e[i], c.toLowerCase());\n          else {\n            g = f([\"OL\", \"UL\"], d);\n            for (var j = g.length; j--; ) a.dom.resolveList(g[j], d.config.useLineBreaks);\n            0 === g.length && a.dom.resolveList(b, d.config.useLineBreaks);\n          }\n        });\n      },\n      e = function (b, c, d) {\n        var e = \"UL\" === c ? \"OL\" : \"UL\";\n        d.selection.executeAndRestoreRangy(function () {\n          for (var g = [b].concat(f(e, d)), h = g.length; h--; ) a.dom.renameElement(g[h], c.toLowerCase());\n        });\n      },\n      f = function (a, c) {\n        for (var d = c.selection.getOwnRanges(), e = [], f = d.length; f--; )\n          e = e.concat(\n            d[f].getNodes([1], function (c) {\n              return b(c, a);\n            })\n          );\n        return e;\n      },\n      g = function (b, c) {\n        var d,\n          e,\n          f = rangy.saveSelection(c.win),\n          g = \"_wysihtml-temp-\" + new Date().getTime();\n        c.commands.exec(\"formatBlock\", { nodeName: \"div\", className: g });\n        var h = c.element.querySelector(\".\" + g);\n        (h.innerHTML = h.innerHTML.replace(a.INVISIBLE_SPACE_REG_EXP, \"\")),\n          h &&\n            ((d = /^(\\s|(<br>))+$/i.test(h.innerHTML)),\n            (e = a.dom.convertToList(h, b.toLowerCase(), c.parent.config.classNames.uneditableContainer)),\n            f && rangy.restoreSelection(f),\n            d && c.selection.selectNode(e.querySelector(\"li\"), !0));\n      };\n    return {\n      exec: function (b, f, h) {\n        var i,\n          j,\n          k = b.doc,\n          l = \"OL\" === h ? \"insertOrderedList\" : \"insertUnorderedList\",\n          m = b.selection.getSelection(),\n          n =\n            1 === m.anchorNode.nodeType && m.anchorNode.firstChild\n              ? m.anchorNode.childNodes[m.anchorOffset]\n              : m.anchorNode,\n          o =\n            1 === m.focusNode.nodeType && m.focusNode.firstChild\n              ? m.focusNode.childNodes[m.focusOffset] || m.focusNode.lastChild\n              : m.focusNode;\n        m.isBackwards() && (n = [o, (o = n)][0]),\n          a.dom.domNode(o).is.emptyTextNode(!0) &&\n            o &&\n            (o = a.dom.domNode(o).prev({ nodeTypes: [1, 3], ignoreBlankTexts: !0 })),\n          a.dom.domNode(n).is.emptyTextNode(!0) &&\n            n &&\n            (n = a.dom.domNode(n).next({ nodeTypes: [1, 3], ignoreBlankTexts: !0 })),\n          (i = n && o ? (n === o ? n : a.dom.domNode(n).commonAncestor(o, b.element)) : b.selection.getSelectedNode()),\n          (j = c(i, h, b)),\n          j.el\n            ? j.other\n              ? e(j.el, h, b)\n              : d(j.el, h, b)\n            : b.commands.support(l)\n            ? k.execCommand(l, !1, null)\n            : g(h, b);\n      },\n      state: function (a, b, d) {\n        var e = a.selection.getSelectedNode(),\n          f = c(e, d, a);\n        return f.el && !f.other ? f.el : !1;\n      },\n    };\n  })(wysihtml)),\n  (function (a) {\n    a.commands.outdentList = {\n      exec: function (a, b, c) {\n        var d = a.selection.getSelectionParentsByTag(\"LI\");\n        return d ? this.tryToPullLiLevel(d, a) : !1;\n      },\n      state: function (a, b) {\n        return !1;\n      },\n      tryToPullLiLevel: function (b, c) {\n        var d,\n          e,\n          f,\n          g,\n          h,\n          i = !1,\n          j = this;\n        return (\n          c.selection.executeAndRestoreRangy(function () {\n            for (var k = b.length; k--; )\n              if (((g = b[k]), g.parentNode && ((d = g.parentNode), \"OL\" === d.tagName || \"UL\" === d.tagName))) {\n                if (\n                  ((i = !0),\n                  (e = a.dom.getParentElement(d.parentNode, { query: \"ol, ul\" }, !1, c.element)),\n                  (f = a.dom.getParentElement(d.parentNode, { query: \"li\" }, !1, c.element)),\n                  e && f)\n                )\n                  g.nextSibling && ((h = j.getAfterList(d, g)), g.appendChild(h)), e.insertBefore(g, f.nextSibling);\n                else {\n                  g.nextSibling && ((h = j.getAfterList(d, g)), g.appendChild(h));\n                  for (var l = g.childNodes.length; l--; ) d.parentNode.insertBefore(g.childNodes[l], d.nextSibling);\n                  d.parentNode.insertBefore(document.createElement(\"br\"), d.nextSibling), g.parentNode.removeChild(g);\n                }\n                0 === d.childNodes.length && d.parentNode.removeChild(d);\n              }\n          }),\n          i\n        );\n      },\n      getAfterList: function (a, b) {\n        for (var c = a.nodeName, d = document.createElement(c); b.nextSibling; ) d.appendChild(b.nextSibling);\n        return d;\n      },\n    };\n  })(wysihtml),\n  (function (a) {\n    a.commands.redo = {\n      exec: function (a) {\n        return a.undoManager.redo();\n      },\n      state: function (a) {\n        return !1;\n      },\n    };\n  })(wysihtml),\n  (function (a) {\n    var b = { nodeName: \"A\" };\n    a.commands.removeLink = {\n      exec: function (c, d) {\n        a.commands.formatInline.remove(c, d, b);\n      },\n      state: function (c, d) {\n        return a.commands.formatInline.state(c, d, b);\n      },\n    };\n  })(wysihtml),\n  (function (a) {\n    a.commands.undo = {\n      exec: function (a) {\n        return a.undoManager.undo();\n      },\n      state: function (a) {\n        return !1;\n      },\n    };\n  })(wysihtml),\n  (function (a) {\n    var b = 90,\n      c = 89,\n      d = 8,\n      e = 46,\n      f = 25,\n      g = \"data-wysihtml-selection-node\",\n      h = \"data-wysihtml-selection-offset\",\n      i =\n        ('<span id=\"_wysihtml-undo\" class=\"_wysihtml-temp\">' + a.INVISIBLE_SPACE + \"</span>\",\n        '<span id=\"_wysihtml-redo\" class=\"_wysihtml-temp\">' + a.INVISIBLE_SPACE + \"</span>\",\n        a.dom);\n    a.UndoManager = a.lang.Dispatcher.extend({\n      constructor: function (a) {\n        (this.editor = a),\n          (this.composer = a.composer),\n          (this.element = this.composer.element),\n          (this.position = 0),\n          (this.historyStr = []),\n          (this.historyDom = []),\n          this.transact(),\n          this._observe();\n      },\n      _observe: function () {\n        var a,\n          f = this;\n        this.composer.sandbox.getDocument();\n        i.observe(this.element, \"keydown\", function (a) {\n          if (!a.altKey && (a.ctrlKey || a.metaKey)) {\n            var d = a.keyCode,\n              e = d === b && !a.shiftKey,\n              g = (d === b && a.shiftKey) || d === c;\n            e ? (f.undo(), a.preventDefault()) : g && (f.redo(), a.preventDefault());\n          }\n        }),\n          i.observe(this.element, \"keydown\", function (b) {\n            var c = b.keyCode;\n            c !== a && ((a = c), (c === d || c === e) && f.transact());\n          }),\n          this.editor\n            .on(\"newword:composer\", function () {\n              f.transact();\n            })\n            .on(\"beforecommand:composer\", function () {\n              f.transact();\n            });\n      },\n      transact: function () {\n        var b,\n          c,\n          d,\n          e,\n          i,\n          j = this.historyStr[this.position - 1],\n          k = this.composer.getValue(!1, !1),\n          l = this.element.offsetWidth > 0 && this.element.offsetHeight > 0;\n        if (k !== j) {\n          var m = (this.historyStr.length = this.historyDom.length = this.position);\n          m > f && (this.historyStr.shift(), this.historyDom.shift(), this.position--),\n            this.position++,\n            l &&\n              ((b = this.composer.selection.getRange()),\n              (c = b && b.startContainer ? b.startContainer : this.element),\n              (d = b && b.startOffset ? b.startOffset : 0),\n              c.nodeType === a.ELEMENT_NODE ? (e = c) : ((e = c.parentNode), (i = this.getChildNodeIndex(e, c))),\n              e.setAttribute(h, d),\n              \"undefined\" != typeof i && e.setAttribute(g, i));\n          var n = this.element.cloneNode(!!k);\n          this.historyDom.push(n), this.historyStr.push(k), e && (e.removeAttribute(h), e.removeAttribute(g));\n        }\n      },\n      undo: function () {\n        this.transact(),\n          this.undoPossible() && (this.set(this.historyDom[--this.position - 1]), this.editor.fire(\"undo:composer\"));\n      },\n      redo: function () {\n        this.redoPossible() && (this.set(this.historyDom[++this.position - 1]), this.editor.fire(\"redo:composer\"));\n      },\n      undoPossible: function () {\n        return this.position > 1;\n      },\n      redoPossible: function () {\n        return this.position < this.historyStr.length;\n      },\n      set: function (a) {\n        this.element.innerHTML = \"\";\n        for (var b = 0, c = a.childNodes, d = a.childNodes.length; d > b; b++)\n          this.element.appendChild(c[b].cloneNode(!0));\n        var e, f, i;\n        a.hasAttribute(h)\n          ? ((e = a.getAttribute(h)), (i = a.getAttribute(g)), (f = this.element))\n          : ((f = this.element.querySelector(\"[\" + h + \"]\") || this.element),\n            (e = f.getAttribute(h)),\n            (i = f.getAttribute(g)),\n            f.removeAttribute(h),\n            f.removeAttribute(g)),\n          null !== i && (f = this.getChildNodeByIndex(f, +i)),\n          this.composer.selection.set(f, e);\n      },\n      getChildNodeIndex: function (a, b) {\n        for (var c = 0, d = a.childNodes, e = d.length; e > c; c++) if (d[c] === b) return c;\n      },\n      getChildNodeByIndex: function (a, b) {\n        return a.childNodes[b];\n      },\n    });\n  })(wysihtml),\n  (wysihtml.views.View = Base.extend({\n    constructor: function (a, b, c) {\n      (this.parent = a), (this.element = b), (this.config = c), this.config.noTextarea || this._observeViewChange();\n    },\n    _observeViewChange: function () {\n      var a = this;\n      this.parent.on(\"beforeload\", function () {\n        a.parent.on(\"change_view\", function (b) {\n          b === a.name\n            ? ((a.parent.currentView = a),\n              a.show(),\n              setTimeout(function () {\n                a.focus();\n              }, 0))\n            : a.hide();\n        });\n      });\n    },\n    focus: function () {\n      if (\n        !this.element ||\n        !this.element.ownerDocument ||\n        this.element.ownerDocument.querySelector(\":focus\") !== this.element\n      )\n        try {\n          this.element && this.element.focus();\n        } catch (a) {}\n    },\n    hide: function () {\n      this.element.style.display = \"none\";\n    },\n    show: function () {\n      this.element.style.display = \"\";\n    },\n    disable: function () {\n      this.element.setAttribute(\"disabled\", \"disabled\");\n    },\n    enable: function () {\n      this.element.removeAttribute(\"disabled\");\n    },\n  })),\n  (function (a) {\n    var b = a.dom,\n      c = a.browser;\n    a.views.Composer = a.views.View.extend({\n      name: \"composer\",\n      constructor: function (a, b, c) {\n        this.base(a, b, c),\n          this.config.noTextarea ? (this.editableArea = b) : (this.textarea = this.parent.textarea),\n          this.config.contentEditableMode ? this._initContentEditableArea() : this._initSandbox();\n      },\n      clear: function () {\n        this.element.innerHTML = c.displaysCaretInEmptyContentEditableCorrectly() ? \"\" : \"<br>\";\n      },\n      getValue: function (b, c) {\n        var d = this.isEmpty() ? \"\" : a.quirks.getCorrectInnerHTML(this.element);\n        return b !== !1 && (d = this.parent.parse(d, c === !1 ? !1 : !0)), d;\n      },\n      setValue: function (a, b) {\n        b !== !1 && (a = this.parent.parse(a));\n        try {\n          this.element.innerHTML = a;\n        } catch (c) {\n          this.element.innerText = a;\n        }\n      },\n      cleanUp: function (a) {\n        var b;\n        this.selection && this.selection.isInThisEditable() && (b = rangy.saveSelection(this.win)),\n          this.parent.parse(this.element, void 0, a),\n          b && rangy.restoreSelection(b);\n      },\n      show: function () {\n        (this.editableArea.style.display = this._displayStyle || \"\"),\n          this.config.noTextarea || this.textarea.element.disabled || (this.disable(), this.enable());\n      },\n      hide: function () {\n        (this._displayStyle = b.getStyle(\"display\").from(this.editableArea)),\n          \"none\" === this._displayStyle && (this._displayStyle = null),\n          (this.editableArea.style.display = \"none\");\n      },\n      disable: function () {\n        this.parent.fire(\"disable:composer\"), this.element.removeAttribute(\"contentEditable\");\n      },\n      enable: function () {\n        this.parent.fire(\"enable:composer\"), this.element.setAttribute(\"contentEditable\", \"true\");\n      },\n      focus: function (b) {\n        a.browser.doesAsyncFocus() && this.hasPlaceholderSet() && this.clear(), this.base();\n        var c = this.element.lastChild;\n        b &&\n          c &&\n          this.selection &&\n          (\"BR\" === c.nodeName\n            ? this.selection.setBefore(this.element.lastChild)\n            : this.selection.setAfter(this.element.lastChild));\n      },\n      getScrollPos: function () {\n        if (this.doc && this.win) {\n          var a = {};\n          return (\n            \"undefined\" != typeof this.win.pageYOffset\n              ? (a.y = this.win.pageYOffset)\n              : (a.y = (this.doc.documentElement || this.doc.body.parentNode || this.doc.body).scrollTop),\n            \"undefined\" != typeof this.win.pageXOffset\n              ? (a.x = this.win.pageXOffset)\n              : (a.x = (this.doc.documentElement || this.doc.body.parentNode || this.doc.body).scrollLeft),\n            a\n          );\n        }\n      },\n      setScrollPos: function (a) {\n        a && \"undefined\" != typeof a.x && \"undefined\" != typeof a.y && this.win.scrollTo(a.x, a.y);\n      },\n      getTextContent: function () {\n        return b.getTextContent(this.element);\n      },\n      hasPlaceholderSet: function () {\n        return (\n          this.getTextContent() ==\n            (this.config.noTextarea\n              ? this.editableArea.getAttribute(\"data-placeholder\")\n              : this.textarea.element.getAttribute(\"placeholder\")) && this.placeholderSet\n        );\n      },\n      isEmpty: function () {\n        var a = this.element.innerHTML.toLowerCase();\n        return (\n          /^(\\s|<br>|<\\/br>|<p>|<\\/p>)*$/i.test(a) ||\n          \"\" === a ||\n          \"<br>\" === a ||\n          \"<p></p>\" === a ||\n          \"<p><br></p>\" === a ||\n          this.hasPlaceholderSet()\n        );\n      },\n      _initContentEditableArea: function () {\n        var a = this;\n        this.config.noTextarea\n          ? (this.sandbox = new b.ContentEditableArea(\n              function () {\n                a._create();\n              },\n              { className: this.config.classNames.sandbox },\n              this.editableArea\n            ))\n          : ((this.sandbox = new b.ContentEditableArea(\n              function () {\n                a._create();\n              },\n              { className: this.config.classNames.sandbox }\n            )),\n            (this.editableArea = this.sandbox.getContentEditable()),\n            b.insert(this.editableArea).after(this.textarea.element),\n            this._createWysiwygFormField());\n      },\n      _initSandbox: function () {\n        var a = this;\n        (this.sandbox = new b.Sandbox(\n          function () {\n            a._create();\n          },\n          { stylesheets: this.config.stylesheets, className: this.config.classNames.sandbox }\n        )),\n          (this.editableArea = this.sandbox.getIframe());\n        var c = this.te");
        builder.append("xtarea.element;\n        b.insert(this.editableArea).after(c), this._createWysiwygFormField();\n      },\n      _createWysiwygFormField: function () {\n        if (this.textarea.element.form) {\n          var a = document.createElement(\"input\");\n          (a.type = \"hidden\"), (a.name = \"_wysihtml_mode\"), (a.value = 1), b.insert(a).after(this.textarea.element);\n        }\n      },\n      _create: function () {\n        var d = this;\n        (this.doc = this.sandbox.getDocument()),\n          (this.win = this.sandbox.getWindow()),\n          (this.element = this.config.contentEditableMode ? this.sandbox.getContentEditable() : this.doc.body),\n          this.config.noTextarea\n            ? this.cleanUp()\n            : ((this.textarea = this.parent.textarea), (this.element.innerHTML = this.textarea.getValue(!0, !1))),\n          (this.selection = new a.Selection(this.parent, this.element, this.config.classNames.uneditableContainer)),\n          (this.commands = new a.Commands(this.parent)),\n          this.config.noTextarea ||\n            b\n              .copyAttributes([\"className\", \"spellcheck\", \"title\", \"lang\", \"dir\", \"accessKey\"])\n              .from(this.textarea.element)\n              .to(this.element),\n          this._initAutoLinking(),\n          b.addClass(this.element, this.config.classNames.composer),\n          this.config.style && !this.config.contentEditableMode && this.style(),\n          this.observe();\n        var e = this.config.name;\n        e && (b.addClass(this.element, e), this.config.contentEditableMode || b.addClass(this.editableArea, e)),\n          this.enable(),\n          !this.config.noTextarea && this.textarea.element.disabled && this.disable();\n        var f =\n          \"string\" == typeof this.config.placeholder\n            ? this.config.placeholder\n            : this.config.noTextarea\n            ? this.editableArea.getAttribute(\"data-placeholder\")\n            : this.textarea.element.getAttribute(\"placeholder\");\n        f && b.simulatePlaceholder(this.parent, this, f, this.config.classNames.placeholder),\n          this.commands.exec(\"styleWithCSS\", !1),\n          this._initObjectResizing(),\n          this._initUndoManager(),\n          this._initLineBreaking(),\n          this.config.noTextarea ||\n            (!this.textarea.element.hasAttribute(\"autofocus\") &&\n              document.querySelector(\":focus\") != this.textarea.element) ||\n            c.isIos() ||\n            setTimeout(function () {\n              d.focus(!0);\n            }, 100),\n          c.clearsContentEditableCorrectly() || a.quirks.ensureProperClearing(this),\n          this.initSync && this.config.sync && this.initSync(),\n          this.config.noTextarea || this.textarea.hide(),\n          this.parent.fire(\"beforeload\").fire(\"load\");\n      },\n      _initAutoLinking: function () {\n        var d = this,\n          e = c.canDisableAutoLinking(),\n          f = c.doesAutoLinkingInContentEditable();\n        if ((e && this.commands.exec(\"AutoUrlDetect\", !1, !1), this.config.autoLink)) {\n          (!f || (f && e)) &&\n            (this.parent.on(\"newword:composer\", function () {\n              if (b.getTextContent(d.element).match(b.autoLink.URL_REG_EXP)) {\n                for (\n                  var c = d.selection.getSelectedNode(),\n                    e = d.element.querySelectorAll(\".\" + d.config.classNames.uneditableContainer),\n                    f = !1,\n                    g = e.length;\n                  g--;\n\n                )\n                  a.dom.contains(e[g], c) && (f = !0);\n                f || b.autoLink(c, [d.config.classNames.uneditableContainer]);\n              }\n            }),\n            b.observe(this.element, \"blur\", function () {\n              b.autoLink(d.element, [d.config.classNames.uneditableContainer]);\n            }));\n          var g = this.sandbox.getDocument().getElementsByTagName(\"a\"),\n            h = b.autoLink.URL_REG_EXP,\n            i = function (c) {\n              var d = a.lang.string(b.getTextContent(c)).trim();\n              return \"www.\" === d.substr(0, 4) && (d = \"http://\" + d), d;\n            };\n          b.observe(this.element, \"keydown\", function (a) {\n            if (g.length) {\n              var c,\n                e = d.selection.getSelectedNode(a.target.ownerDocument),\n                f = b.getParentElement(e, { query: \"a\" }, 4);\n              f &&\n                ((c = i(f)),\n                setTimeout(function () {\n                  var a = i(f);\n                  a !== c && a.match(h) && f.setAttribute(\"href\", a);\n                }, 0));\n            }\n          });\n        }\n      },\n      _initObjectResizing: function () {\n        if ((this.commands.exec(\"enableObjectResizing\", !0), c.supportsEvent(\"resizeend\"))) {\n          var d = [\"width\", \"height\"],\n            e = d.length,\n            f = this.element;\n          b.observe(f, \"resizeend\", function (b) {\n            var c,\n              g = b.target || b.srcElement,\n              h = g.style,\n              i = 0;\n            if (\"IMG\" === g.nodeName) {\n              for (; e > i; i++) (c = d[i]), h[c] && (g.setAttribute(c, parseInt(h[c], 10)), (h[c] = \"\"));\n              a.quirks.redraw(f);\n            }\n          });\n        }\n      },\n      _initUndoManager: function () {\n        this.undoManager = new a.UndoManager(this.parent);\n      },\n      _initLineBreaking: function () {\n        function d(a) {\n          var c = b.getParentElement(a, { query: \"p, div\" }, 2);\n          c &&\n            b.contains(e.element, c) &&\n            e.selection.executeAndRestoreRangy(function () {\n              e.config.useLineBreaks\n                ? ((!c.firstChild ||\n                    (c.firstChild === c.lastChild &&\n                      1 === c.firstChild.nodeType &&\n                      c.firstChild.classList.contains(\"rangySelectionBoundary\"))) &&\n                    c.appendChild(e.doc.createElement(\"br\")),\n                  b.replaceWithChildNodes(c))\n                : \"P\" !== c.nodeName && b.renameElement(c, \"p\");\n            });\n        }\n        var e = this,\n          f = \"li, p, h1, h2, h3, h4, h5, h6\",\n          g = \"ul, ol, menu\";\n        this.config.useLineBreaks ||\n          b.observe(this.element, [\"focus\"], function () {\n            e.isEmpty() &&\n              setTimeout(function () {\n                var a = e.doc.createElement(\"P\");\n                (e.element.innerHTML = \"\"),\n                  e.element.appendChild(a),\n                  c.displaysCaretInEmptyContentEditableCorrectly()\n                    ? e.selection.selectNode(a, !0)\n                    : ((a.innerHTML = \"<br>\"), e.selection.setBefore(a.firstChild));\n              }, 0);\n          }),\n          b.observe(this.element, \"keydown\", function (c) {\n            var h = c.keyCode;\n            if (!(c.shiftKey || c.ctrlKey || c.defaultPrevented || (h !== a.ENTER_KEY && h !== a.BACKSPACE_KEY))) {\n              var i = b.getParentElement(e.selection.getSelectedNode(), { query: f }, 4);\n              return i\n                ? void setTimeout(function () {\n                    var c,\n                      f = e.selection.getSelectedNode();\n                    if (\"LI\" === i.nodeName) {\n                      if (!f) return;\n                      (c = b.getParentElement(f, { query: g }, 2)), c || d(f);\n                    }\n                    h === a.ENTER_KEY && i.nodeName.match(/^H[1-6]$/) && d(f);\n                  }, 0)\n                : void (\n                    e.config.useLineBreaks &&\n                    h === a.ENTER_KEY &&\n                    !a.browser.insertsLineBreaksOnReturn() &&\n                    (c.preventDefault(), e.commands.exec(\"insertLineBreak\"))\n                  );\n            }\n          });\n      },\n    });\n  })(wysihtml),\n  (function (a) {\n    var b = a.dom,\n      c = document,\n      d = window,\n      e = c.createElement(\"div\"),\n      f = [\n        \"background-color\",\n        \"color\",\n        \"cursor\",\n        \"font-family\",\n        \"font-size\",\n        \"font-style\",\n        \"font-variant\",\n        \"font-weight\",\n        \"line-height\",\n        \"letter-spacing\",\n        \"text-align\",\n        \"text-decoration\",\n        \"text-indent\",\n        \"text-rendering\",\n        \"word-break\",\n        \"word-wrap\",\n        \"word-spacing\",\n      ],\n      g = [\n        \"background-color\",\n        \"border-collapse\",\n        \"border-bottom-color\",\n        \"border-bottom-style\",\n        \"border-bottom-width\",\n        \"border-left-color\",\n        \"border-left-style\",\n        \"border-left-width\",\n        \"border-right-color\",\n        \"border-right-style\",\n        \"border-right-width\",\n        \"border-top-color\",\n        \"border-top-style\",\n        \"border-top-width\",\n        \"clear\",\n        \"display\",\n        \"float\",\n        \"margin-bottom\",\n        \"margin-left\",\n        \"margin-right\",\n        \"margin-top\",\n        \"outline-color\",\n        \"outline-offset\",\n        \"outline-width\",\n        \"outline-style\",\n        \"padding-left\",\n        \"padding-right\",\n        \"padding-top\",\n        \"padding-bottom\",\n        \"position\",\n        \"top\",\n        \"left\",\n        \"right\",\n        \"bottom\",\n        \"z-index\",\n        \"vertical-align\",\n        \"text-align\",\n        \"-webkit-box-sizing\",\n        \"-moz-box-sizing\",\n        \"-ms-box-sizing\",\n        \"box-sizing\",\n        \"-webkit-box-shadow\",\n        \"-moz-box-shadow\",\n        \"-ms-box-shadow\",\n        \"box-shadow\",\n        \"-webkit-border-top-right-radius\",\n        \"-moz-border-radius-topright\",\n        \"border-top-right-radius\",\n        \"-webkit-border-bottom-right-radius\",\n        \"-moz-border-radius-bottomright\",\n        \"border-bottom-right-radius\",\n        \"-webkit-border-bottom-left-radius\",\n        \"-moz-border-radius-bottomleft\",\n        \"border-bottom-left-radius\",\n        \"-webkit-border-top-left-radius\",\n        \"-moz-border-radius-topleft\",\n        \"border-top-left-radius\",\n        \"width\",\n        \"height\",\n      ],\n      h = [\n        \"html                 { height: 100%; }\",\n        \"body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }\",\n        \"body > p:first-child { margin-top: 0; }\",\n        \"._wysihtml-temp     { display: none; }\",\n        a.browser.isGecko\n          ? \"body.placeholder { color: graytext !important; }\"\n          : \"body.placeholder { color: #a9a9a9 !important; }\",\n        \"img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }\",\n      ],\n      i = function (a) {\n        if (a.setActive)\n          try {\n            a.setActive();\n          } catch (e) {}\n        else {\n          var f = a.style,\n            g = c.documentElement.scrollTop || c.body.scrollTop,\n            h = c.documentElement.scrollLeft || c.body.scrollLeft,\n            i = { position: f.position, top: f.top, left: f.left, WebkitUserSelect: f.WebkitUserSelect };\n          b.setStyles({ position: \"absolute\", top: \"-99999px\", left: \"-99999px\", WebkitUserSelect: \"none\" }).on(a),\n            a.focus(),\n            b.setStyles(i).on(a),\n            d.scrollTo && d.scrollTo(h, g);\n        }\n      };\n    a.views.Composer.prototype.style = function () {\n      var d,\n        j = this,\n        k = c.querySelector(\":focus\"),\n        l = this.textarea.element,\n        m = l.hasAttribute(\"placeholder\"),\n        n = m && l.getAttribute(\"placeholder\"),\n        o = l.style.display,\n        p = l.disabled;\n      (this.focusStylesHost = e.cloneNode(!1)),\n        (this.blurStylesHost = e.cloneNode(!1)),\n        (this.disabledStylesHost = e.cloneNode(!1)),\n        m && l.removeAttribute(\"placeholder\"),\n        l === k && l.blur(),\n        (l.disabled = !1),\n        (l.style.display = d = \"none\"),\n        ((l.getAttribute(\"rows\") && \"auto\" === b.getStyle(\"height\").from(l)) ||\n          (l.getAttribute(\"cols\") && \"auto\" === b.getStyle(\"width\").from(l))) &&\n          (l.style.display = d = o),\n        b.copyStyles(g).from(l).to(this.editableArea).andTo(this.blurStylesHost),\n        b.copyStyles(f).from(l).to(this.element).andTo(this.blurStylesHost),\n        b.insertCSS(h).into(this.element.ownerDocument),\n        (l.disabled = !0),\n        b.copyStyles(g).from(l).to(this.disabledStylesHost),\n        b.copyStyles(f).from(l).to(this.disabledStylesHost),\n        (l.disabled = p),\n        (l.style.display = o),\n        i(l),\n        (l.style.display = d),\n        b.copyStyles(g).from(l).to(this.focusStylesHost),\n        b.copyStyles(f).from(l).to(this.focusStylesHost),\n        (l.style.display = o),\n        b.copyStyles([\"display\"]).from(l).to(this.editableArea);\n      var q = a.lang.array(g).without([\"display\"]);\n      return (\n        k ? i(k) : l.blur(),\n        m && l.setAttribute(\"placeholder\", n),\n        this.parent.on(\"focus:composer\", function () {\n          b.copyStyles(q).from(j.focusStylesHost).to(j.editableArea),\n            b.copyStyles(f).from(j.focusStylesHost).to(j.element);\n        }),\n        this.parent.on(\"blur:composer\", function () {\n          b.copyStyles(q).from(j.blurStylesHost).to(j.editableArea),\n            b.copyStyles(f).from(j.blurStylesHost).to(j.element);\n        }),\n        this.parent.observe(\"disable:composer\", function () {\n          b.copyStyles(q).from(j.disabledStylesHost).to(j.editableArea),\n            b.copyStyles(f).from(j.disabledStylesHost).to(j.element);\n        }),\n        this.parent.observe(\"enable:composer\", function () {\n          b.copyStyles(q).from(j.blurStylesHost).to(j.editableArea),\n            b.copyStyles(f).from(j.blurStylesHost).to(j.element);\n        }),\n        this\n      );\n    };\n  })(wysihtml),\n  (function (a) {\n    var b = a.dom,\n      c = b.domNode,\n      d = a.browser,\n      e = { 66: \"bold\", 73: \"italic\", 85: \"underline\" },\n      f = {\n        addListeners: function (a, b, c) {\n          for (var d = 0, e = b.length; e > d; d++) a.addEventListener(b[d], c, !1);\n        },\n        removeListeners: function (a, b, c) {\n          for (var d = 0, e = b.length; e > d; d++) a.removeEventListener(b[d], c, !1);\n        },\n        fixLastBrDeletionInTable: function (b, c) {\n          if (b.selection.caretIsInTheEndOfNode()) {\n            var d = b.selection.getSelection(),\n              e = d.anchorNode;\n            if (e && 1 === e.nodeType && (a.dom.getParentElement(e, { query: \"td, th\" }, !1, b.element) || c)) {\n              var f = e.childNodes[d.anchorOffset];\n              if (f && (1 === f.nodeType) & (\"BR\" === f.nodeName)) return f.parentNode.removeChild(f), !0;\n            }\n          }\n          return !1;\n        },\n        handleUneditableDeletion: function (a) {\n          var b = a.selection.getBeforeSelection(!0);\n          if (\n            b &&\n            (\"element\" === b.type || \"leafnode\" === b.type) &&\n            1 === b.node.nodeType &&\n            b.node.classList.contains(a.config.classNames.uneditableContainer)\n          ) {\n            if (f.fixLastBrDeletionInTable(a, !0)) return !0;\n            try {\n              var c = new CustomEvent(\"wysihtml:uneditable:delete\", { bubbles: !0, cancelable: !1 });\n              b.node.dispatchEvent(c);\n            } catch (d) {}\n            return b.node.parentNode.removeChild(b.node), !0;\n          }\n          return !1;\n        },\n        fixDeleteInTheBeginningOfBlock: function (b) {\n          var d = b.selection,\n            e = d.getPreviousNode();\n          if (\n            d.caretIsFirstInSelection(a.browser.usesControlRanges()) &&\n            e &&\n            1 === e.nodeType &&\n            a.dom.domNode(e).is.block() &&\n            !c(e).test({ query: \"ol, ul, table, tr, dl\" })\n          ) {\n            if (/^\\s*$/.test(e.textContent || e.innerText)) return e.parentNode.removeChild(e), !0;\n            if (e.lastChild) {\n              var f = e.lastChild,\n                g = d.getSelectedNode(),\n                h = c(e).commonAncestor(g, b.element),\n                i = a.dom.getParentElement(\n                  g,\n                  { query: \"h1, h2, h3, h4, h5, h6, p, pre, div, blockquote\" },\n                  !1,\n                  h || b.element\n                );\n              if (i) return c(i).transferContentTo(e, !0), d.setAfter(f), !0;\n              if (a.browser.usesControlRanges())\n                return (g = d.getCaretNode()), c(g).transferContentTo(e, !0), d.setAfter(f), !0;\n            }\n          }\n          return !1;\n        },\n        fixDeleteInTheBeginningOfLi: function (b) {\n          if (a.browser.ha");
        builder.append("sLiDeletingProblem()) {\n            var d,\n              e,\n              d,\n              f,\n              g = b.selection.getSelection(),\n              h = g.anchorNode,\n              i = b.selection.caretIsFirstInSelection();\n            if (\n              (3 === h.nodeType &&\n                0 === g.anchorOffset &&\n                h === h.parentNode.firstChild &&\n                ((h = h.parentNode), (i = !0)),\n              i &&\n                h &&\n                1 === h.nodeType &&\n                \"LI\" === h.nodeName &&\n                ((d = c(h).prev({ nodeTypes: [1, 3], ignoreBlankTexts: !0 })),\n                d ||\n                  !h.parentNode ||\n                  (\"UL\" !== h.parentNode.nodeName && \"OL\" !== h.parentNode.nodeName) ||\n                  ((d = c(h.parentNode).prev({ nodeTypes: [1, 3], ignoreBlankTexts: !0 })), (f = h.parentNode)),\n                d))\n            )\n              return (\n                (e = h.firstChild),\n                c(h).transferContentTo(d, !0),\n                f && 0 === f.children.length && f.remove(),\n                e\n                  ? b.selection.setBefore(e)\n                  : d &&\n                    (1 === d.nodeType\n                      ? d.lastChild\n                        ? b.selection.setAfter(d.lastChild)\n                        : b.selection.selectNode(d)\n                      : b.selection.setAfter(d)),\n                !0\n              );\n          }\n          return !1;\n        },\n        fixDeleteInTheBeginningOfControlSelection: function (a) {\n          var b,\n            d = a.selection,\n            e = d.getPreviousNode(),\n            f = d.getSelectedNode();\n          return d.caretIsFirstInSelection()\n            ? (3 === f.nodeType && (f = f.parentNode),\n              (b = f.firstChild),\n              c(f).transferContentTo(e, !0),\n              b && a.selection.setBefore(b),\n              !0)\n            : !1;\n        },\n        doLineBreaksModeEnterWithCaret: function (d) {\n          var e,\n            f,\n            g = \"p, pre, div, blockquote\",\n            h = !1;\n          if (\n            ((e = d.selection.getNodesNearCaret()),\n            e &&\n              ((e.caretNode || e.nextNode) &&\n                ((f = b.getParentElement(e.caretNode || e.nextNode, { query: g }, 2)), f === d.element && (f = void 0)),\n              f && e.caretNode))\n          )\n            if (c(e.caretNode).is.lineBreak()) {\n              if (d.config.doubleLineBreakEscapesBlock) {\n                (h = !0),\n                  e.caretNode.parentNode.removeChild(e.caretNode),\n                  c(e.nextNode).is.lineBreak() && e.nextNode.parentNode.removeChild(e.nextNode);\n                var i = d.doc.createElement(\"br\");\n                c(e.nextNode).is.lineBreak() && e.nextNode === f.lastChild\n                  ? f.parentNode.insertBefore(i, f.nextSibling)\n                  : d.selection.splitElementAtCaret(f, i),\n                  e.nextNode &&\n                    3 === e.nextNode.nodeType &&\n                    (e.nextNode.data = e.nextNode.data.replace(/^ *[\\r\\n]+/, \"\")),\n                  d.selection.setBefore(i);\n              }\n            } else if (\n              3 === e.caretNode.nodeType &&\n              a.browser.hasCaretBlockElementIssue() &&\n              e.textOffset === e.caretNode.data.length &&\n              !e.nextNode\n            ) {\n              h = !0;\n              var j = d.doc.createElement(\"br\"),\n                k = d.doc.createElement(\"br\"),\n                l = d.doc.createDocumentFragment();\n              l.appendChild(j), l.appendChild(k), d.selection.insertNode(l), d.selection.setBefore(k);\n            }\n          return h;\n        },\n      },\n      g = function (b, c) {\n        var d = c.selection;\n        c.element;\n        if (d.isCollapsed()) {\n          if (c.isEmpty() && !c.config.useLineBreaks) return void b.preventDefault();\n          if (f.handleUneditableDeletion(c)) return void b.preventDefault();\n          if (f.fixDeleteInTheBeginningOfLi(c)) return void b.preventDefault();\n          if (f.fixDeleteInTheBeginningOfBlock(c)) return void b.preventDefault();\n          if (f.fixLastBrDeletionInTable(c)) return void b.preventDefault();\n          if (a.browser.usesControlRanges() && f.fixDeleteInTheBeginningOfControlSelection(c))\n            return void b.preventDefault();\n        } else d.containsUneditable() && (b.preventDefault(), d.deleteContents());\n      },\n      h = function (a, b) {\n        if (b.config.useLineBreaks && !a.shiftKey && !a.ctrlKey) {\n          b.selection.isCollapsed() && f.doLineBreaksModeEnterWithCaret(b) && a.preventDefault();\n        }\n        if (d.hasCaretAtLinkEndInsertionProblems() && b.selection.caretIsInTheEndOfNode()) {\n          var c = b.selection.getSelectedNode(!0),\n            e = c && 3 === c.nodeType ? c.parentNode : c;\n          e && e.closest(\"a\") && 3 === c.nodeType && c === e.lastChild && b.selection.setAfter(e);\n        }\n      },\n      i = function (a, b, c) {\n        if (a.selection.isCollapsed()) {\n          if (a.selection.caretIsInTheBeginnig(\"li\"))\n            if (c) {\n              if (a.commands.exec(\"outdentList\")) return;\n            } else if (a.commands.exec(\"indentList\")) return;\n        } else a.selection.deleteContents();\n        a.commands.exec(\"insertHTML\", \"&emsp;\");\n      },\n      j = function (a) {\n        this.domNodeRemovedInterval && clearInterval(domNodeRemovedInterval), this.parent.fire(\"destroy:composer\");\n      },\n      k = function (a) {\n        this.parent.fire(\"beforeinteraction\", a).fire(\"beforeinteraction:composer\", a),\n          setTimeout(\n            function () {\n              this.parent.fire(\"interaction\", a).fire(\"interaction:composer\", a);\n            }.bind(this),\n            0\n          );\n      },\n      l = function (a) {\n        this.parent.fire(\"focus\", a).fire(\"focus:composer\", a),\n          setTimeout(\n            function () {\n              this.focusState = this.getValue(!1, !1);\n            }.bind(this),\n            0\n          );\n      },\n      m = function (a) {\n        if (this.focusState !== this.getValue(!1, !1)) {\n          var b = a;\n          \"function\" == typeof Object.create && (b = Object.create(a, { type: { value: \"change\" } })),\n            this.parent.fire(\"change\", b).fire(\"change:composer\", b);\n        }\n        this.parent.fire(\"blur\", a).fire(\"blur:composer\", a);\n      },\n      n = function (a) {\n        this.parent.fire(a.type, a).fire(a.type + \":composer\", a),\n          \"paste\" === a.type &&\n            setTimeout(\n              function () {\n                this.parent.fire(\"newword:composer\");\n              }.bind(this),\n              0\n            );\n      },\n      o = function (b) {\n        this.config.copyedFromMarking &&\n          (a.browser.supportsModernPaste() &&\n            (b.clipboardData.setData(\"text/html\", this.config.copyedFromMarking + this.selection.getHtml()),\n            b.clipboardData.setData(\"text/plain\", this.selection.getPlainText()),\n            b.preventDefault()),\n          this.parent.fire(b.type, b).fire(b.type + \":composer\", b));\n      },\n      p = function (b) {\n        var c = b.keyCode;\n        (c === a.SPACE_KEY || c === a.ENTER_KEY) && this.parent.fire(\"newword:composer\");\n      },\n      q = function (b) {\n        if (!d.canSelectImagesInContentEditable()) {\n          var c = b.target,\n            e = this.element.querySelectorAll(\"img\"),\n            f = this.element.querySelectorAll(\".\" + this.config.classNames.uneditableContainer + \" img\"),\n            g = a.lang.array(e).without(f);\n          \"IMG\" === c.nodeName && a.lang.array(g).contains(c) && this.selection.selectNode(c);\n        }\n        a.browser.usesControlRanges() &&\n          ((this.selection.lastMouseDownPos = { x: b.clientX, y: b.clientY }),\n          setTimeout(\n            function () {\n              delete this.selection.lastMouseDownPos;\n            }.bind(this),\n            0\n          ));\n      },\n      r = function (a) {\n        var b = (a.target, this.selection.lastMouseDownPos);\n        if (b) {\n          var c = document.body.createTextRange();\n          setTimeout(\n            function () {\n              try {\n                c.moveToPoint(b.x, b.y), c.select();\n              } catch (a) {}\n            }.bind(this),\n            0\n          );\n        }\n      },\n      s = function (b) {\n        if (this.config.classNames.uneditableContainer) {\n          var c = a.dom.getParentElement(\n            b.target,\n            { query: \".\" + this.config.classNames.uneditableContainer },\n            !1,\n            this.element\n          );\n          c && this.selection.setAfter(c);\n        }\n      },\n      t = function (a) {\n        d.canSelectImagesInContentEditable() ||\n          setTimeout(\n            function () {\n              this.selection.getSelection().removeAllRanges();\n            }.bind(this),\n            0\n          );\n      },\n      u = function (b) {\n        var c,\n          d = b.keyCode,\n          f = e[d],\n          j = this.selection.getSelectedNode(!0);\n        j && 3 === j.nodeType ? j.parentNode : j;\n        return (!b.ctrlKey && !b.metaKey) || b.altKey || 65 !== d\n          ? ((b.ctrlKey || b.metaKey) && !b.altKey && f && (this.commands.exec(f), b.preventDefault()),\n            d === a.BACKSPACE_KEY && g(b, this),\n            (d === a.BACKSPACE_KEY || d === a.DELETE_KEY) &&\n              j &&\n              \"IMG\" === j.nodeName &&\n              (b.preventDefault(),\n              (c = j.parentNode),\n              c.removeChild(j),\n              \"A\" !== c.nodeName || c.firstChild || c.parentNode.removeChild(c),\n              setTimeout(\n                function () {\n                  a.quirks.redraw(this.element);\n                }.bind(this),\n                0\n              )),\n            this.config.handleTabKey && d === a.TAB_KEY && (b.preventDefault(), i(this, this.element, b.shiftKey)),\n            void (d === a.ENTER_KEY && h(b, this)))\n          : (this.selection.selectAll(), void b.preventDefault());\n      },\n      v = function (b) {\n        if (0 !== b.which && this.selection.caretIsInTheEndOfNode()) {\n          var c,\n            e,\n            f = this.selection.getSelectedNode(!0),\n            g = f && 3 === f.nodeType ? f.parentNode : f;\n          g &&\n            g.closest(\"a\") &&\n            f === g.lastChild &&\n            (32 !== b.which || (this.selection.caretIsInTheEndOfNode(!0) && d.hasCaretAtLinkEndInsertionProblems())\n              ? ((c = this.doc.createTextNode(a.INVISIBLE_SPACE)),\n                this.selection.insertNode(c),\n                this.selection.setBefore(c),\n                setTimeout(\n                  function () {\n                    c.textContent.length > 1\n                      ? ((c.textContent = c.textContent.replace(a.INVISIBLE_SPACE_REG_EXP, \"\")),\n                        this.selection.setAfter(c))\n                      : c.remove();\n                  }.bind(this),\n                  0\n                ))\n              : 32 === b.which &&\n                3 === f.nodeType &&\n                /[\\u00A0 ]$/.test(f.textContent) &&\n                ((f.textContent = f.textContent.replace(/[\\u00A0 ]$/, \"\")),\n                (e = this.doc.createTextNode(\" \")),\n                g.parentNode.insertBefore(e, g.nextSibling),\n                this.selection.setAfter(e, !1),\n                b.preventDefault()));\n        }\n      };\n    (a.views.Composer.prototype.observeActions = f),\n      (a.views.Composer.prototype.observe = function () {\n        var c = this.sandbox.getIframe ? this.sandbox.getIframe() : this.sandbox.getContentEditable(),\n          e =\n            (this.element,\n            d.supportsEventsInIframeCorrectly() || this.sandbox.getContentEditable\n              ? this.element\n              : this.sandbox.getWindow());\n        (this.focusState = this.getValue(!1, !1)),\n          (this.actions = f),\n          c.addEventListener([\"DOMNodeRemoved\"], j.bind(this), !1),\n          d.supportsMutationEvents() ||\n            (this.domNodeRemovedInterval = setInterval(function () {\n              b.contains(document.documentElement, c) || j.call(this);\n            }, 250)),\n          f.addListeners(e, [\"drop\", \"paste\", \"mouseup\", \"focus\", \"keyup\"], k.bind(this)),\n          e.addEventListener(\"focus\", l.bind(this), !1),\n          e.addEventListener(\"blur\", m.bind(this), !1),\n          f.addListeners(this.element, [\"drop\", \"paste\", \"beforepaste\"], n.bind(this), !1),\n          this.element.addEventListener(\"copy\", o.bind(this), !1),\n          this.element.addEventListener(\"mousedown\", q.bind(this), !1),\n          this.element.addEventListener(\"click\", s.bind(this), !1),\n          this.element.addEventListener(\"drop\", t.bind(this), !1),\n          this.element.addEventListener(\"keyup\", p.bind(this), !1),\n          this.element.addEventListener(\"keydown\", u.bind(this), !1),\n          this.element.addEventListener(\"keypress\", v.bind(this), !1),\n          a.browser.usesControlRanges() && this.element.addEventListener(\"mscontrolselect\", r.bind(this), !1),\n          this.element.addEventListener(\n            \"dragenter\",\n            function () {\n              this.parent.fire(\"unset_placeholder\");\n            }.bind(this),\n            !1\n          );\n      });\n  })(wysihtml),\n  (function (a) {\n    var b = 400;\n    a.views.Synchronizer = Base.extend({\n      constructor: function (a, b, c) {\n        (this.editor = a), (this.textarea = b), (this.composer = c), this._observe();\n      },\n      fromComposerToTextarea: function (b) {\n        this.textarea.setValue(a.lang.string(this.composer.getValue(!1, !1)).trim(), b);\n      },\n      fromTextareaToComposer: function (a) {\n        var b = this.textarea.getValue(!1, !1);\n        b ? this.composer.setValue(b, a) : (this.composer.clear(), this.editor.fire(\"set_placeholder\"));\n      },\n      sync: function (a) {\n        \"textarea\" === this.editor.currentView.name ? this.fromTextareaToComposer(a) : this.fromComposerToTextarea(a);\n      },\n      _observe: function () {\n        var c,\n          d = this,\n          e = this.textarea.element.form,\n          f = function () {\n            c = setInterval(function () {\n              d.fromComposerToTextarea();\n            }, b);\n          },\n          g = function () {\n            clearInterval(c), (c = null);\n          };\n        f(),\n          e &&\n            (a.dom.observe(e, \"submit\", function () {\n              d.sync(!0);\n            }),\n            a.dom.observe(e, \"reset\", function () {\n              setTimeout(function () {\n                d.fromTextareaToComposer();\n              }, 0);\n            })),\n          this.editor.on(\"change_view\", function (a) {\n            \"composer\" !== a || c\n              ? \"textarea\" === a && (d.fromComposerToTextarea(!0), g())\n              : (d.fromTextareaToComposer(!0), f());\n          }),\n          this.editor.on(\"destroy:composer\", g);\n      },\n    });\n  })(wysihtml),\n  (function (a) {\n    a.views.SourceView = Base.extend({\n      constructor: function (a, b) {\n        (this.editor = a), (this.composer = b), this._observe();\n      },\n      switchToTextarea: function (a) {\n        var b = this.composer.win.getComputedStyle(this.composer.element),\n          c = parseFloat(b.width),\n          d = Math.max(parseFloat(b.height), 100);\n        this.textarea ||\n          ((this.textarea = this.composer.doc.createElement(\"textarea\")),\n          (this.textarea.className = \"wysihtml-source-view\")),\n          (this.textarea.style.width = c + \"px\"),\n          (this.textarea.style.height = d + \"px\"),\n          (this.textarea.value = this.editor.getValue(a, !0)),\n          this.composer.element.parentNode.insertBefore(this.textarea, this.composer.element),\n          (this.editor.currentView = \"source\"),\n          (this.composer.element.style.display = \"none\");\n      },\n      switchToComposer: function (a) {\n        var b = this.textarea.value;\n        b ? this.composer.setValue(b, a) : (this.composer.clear(), this.editor.fire(\"set_placeholder\")),\n          this.textarea.parentNode.removeChild(this.textarea),\n          (this.editor.currentView = this.composer),\n          (this.composer.element.style.display = \"\");\n      },\n      _observe: function () {\n        this.editor.on(\n          \"change_view\",\n          function (a) {\n            \"composer\" === a ? this.switchToComposer(!0) : \"textarea\" === a &&");
        builder.append(" this.switchToTextarea(!0);\n          }.bind(this)\n        );\n      },\n    });\n  })(wysihtml),\n  (wysihtml.views.Textarea = wysihtml.views.View.extend({\n    name: \"textarea\",\n    constructor: function (a, b, c) {\n      this.base(a, b, c), this._observe();\n    },\n    clear: function () {\n      this.element.value = \"\";\n    },\n    getValue: function (a) {\n      var b = this.isEmpty() ? \"\" : this.element.value;\n      return a !== !1 && (b = this.parent.parse(b)), b;\n    },\n    setValue: function (a, b) {\n      b !== !1 && (a = this.parent.parse(a)), (this.element.value = a);\n    },\n    cleanUp: function (a) {\n      var b = this.parent.parse(this.element.value, void 0, a);\n      this.element.value = b;\n    },\n    hasPlaceholderSet: function () {\n      var a = wysihtml.browser.supportsPlaceholderAttributeOn(this.element),\n        b = this.element.getAttribute(\"placeholder\") || null,\n        c = this.element.value,\n        d = !c;\n      return (a && d) || c === b;\n    },\n    isEmpty: function () {\n      return !wysihtml.lang.string(this.element.value).trim() || this.hasPlaceholderSet();\n    },\n    _observe: function () {\n      var a = this.element,\n        b = this.parent,\n        c = { focusin: \"focus\", focusout: \"blur\" },\n        d = wysihtml.browser.supportsEvent(\"focusin\") ? [\"focusin\", \"focusout\", \"change\"] : [\"focus\", \"blur\", \"change\"];\n      b.on(\"beforeload\", function () {\n        wysihtml.dom.observe(a, d, function (a) {\n          var d = c[a.type] || a.type;\n          b.fire(d).fire(d + \":textarea\");\n        }),\n          wysihtml.dom.observe(a, [\"paste\", \"drop\"], function () {\n            setTimeout(function () {\n              b.fire(\"paste\").fire(\"paste:textarea\");\n            }, 0);\n          });\n      });\n    },\n  })),\n  (function (a) {\n    var b;\n    a.Editor = a.lang.Dispatcher.extend({\n      defaults: {\n        name: b,\n        style: !0,\n        autoLink: !0,\n        handleTabKey: !0,\n        parserRules: { tags: { br: {}, span: {}, div: {}, p: {}, b: {}, i: {}, u: {} }, classes: {} },\n        pasteParserRulesets: null,\n        parser: a.dom.parse,\n        useLineBreaks: !0,\n        doubleLineBreakEscapesBlock: !0,\n        stylesheets: [],\n        placeholderText: b,\n        supportTouchDevices: !0,\n        cleanUp: !0,\n        contentEditableMode: !1,\n        classNames: {\n          composer: \"wysihtml-editor\",\n          body: \"wysihtml-supported\",\n          sandbox: \"wysihtml-sandbox\",\n          placeholder: \"wysihtml-placeholder\",\n          uneditableContainer: \"wysihtml-uneditable-container\",\n        },\n        copyedFromMarking: '<meta name=\"copied-from\" content=\"wysihtml\">',\n      },\n      constructor: function (b, c) {\n        if (\n          ((this.editableElement = \"string\" == typeof b ? document.getElementById(b) : b),\n          (this.config = a.lang.object({}).merge(this.defaults).merge(c).get()),\n          (this._isCompatible = a.browser.supported()),\n          c && c.classNames && a.lang.object(this.config.classNames).merge(c.classNames),\n          \"textarea\" != this.editableElement.nodeName.toLowerCase() &&\n            ((this.config.contentEditableMode = !0), (this.config.noTextarea = !0)),\n          this.config.noTextarea ||\n            ((this.textarea = new a.views.Textarea(this, this.editableElement, this.config)),\n            (this.currentView = this.textarea)),\n          !this._isCompatible || (!this.config.supportTouchDevices && a.browser.isTouchDevice()))\n        ) {\n          var d = this;\n          return void setTimeout(function () {\n            d.fire(\"beforeload\").fire(\"load\");\n          }, 0);\n        }\n        a.dom.addClass(document.body, this.config.classNames.body),\n          (this.composer = new a.views.Composer(this, this.editableElement, this.config)),\n          (this.currentView = this.composer),\n          \"function\" == typeof this.config.parser && this._initParser(),\n          this.on(\"beforeload\", this.handleBeforeLoad);\n      },\n      handleBeforeLoad: function () {\n        this.config.noTextarea\n          ? (this.sourceView = new a.views.SourceView(this, this.composer))\n          : (this.synchronizer = new a.views.Synchronizer(this, this.textarea, this.composer)),\n          this.runEditorExtenders();\n      },\n      runEditorExtenders: function () {\n        a.editorExtenders.forEach(\n          function (a) {\n            a(this);\n          }.bind(this)\n        );\n      },\n      isCompatible: function () {\n        return this._isCompatible;\n      },\n      clear: function () {\n        return this.currentView.clear(), this;\n      },\n      getValue: function (a, b) {\n        return this.currentView.getValue(a, b);\n      },\n      setValue: function (a, b) {\n        return this.fire(\"unset_placeholder\"), a ? (this.currentView.setValue(a, b), this) : this.clear();\n      },\n      cleanUp: function (a) {\n        this.currentView.cleanUp(a);\n      },\n      focus: function (a) {\n        return this.currentView.focus(a), this;\n      },\n      disable: function () {\n        return this.currentView.disable(), this;\n      },\n      enable: function () {\n        return this.currentView.enable(), this;\n      },\n      isEmpty: function () {\n        return this.currentView.isEmpty();\n      },\n      hasPlaceholderSet: function () {\n        return this.currentView.hasPlaceholderSet();\n      },\n      destroy: function () {\n        this.composer && this.composer.sandbox && this.composer.sandbox.destroy(),\n          this.fire(\"destroy:composer\"),\n          this.off();\n      },\n      parse: function (b, c, d) {\n        var e = this.config.contentEditableMode ? document : this.composer ? this.composer.sandbox.getDocument() : null,\n          f = this.config.parser(b, {\n            rules: d || this.config.parserRules,\n            cleanUp: this.config.cleanUp,\n            context: e,\n            uneditableClass: this.config.classNames.uneditableContainer,\n            clearInternals: c,\n          });\n        return \"object\" == typeof b && a.quirks.redraw(b), f;\n      },\n      _initParser: function () {\n        var b;\n        a.browser.supportsModernPaste()\n          ? this.on(\n              \"paste:composer\",\n              function (c) {\n                c.preventDefault(), (b = a.dom.getPastedHtml(c)), b && this._cleanAndPaste(b);\n              }.bind(this)\n            )\n          : this.on(\n              \"beforepaste:composer\",\n              function (b) {\n                b.preventDefault();\n                var c = this.composer.getScrollPos();\n                a.dom.getPastedHtmlWithDiv(\n                  this.composer,\n                  function (a) {\n                    a && this._cleanAndPaste(a), this.composer.setScrollPos(c);\n                  }.bind(this)\n                );\n              }.bind(this)\n            );\n      },\n      _cleanAndPaste: function (b) {\n        var c = a.quirks.cleanPastedHTML(b, {\n          referenceNode: this.composer.element,\n          rules: this.config.pasteParserRulesets || [{ set: this.config.parserRules }],\n          uneditableClass: this.config.classNames.uneditableContainer,\n        });\n        this.composer.selection.deleteContents(), this.composer.selection.insertHTML(c);\n      },\n    });\n  })(wysihtml);\n//# sourceMappingURL=wysihtml.min.map\n");
        return builder.toString();
      }
      public String getName() {
        return "wysihtml";
      }
    }
    ;
  }
  private static class wysihtmlInitializer {
    static {
      _instance0.wysihtmlInitializer();
    }
    static com.google.gwt.resources.client.TextResource get() {
      return wysihtml;
    }
  }
  public com.google.gwt.resources.client.TextResource wysihtml() {
    return wysihtmlInitializer.get();
  }
  private void wysihtmlAllCommandsInitializer() {
    wysihtmlAllCommands = new com.google.gwt.resources.client.TextResource() {
      // jar:file:/home/wsiqueir/.m2/repository/org/uberfire/uberfire-widgets-commons/0.0.0/uberfire-widgets-commons-0.0.0.jar!/org/uberfire/ext/widgets/common/client/resources/js/wysihtml/wysihtml.all-commands.min.js
      public String getText() {
        return "/*! wysihtml - v0.6.0-beta1 (2016-09-01) */\n\n(wysihtml.commands.alignCenterStyle = (function () {\n  var a = { styleProperty: \"textAlign\", styleValue: \"center\", toggle: !0 };\n  return {\n    exec: function (b, c) {\n      return wysihtml.commands.formatBlock.exec(b, \"formatBlock\", a);\n    },\n    state: function (b, c) {\n      return wysihtml.commands.formatBlock.state(b, \"formatBlock\", a);\n    },\n  };\n})()),\n  (wysihtml.commands.alignJustifyStyle = (function () {\n    var a = { styleProperty: \"textAlign\", styleValue: \"justify\", toggle: !0 };\n    return {\n      exec: function (b, c) {\n        return wysihtml.commands.formatBlock.exec(b, \"formatBlock\", a);\n      },\n      state: function (b, c) {\n        return wysihtml.commands.formatBlock.state(b, \"formatBlock\", a);\n      },\n    };\n  })()),\n  (wysihtml.commands.alignLeftStyle = (function () {\n    var a = { styleProperty: \"textAlign\", styleValue: \"left\", toggle: !0 };\n    return {\n      exec: function (b, c) {\n        return wysihtml.commands.formatBlock.exec(b, \"formatBlock\", a);\n      },\n      state: function (b, c) {\n        return wysihtml.commands.formatBlock.state(b, \"formatBlock\", a);\n      },\n    };\n  })()),\n  (wysihtml.commands.alignRightStyle = (function () {\n    var a = { styleProperty: \"textAlign\", styleValue: \"right\", toggle: !0 };\n    return {\n      exec: function (b, c) {\n        return wysihtml.commands.formatBlock.exec(b, \"formatBlock\", a);\n      },\n      state: function (b, c) {\n        return wysihtml.commands.formatBlock.state(b, \"formatBlock\", a);\n      },\n    };\n  })()),\n  (wysihtml.commands.bgColorStyle = (function () {\n    return {\n      exec: function (a, b, c) {\n        var d,\n          e = wysihtml.quirks.styleParser.parseColor(\"background-color:\" + (c.color || c), \"background-color\");\n        e &&\n          ((d = (1 === e[3] ? \"rgb(\" + [e[0], e[1], e[2]].join(\", \") : \"rgba(\" + e.join(\", \")) + \")\"),\n          wysihtml.commands.formatInline.exec(a, b, { styleProperty: \"backgroundColor\", styleValue: d }));\n      },\n      state: function (a, b, c) {\n        var d,\n          e = c\n            ? wysihtml.quirks.styleParser.parseColor(\"background-color:\" + (c.color || c), \"background-color\")\n            : null;\n        return (\n          e && (d = (1 === e[3] ? \"rgb(\" + [e[0], e[1], e[2]].join(\", \") : \"rgba(\" + e.join(\", \")) + \")\"),\n          wysihtml.commands.formatInline.state(a, b, { styleProperty: \"backgroundColor\", styleValue: d })\n        );\n      },\n      remove: function (a, b) {\n        return wysihtml.commands.formatInline.remove(a, b, { styleProperty: \"backgroundColor\" });\n      },\n      stateValue: function (a, b, c) {\n        var d,\n          e = this.state(a, b),\n          f = !1;\n        return (\n          e && wysihtml.lang.object(e).isArray() && (e = e[0]),\n          e && (d = e.getAttribute(\"style\"))\n            ? ((f = wysihtml.quirks.styleParser.parseColor(d, \"background-color\")),\n              wysihtml.quirks.styleParser.unparseColor(f, c))\n            : !1\n        );\n      },\n    };\n  })()),\n  (wysihtml.commands.bold = (function () {\n    var a = { nodeName: \"B\", toggle: !0 };\n    return {\n      exec: function (b, c) {\n        wysihtml.commands.formatInline.exec(b, c, a);\n      },\n      state: function (b, c) {\n        return wysihtml.commands.formatInline.state(b, c, a);\n      },\n    };\n  })()),\n  (wysihtml.commands.formatCode = (function () {\n    return {\n      exec: function (a, b, c) {\n        var d,\n          e,\n          f,\n          g = this.state(a)[0];\n        g\n          ? a.selection.executeAndRestore(function () {\n              (d = g.querySelector(\"code\")),\n                wysihtml.dom.replaceWithChildNodes(g),\n                d && wysihtml.dom.replaceWithChildNodes(d);\n            })\n          : ((e = a.selection.getRange()),\n            (f = e.extractContents()),\n            (g = a.doc.createElement(\"pre\")),\n            (d = a.doc.createElement(\"code\")),\n            c && (d.className = c),\n            g.appendChild(d),\n            d.appendChild(f),\n            e.insertNode(g),\n            a.selection.selectNode(g));\n      },\n      state: function (a) {\n        var b,\n          c = a.selection.getSelectedNode();\n        return c &&\n          c.nodeName &&\n          \"PRE\" == c.nodeName &&\n          c.firstChild &&\n          c.firstChild.nodeName &&\n          \"CODE\" == c.firstChild.nodeName\n          ? [c]\n          : ((b = wysihtml.dom.getParentElement(c, { query: \"pre code\" })), b ? [b.parentNode] : !1);\n      },\n    };\n  })()),\n  (wysihtml.commands.insertImage = (function () {\n    var a = \"IMG\";\n    return {\n      exec: function (b, c, d) {\n        d = \"object\" == typeof d ? d : { src: d };\n        var e,\n          f,\n          g = b.doc,\n          h = this.state(b);\n        if (h && !d.src)\n          return (\n            b.selection.setBefore(h),\n            (f = h.parentNode),\n            f.removeChild(h),\n            wysihtml.dom.removeEmptyTextNodes(f),\n            \"A\" !== f.nodeName || f.firstChild || (b.selection.setAfter(f), f.parentNode.removeChild(f)),\n            void wysihtml.quirks.redraw(b.element)\n          );\n        if (h) for (var i in d) d.hasOwnProperty(i) && h.setAttribute(\"className\" === i ? \"class\" : i, d[i]);\n        else {\n          h = g.createElement(a);\n          for (var j in d) h.setAttribute(\"className\" === j ? \"class\" : j, d[j]);\n          b.selection.insertNode(h),\n            wysihtml.browser.hasProblemsSettingCaretAfterImg()\n              ? ((e = g.createTextNode(wysihtml.INVISIBLE_SPACE)), b.selection.insertNode(e), b.selection.setAfter(e))\n              : b.selection.setAfter(h);\n        }\n      },\n      state: function (b) {\n        var c,\n          d,\n          e,\n          f = b.doc;\n        return wysihtml.dom.hasElementWithTagName(f, a) && (c = b.selection.getSelectedNode())\n          ? c.nodeName === a\n            ? c\n            : c.nodeType !== wysihtml.ELEMENT_NODE\n            ? !1\n            : ((d = b.selection.getText()),\n              (d = wysihtml.lang.string(d).trim())\n                ? !1\n                : ((e = b.selection.getNodes(wysihtml.ELEMENT_NODE, function (a) {\n                    return \"IMG\" === a.nodeName;\n                  })),\n                  1 !== e.length ? !1 : e[0]))\n          : !1;\n      },\n    };\n  })()),\n  (wysihtml.commands.fontSize = (function () {\n    var a = /wysiwyg-font-size-[0-9a-z\\-]+/g;\n    return {\n      exec: function (b, c, d) {\n        wysihtml.commands.formatInline.exec(b, c, { className: \"wysiwyg-font-size-\" + d, classRegExp: a, toggle: !0 });\n      },\n      state: function (a, b, c) {\n        return wysihtml.commands.formatInline.state(a, b, { className: \"wysiwyg-font-size-\" + c });\n      },\n    };\n  })()),\n  (wysihtml.commands.fontSizeStyle = (function () {\n    return {\n      exec: function (a, b, c) {\n        (c = c.size || c),\n          /^\\s*$/.test(c) ||\n            wysihtml.commands.formatInline.exec(a, b, { styleProperty: \"fontSize\", styleValue: c, toggle: !1 });\n      },\n      state: function (a, b, c) {\n        return wysihtml.commands.formatInline.state(a, b, { styleProperty: \"fontSize\", styleValue: c || void 0 });\n      },\n      remove: function (a, b) {\n        return wysihtml.commands.formatInline.remove(a, b, { styleProperty: \"fontSize\" });\n      },\n      stateValue: function (a, b) {\n        var c,\n          d = this.state(a, b);\n        return (\n          d && wysihtml.lang.object(d).isArray() && (d = d[0]),\n          d && (c = d.getAttribute(\"style\")) ? wysihtml.quirks.styleParser.parseFontSize(c) : !1\n        );\n      },\n    };\n  })()),\n  (wysihtml.commands.foreColor = (function () {\n    var a = /wysiwyg-color-[0-9a-z]+/g;\n    return {\n      exec: function (b, c, d) {\n        wysihtml.commands.formatInline.exec(b, c, { className: \"wysiwyg-color-\" + d, classRegExp: a, toggle: !0 });\n      },\n      state: function (a, b, c) {\n        return wysihtml.commands.formatInline.state(a, b, { className: \"wysiwyg-color-\" + c });\n      },\n    };\n  })()),\n  (wysihtml.commands.foreColorStyle = (function () {\n    return {\n      exec: function (a, b, c) {\n        var d, e;\n        c &&\n          ((d = wysihtml.quirks.styleParser.parseColor(\"color:\" + (c.color || c), \"color\")),\n          d &&\n            ((e = (1 === d[3] ? \"rgb(\" + [d[0], d[1], d[2]].join(\", \") : \"rgba(\" + d.join(\", \")) + \")\"),\n            wysihtml.commands.formatInline.exec(a, b, { styleProperty: \"color\", styleValue: e })));\n      },\n      state: function (a, b, c) {\n        var d,\n          e = c ? wysihtml.quirks.styleParser.parseColor(\"color:\" + (c.color || c), \"color\") : null;\n        return (\n          e && (d = (1 === e[3] ? \"rgb(\" + [e[0], e[1], e[2]].join(\", \") : \"rgba(\" + e.join(\", \")) + \")\"),\n          wysihtml.commands.formatInline.state(a, b, { styleProperty: \"color\", styleValue: d })\n        );\n      },\n      remove: function (a, b) {\n        return wysihtml.commands.formatInline.remove(a, b, { styleProperty: \"color\" });\n      },\n      stateValue: function (a, b, c) {\n        var d,\n          e = this.state(a, b),\n          f = !1;\n        return (\n          e && wysihtml.lang.object(e).isArray() && (e = e[0]),\n          e && (d = e.getAttribute(\"style\"))\n            ? ((f = wysihtml.quirks.styleParser.parseColor(d, \"color\")), wysihtml.quirks.styleParser.unparseColor(f, c))\n            : !1\n        );\n      },\n    };\n  })()),\n  (wysihtml.commands.insertBlockQuote = (function () {\n    var a = { nodeName: \"BLOCKQUOTE\", toggle: !0 };\n    return {\n      exec: function (b, c) {\n        return wysihtml.commands.formatBlock.exec(b, \"formatBlock\", a);\n      },\n      state: function (b, c) {\n        return wysihtml.commands.formatBlock.state(b, \"formatBlock\", a);\n      },\n    };\n  })()),\n  (wysihtml.commands.insertHorizontalRule = (function () {\n    return {\n      exec: function (a) {\n        var b = a.selection.getSelectedNode(),\n          c = wysihtml.dom.getParentElement(\n            b,\n            { query: wysihtml.PERMITTED_PHRASING_CONTENT_ONLY },\n            null,\n            a.editableArea\n          ),\n          d = document.createElement(\"hr\");\n        c ? a.selection.splitElementAtCaret(c, d) : a.selection.insertNode(d),\n          d.nextSibling ? a.selection.setBefore(d.nextSibling) : a.selection.setAfter(d);\n      },\n      state: function () {\n        return !1;\n      },\n    };\n  })()),\n  (wysihtml.commands.insertOrderedList = (function () {\n    return {\n      exec: function (a, b) {\n        wysihtml.commands.insertList.exec(a, b, \"OL\");\n      },\n      state: function (a, b) {\n        return wysihtml.commands.insertList.state(a, b, \"OL\");\n      },\n    };\n  })()),\n  (wysihtml.commands.insertUnorderedList = (function () {\n    return {\n      exec: function (a, b) {\n        wysihtml.commands.insertList.exec(a, b, \"UL\");\n      },\n      state: function (a, b) {\n        return wysihtml.commands.insertList.state(a, b, \"UL\");\n      },\n    };\n  })()),\n  (wysihtml.commands.italic = (function () {\n    var a = { nodeName: \"I\", toggle: !0 };\n    return {\n      exec: function (b, c) {\n        wysihtml.commands.formatInline.exec(b, c, a);\n      },\n      state: function (b, c) {\n        return wysihtml.commands.formatInline.state(b, c, a);\n      },\n    };\n  })()),\n  (wysihtml.commands.justifyCenter = (function () {\n    var a = { className: \"wysiwyg-text-align-center\", classRegExp: /wysiwyg-text-align-[0-9a-z]+/g, toggle: !0 };\n    return {\n      exec: function (b, c) {\n        return wysihtml.commands.formatBlock.exec(b, \"formatBlock\", a);\n      },\n      state: function (b, c) {\n        return wysihtml.commands.formatBlock.state(b, \"formatBlock\", a);\n      },\n    };\n  })()),\n  (wysihtml.commands.justifyFull = (function () {\n    var a = { className: \"wysiwyg-text-align-justify\", classRegExp: /wysiwyg-text-align-[0-9a-z]+/g, toggle: !0 };\n    return {\n      exec: function (b, c) {\n        return wysihtml.commands.formatBlock.exec(b, \"formatBlock\", a);\n      },\n      state: function (b, c) {\n        return wysihtml.commands.formatBlock.state(b, \"formatBlock\", a);\n      },\n    };\n  })()),\n  (wysihtml.commands.justifyLeft = (function () {\n    var a = { className: \"wysiwyg-text-align-left\", classRegExp: /wysiwyg-text-align-[0-9a-z]+/g, toggle: !0 };\n    return {\n      exec: function (b, c) {\n        return wysihtml.commands.formatBlock.exec(b, \"formatBlock\", a);\n      },\n      state: function (b, c) {\n        return wysihtml.commands.formatBlock.state(b, \"formatBlock\", a);\n      },\n    };\n  })()),\n  (wysihtml.commands.justifyRight = (function () {\n    var a = { className: \"wysiwyg-text-align-right\", classRegExp: /wysiwyg-text-align-[0-9a-z]+/g, toggle: !0 };\n    return {\n      exec: function (b, c) {\n        return wysihtml.commands.formatBlock.exec(b, \"formatBlock\", a);\n      },\n      state: function (b, c) {\n        return wysihtml.commands.formatBlock.state(b, \"formatBlock\", a);\n      },\n    };\n  })()),\n  (wysihtml.commands.subscript = (function () {\n    var a = { nodeName: \"SUB\", toggle: !0 };\n    return {\n      exec: function (b, c) {\n        wysihtml.commands.formatInline.exec(b, c, a);\n      },\n      state: function (b, c) {\n        return wysihtml.commands.formatInline.state(b, c, a);\n      },\n    };\n  })()),\n  (wysihtml.commands.superscript = (function () {\n    var a = { nodeName: \"SUP\", toggle: !0 };\n    return {\n      exec: function (b, c) {\n        wysihtml.commands.formatInline.exec(b, c, a);\n      },\n      state: function (b, c) {\n        return wysihtml.commands.formatInline.state(b, c, a);\n      },\n    };\n  })()),\n  (wysihtml.commands.underline = (function () {\n    var a = { nodeName: \"U\", toggle: !0 };\n    return {\n      exec: function (b, c) {\n        wysihtml.commands.formatInline.exec(b, c, a);\n      },\n      state: function (b, c) {\n        return wysihtml.commands.formatInline.state(b, c, a);\n      },\n    };\n  })());\n//# sourceMappingURL=wysihtml.all-commands.min.map\n";
      }
      public String getName() {
        return "wysihtmlAllCommands";
      }
    }
    ;
  }
  private static class wysihtmlAllCommandsInitializer {
    static {
      _instance0.wysihtmlAllCommandsInitializer();
    }
    static com.google.gwt.resources.client.TextResource get() {
      return wysihtmlAllCommands;
    }
  }
  public com.google.gwt.resources.client.TextResource wysihtmlAllCommands() {
    return wysihtmlAllCommandsInitializer.get();
  }
  private void wysihtmlTableEditingInitializer() {
    wysihtmlTableEditing = new com.google.gwt.resources.client.TextResource() {
      // jar:file:/home/wsiqueir/.m2/repository/org/uberfire/uberfire-widgets-commons/0.0.0/uberfire-widgets-commons-0.0.0.jar!/org/uberfire/ext/widgets/common/client/resources/js/wysihtml/wysihtml.table_editing.min.js
      public String getText() {
        StringBuilder builder = new StringBuilder();
        builder.append("(wysihtml.commands.addTableCells = {\n  exec: function (a, b, c) {\n    if (a.tableSelection && a.tableSelection.start && a.tableSelection.end) {\n      var d = wysihtml.dom.table.orderSelectionEnds(a.tableSelection.start, a.tableSelection.end);\n      \"before\" == c || \"above\" == c\n        ? wysihtml.dom.table.addCells(d.start, c)\n        : (\"after\" == c || \"below\" == c) && wysihtml.dom.table.addCells(d.end, c),\n        setTimeout(function () {\n          a.tableSelection.select(d.start, d.end);\n        }, 0);\n    }\n  },\n  state: function (a, b) {\n    return !1;\n  },\n}),\n  (wysihtml.commands.createTable = {\n    exec: function (a, b, c) {\n      var d, e, f;\n      if (c && c.cols && c.rows && parseInt(c.cols, 10) > 0 && parseInt(c.rows, 10) > 0) {\n        for (\n          f = c.tableStyle ? '<table style=\"' + c.tableStyle + '\">' : \"<table>\", f += \"<tbody>\", e = 0;\n          e < c.rows;\n          e++\n        ) {\n          for (f += \"<tr>\", d = 0; d < c.cols; d++) f += \"<td><br></td>\";\n          f += \"</tr>\";\n        }\n        (f += \"</tbody></table>\"), a.commands.exec(\"insertHTML\", f);\n      }\n    },\n    state: function (a, b) {\n      return !1;\n    },\n  }),\n  (wysihtml.commands.deleteTableCells = {\n    exec: function (a, b, c) {\n      if (a.tableSelection && a.tableSelection.start && a.tableSelection.end) {\n        var d,\n          e = wysihtml.dom.table.orderSelectionEnds(a.tableSelection.start, a.tableSelection.end),\n          f = wysihtml.dom.table.indexOf(e.start),\n          g = a.tableSelection.table;\n        wysihtml.dom.table.removeCells(e.start, c),\n          setTimeout(function () {\n            (d = wysihtml.dom.table.findCell(g, f)),\n              d ||\n                (\"row\" == c && (d = wysihtml.dom.table.findCell(g, { row: f.row - 1, col: f.col })),\n                \"column\" == c && (d = wysihtml.dom.table.findCell(g, { row: f.row, col: f.col - 1 }))),\n              d && a.tableSelection.select(d, d);\n          }, 0);\n      }\n    },\n    state: function (a, b) {\n      return !1;\n    },\n  }),\n  (wysihtml.commands.mergeTableCells = {\n    exec: function (a, b) {\n      a.tableSelection &&\n        a.tableSelection.start &&\n        a.tableSelection.end &&\n        (this.state(a, b)\n          ? wysihtml.dom.table.unmergeCell(a.tableSelection.start)\n          : wysihtml.dom.table.mergeCellsBetween(a.tableSelection.start, a.tableSelection.end));\n    },\n    state: function (a, b) {\n      if (a.tableSelection) {\n        var c = a.tableSelection.start,\n          d = a.tableSelection.end;\n        if (\n          c &&\n          d &&\n          c == d &&\n          ((wysihtml.dom.getAttribute(c, \"colspan\") && parseInt(wysihtml.dom.getAttribute(c, \"colspan\"), 10) > 1) ||\n            (wysihtml.dom.getAttribute(c, \"rowspan\") && parseInt(wysihtml.dom.getAttribute(c, \"rowspan\"), 10) > 1))\n        )\n          return [c];\n      }\n      return !1;\n    },\n  }),\n  (function () {\n    function a(a, b) {\n      for (var c, d = [], e = 0, f = a.length; f > e; e++)\n        if ((c = a[e].querySelectorAll(b))) for (var g = c.length; g--; d.unshift(c[g]));\n      return d;\n    }\n    function b(a) {\n      a.parentNode.removeChild(a);\n    }\n    function d(a, b) {\n      a.parentNode.insertBefore(b, a.nextSibling);\n    }\n    function e(a, b) {\n      for (var c = a.nextSibling; 1 != c.nodeType; )\n        if (((c = c.nextSibling), !b || b == c.tagName.toLowerCase())) return c;\n      return null;\n    }\n    var f = wysihtml.dom,\n      g = function (a) {\n        (this.el = a),\n          (this.isColspan = !1),\n          (this.isRowspan = !1),\n          (this.firstCol = !0),\n          (this.lastCol = !0),\n          (this.firstRow = !0),\n          (this.lastRow = !0),\n          (this.isReal = !0),\n          (this.spanCollection = []),\n          (this.modified = !1);\n      },\n      h = function (a, b) {\n        a\n          ? ((this.cell = a), (this.table = f.getParentElement(a, { query: \"table\" })))\n          : b && ((this.table = b), (this.cell = this.table.querySelectorAll(\"th, td\")[0]));\n      };\n    (h.prototype = {\n      addSpannedCellToMap: function (a, b, c, d, e, f) {\n        for (\n          var h = [], i = c + (f ? parseInt(f, 10) - 1 : 0), j = d + (e ? parseInt(e, 10) - 1 : 0), k = c;\n          i >= k;\n          k++\n        ) {\n          \"undefined\" == typeof b[k] && (b[k] = []);\n          for (var l = d; j >= l; l++)\n            (b[k][l] = new g(a)),\n              (b[k][l].isColspan = e && parseInt(e, 10) > 1),\n              (b[k][l].isRowspan = f && parseInt(f, 10) > 1),\n              (b[k][l].firstCol = l == d),\n              (b[k][l].lastCol = l == j),\n              (b[k][l].firstRow = k == c),\n              (b[k][l].lastRow = k == i),\n              (b[k][l].isReal = l == d && k == c),\n              (b[k][l].spanCollection = h),\n              h.push(b[k][l]);\n        }\n      },\n      setCellAsModified: function (a) {\n        if (((a.modified = !0), a.spanCollection.length > 0))\n          for (var b = 0, c = a.spanCollection.length; c > b; b++) a.spanCollection[b].modified = !0;\n      },\n      setTableMap: function () {\n        var a,\n          b,\n          c,\n          d,\n          e,\n          h,\n          i,\n          j,\n          k = [],\n          l = this.getTableRows();\n        for (a = 0; a < l.length; a++)\n          for (\n            b = l[a], c = this.getRowCells(b), h = 0, \"undefined\" == typeof k[a] && (k[a] = []), d = 0;\n            d < c.length;\n            d++\n          ) {\n            for (e = c[d]; \"undefined\" != typeof k[a][h]; ) h++;\n            (i = f.getAttribute(e, \"colspan\")),\n              (j = f.getAttribute(e, \"rowspan\")),\n              i || j\n                ? (this.addSpannedCellToMap(e, k, a, h, i, j), (h += i ? parseInt(i, 10) : 1))\n                : ((k[a][h] = new g(e)), h++);\n          }\n        return (this.map = k), k;\n      },\n      getRowCells: function (b) {\n        var c = this.table.querySelectorAll(\"table\"),\n          d = c ? a(c, \"th, td\") : [],\n          e = b.querySelectorAll(\"th, td\"),\n          f = d.length > 0 ? wysihtml.lang.array(e).without(d) : e;\n        return f;\n      },\n      getTableRows: function () {\n        var b = this.table.querySelectorAll(\"table\"),\n          c = b ? a(b, \"tr\") : [],\n          d = this.table.querySelectorAll(\"tr\"),\n          e = c.length > 0 ? wysihtml.lang.array(d).without(c) : d;\n        return e;\n      },\n      getMapIndex: function (a) {\n        for (var b = this.map.length, c = this.map && this.map[0] ? this.map[0].length : 0, d = 0; b > d; d++)\n          for (var e = 0; c > e; e++) if (this.map[d][e].el === a) return { row: d, col: e };\n        return !1;\n      },\n      getElementAtIndex: function (a) {\n        return (\n          this.setTableMap(),\n          this.map[a.row] && this.map[a.row][a.col] && this.map[a.row][a.col].el ? this.map[a.row][a.col].el : null\n        );\n      },\n      getMapElsTo: function (a) {\n        var b = [];\n        if (\n          (this.setTableMap(),\n          (this.idx_start = this.getMapIndex(this.cell)),\n          (this.idx_end = this.getMapIndex(a)),\n          this.idx_start.row > this.idx_end.row ||\n            (this.idx_start.row == this.idx_end.row && this.idx_start.col > this.idx_end.col))\n        ) {\n          var c = this.idx_start;\n          (this.idx_start = this.idx_end), (this.idx_end = c);\n        }\n        if (this.idx_start.col > this.idx_end.col) {\n          var d = this.idx_start.col;\n          (this.idx_start.col = this.idx_end.col), (this.idx_end.col = d);\n        }\n        if (null != this.idx_start && null != this.idx_end)\n          for (var e = this.idx_start.row, f = this.idx_end.row; f >= e; e++)\n            for (var g = this.idx_start.col, h = this.idx_end.col; h >= g; g++) b.push(this.map[e][g].el);\n        return b;\n      },\n      orderSelectionEnds: function (a) {\n        if (\n          (this.setTableMap(),\n          (this.idx_start = this.getMapIndex(this.cell)),\n          (this.idx_end = this.getMapIndex(a)),\n          this.idx_start.row > this.idx_end.row ||\n            (this.idx_start.row == this.idx_end.row && this.idx_start.col > this.idx_end.col))\n        ) {\n          var b = this.idx_start;\n          (this.idx_start = this.idx_end), (this.idx_end = b);\n        }\n        if (this.idx_start.col > this.idx_end.col) {\n          var c = this.idx_start.col;\n          (this.idx_start.col = this.idx_end.col), (this.idx_end.col = c);\n        }\n        return {\n          start: this.map[this.idx_start.row][this.idx_start.col].el,\n          end: this.map[this.idx_end.row][this.idx_end.col].el,\n        };\n      },\n      createCells: function (a, b, c) {\n        for (var d, e = this.table.ownerDocument, f = e.createDocumentFragment(), g = 0; b > g; g++) {\n          if (((d = e.createElement(a)), c)) for (var h in c) c.hasOwnProperty(h) && d.setAttribute(h, c[h]);\n          d.appendChild(document.createTextNode(\" \")), f.appendChild(d);\n        }\n        return f;\n      },\n      correctColIndexForUnreals: function (a, b) {\n        for (var c = this.map[b], d = -1, e = 0; a > e; e++) c[e].isReal && d++;\n        return d;\n      },\n      getLastNewCellOnRow: function (a, b) {\n        for (var c, d, e = this.getRowCells(a), f = 0, g = e.length; g > f; f++)\n          if (((c = e[f]), (d = this.getMapIndex(c)), d === !1 || (\"undefined\" != typeof b && d.row != b))) return c;\n        return null;\n      },\n      removeEmptyTable: function () {\n        var a = this.table.querySelectorAll(\"td, th\");\n        return a && 0 != a.length ? !1 : (b(this.table), !0);\n      },\n      splitRowToCells: function (a) {\n        if (a.isColspan) {\n          var b = parseInt(f.getAttribute(a.el, \"colspan\") || 1, 10),\n            c = a.el.tagName.toLowerCase();\n          if (b > 1) {\n            var e = this.createCells(c, b - 1);\n            d(a.el, e);\n          }\n          a.el.removeAttribute(\"colspan\");\n        }\n      },\n      getRealRowEl: function (a, b) {\n        var c = null,\n          d = null;\n        b = b || this.idx;\n        for (var e = 0, g = this.map[b.row].length; g > e; e++)\n          if (((d = this.map[b.row][e]), d.isReal && (c = f.getParentElement(d.el, { query: \"tr\" })))) return c;\n        return null === c && a && (c = f.getParentElement(this.map[b.row][b.col].el, { query: \"tr\" }) || null), c;\n      },\n      injectRowAt: function (a, b, c, e, g) {\n        var h = this.getRealRowEl(!1, { row: a, col: b }),\n          i = this.createCells(e, c);\n        if (h) {\n          var j = this.correctColIndexForUnreals(b, a);\n          j >= 0 ? d(this.getRowCells(h)[j], i) : h.insertBefore(i, h.firstChild);\n        } else {\n          var k = this.table.ownerDocument.createElement(\"tr\");\n          k.appendChild(i), d(f.getParentElement(g.el, { query: \"tr\" }), k);\n        }\n      },\n      canMerge: function (a) {\n        if (\n          ((this.to = a),\n          this.setTableMap(),\n          (this.idx_start = this.getMapIndex(this.cell)),\n          (this.idx_end = this.getMapIndex(this.to)),\n          this.idx_start.row > this.idx_end.row ||\n            (this.idx_start.row == this.idx_end.row && this.idx_start.col > this.idx_end.col))\n        ) {\n          var b = this.idx_start;\n          (this.idx_start = this.idx_end), (this.idx_end = b);\n        }\n        if (this.idx_start.col > this.idx_end.col) {\n          var c = this.idx_start.col;\n          (this.idx_start.col = this.idx_end.col), (this.idx_end.col = c);\n        }\n        for (var d = this.idx_start.row, e = this.idx_end.row; e >= d; d++)\n          for (var f = this.idx_start.col, g = this.idx_end.col; g >= f; f++)\n            if (this.map[d][f].isColspan || this.map[d][f].isRowspan) return !1;\n        return !0;\n      },\n      decreaseCellSpan: function (a, b) {\n        var c = parseInt(f.getAttribute(a.el, b), 10) - 1;\n        c >= 1\n          ? a.el.setAttribute(b, c)\n          : (a.el.removeAttribute(b),\n            \"colspan\" == b && (a.isColspan = !1),\n            \"rowspan\" == b && (a.isRowspan = !1),\n            (a.firstCol = !0),\n            (a.lastCol = !0),\n            (a.firstRow = !0),\n            (a.lastRow = !0),\n            (a.isReal = !0));\n      },\n      removeSurplusLines: function () {\n        var a, c, d, e, g, h, i;\n        if ((this.setTableMap(), this.map)) {\n          for (d = 0, e = this.map.length; e > d; d++) {\n            for (a = this.map[d], i = !0, g = 0, h = a.length; h > g; g++)\n              if (\n                ((c = a[g]),\n                !(\n                  f.getAttribute(c.el, \"rowspan\") &&\n                  parseInt(f.getAttribute(c.el, \"rowspan\"), 10) > 1 &&\n                  c.firstRow !== !0\n                ))\n              ) {\n                i = !1;\n                break;\n              }\n            if (i) for (g = 0; h > g; g++) this.decreaseCellSpan(a[g], \"rowspan\");\n          }\n          var j = this.getTableRows();\n          for (d = 0, e = j.length; e > d; d++)\n            (a = j[d]), 0 == a.childNodes.length && /^\\s*$/.test(a.textContent || a.innerText) && b(a);\n        }\n      },\n      fillMissingCells: function () {\n        var a = 0,\n          b = 0,\n          c = null;\n        if ((this.setTableMap(), this.map)) {\n          a = this.map.length;\n          for (var e = 0; a > e; e++) this.map[e].length > b && (b = this.map[e].length);\n          for (var f = 0; a > f; f++)\n            for (var h = 0; b > h; h++)\n              this.map[f] &&\n                !this.map[f][h] &&\n                h > 0 &&\n                ((this.map[f][h] = new g(this.createCells(\"td\", 1))),\n                (c = this.map[f][h - 1]),\n                c && c.el && c.el.parent && d(this.map[f][h - 1].el, this.map[f][h].el));\n        }\n      },\n      rectify: function () {\n        return this.removeEmptyTable() ? !1 : (this.removeSurplusLines(), this.fillMissingCells(), !0);\n      },\n      unmerge: function () {\n        if (this.rectify() && (this.setTableMap(), (this.idx = this.getMapIndex(this.cell)), this.idx)) {\n          var a = this.map[this.idx.row][this.idx.col],\n            b = f.getAttribute(a.el, \"colspan\") ? parseInt(f.getAttribute(a.el, \"colspan\"), 10) : 1,\n            c = a.el.tagName.toLowerCase();\n          if (a.isRowspan) {\n            var d = parseInt(f.getAttribute(a.el, \"rowspan\"), 10);\n            if (d > 1)\n              for (var e = 1, g = d - 1; g >= e; e++) this.injectRowAt(this.idx.row + e, this.idx.col, b, c, a);\n            a.el.removeAttribute(\"rowspan\");\n          }\n          this.splitRowToCells(a);\n        }\n      },\n      merge: function (a) {\n        if (this.rectify())\n          if (this.canMerge(a)) {\n            for (\n              var c = this.idx_end.row - this.idx_start.row + 1,\n                d = this.idx_end.col - this.idx_start.col + 1,\n                e = this.idx_start.row,\n                f = this.idx_end.row;\n              f >= e;\n              e++\n            )\n              for (var g = this.idx_start.col, h = this.idx_end.col; h >= g; g++)\n                e == this.idx_start.row && g == this.idx_start.col\n                  ? (c > 1 && this.map[e][g].el.setAttribute(\"rowspan\", c),\n                    d > 1 && this.map[e][g].el.setAttribute(\"colspan\", d))\n                  : (/^\\s*<br\\/?>\\s*$/.test(this.map[e][g].el.innerHTML.toLowerCase()) ||\n                      (this.map[this.idx_start.row][this.idx_start.col].el.innerHTML +=\n                        \" \" + this.map[e][g].el.innerHTML),\n                    b(this.map[e][g].el));\n            this.rectify();\n          } else window.console && console.log(\"Do not know how to merge allready merged cells.\");\n      },\n      collapseCellToNextRow: function (a) {\n        var b = this.getMapIndex(a.el),\n          c = b.row + 1,\n          e = { row: c, col: b.col };\n        if (c < this.map.length) {\n          var g = this.getRealRowEl(!1, e);\n          if (null !== g) {\n            var h = this.correctColIndexForUnreals(e.col, e.row);\n            if (h >= 0) d(this.getRowCells(g)[h], a.el);\n            else {\n              var i = this.getLastNewCellOnRow(g, c);\n              null !== i ? d(i, a.el) : g.insertBefore(a.el, g.firstChild);\n            }\n            parseInt(f.getAttribute(a.el, \"rowspan\"), 10) > 2\n              ? a.el.setAttribute(\"rowspan\", parseInt(f.getAttribute(a.el, \"rowspan\"), 10) - 1)\n              : a.el.removeAttribute(\"rowspan\");\n          }\n        }\n      },\n      removeRowCell: function (");
        builder.append("a) {\n        a.isReal\n          ? a.isRowspan\n            ? this.collapseCellToNextRow(a)\n            : b(a.el)\n          : parseInt(f.getAttribute(a.el, \"rowspan\"), 10) > 2\n          ? a.el.setAttribute(\"rowspan\", parseInt(f.getAttribute(a.el, \"rowspan\"), 10) - 1)\n          : a.el.removeAttribute(\"rowspan\");\n      },\n      getRowElementsByCell: function () {\n        var a = [];\n        if ((this.setTableMap(), (this.idx = this.getMapIndex(this.cell)), this.idx !== !1))\n          for (var b = this.map[this.idx.row], c = 0, d = b.length; d > c; c++) b[c].isReal && a.push(b[c].el);\n        return a;\n      },\n      getColumnElementsByCell: function () {\n        var a = [];\n        if ((this.setTableMap(), (this.idx = this.getMapIndex(this.cell)), this.idx !== !1))\n          for (var b = 0, c = this.map.length; c > b; b++)\n            this.map[b][this.idx.col] && this.map[b][this.idx.col].isReal && a.push(this.map[b][this.idx.col].el);\n        return a;\n      },\n      removeRow: function () {\n        var a = f.getParentElement(this.cell, { query: \"tr\" });\n        if (a) {\n          if ((this.setTableMap(), (this.idx = this.getMapIndex(this.cell)), this.idx !== !1))\n            for (var c = this.map[this.idx.row], d = 0, e = c.length; e > d; d++)\n              c[d].modified || (this.setCellAsModified(c[d]), this.removeRowCell(c[d]));\n          b(a);\n        }\n      },\n      removeColCell: function (a) {\n        a.isColspan\n          ? parseInt(f.getAttribute(a.el, \"colspan\"), 10) > 2\n            ? a.el.setAttribute(\"colspan\", parseInt(f.getAttribute(a.el, \"colspan\"), 10) - 1)\n            : a.el.removeAttribute(\"colspan\")\n          : a.isReal && b(a.el);\n      },\n      removeColumn: function () {\n        if ((this.setTableMap(), (this.idx = this.getMapIndex(this.cell)), this.idx !== !1))\n          for (var a = 0, b = this.map.length; b > a; a++)\n            this.map[a][this.idx.col].modified ||\n              (this.setCellAsModified(this.map[a][this.idx.col]), this.removeColCell(this.map[a][this.idx.col]));\n      },\n      remove: function (a) {\n        if (this.rectify()) {\n          switch (a) {\n            case \"row\":\n              this.removeRow();\n              break;\n            case \"column\":\n              this.removeColumn();\n          }\n          this.rectify();\n        }\n      },\n      addRow: function (a) {\n        var b = this.table.ownerDocument;\n        if (\n          (this.setTableMap(),\n          (this.idx = this.getMapIndex(this.cell)),\n          \"below\" == a &&\n            f.getAttribute(this.cell, \"rowspan\") &&\n            (this.idx.row = this.idx.row + parseInt(f.getAttribute(this.cell, \"rowspan\"), 10) - 1),\n          this.idx !== !1)\n        ) {\n          for (var c = this.map[this.idx.row], e = b.createElement(\"tr\"), g = 0, h = c.length; h > g; g++)\n            c[g].modified || (this.setCellAsModified(c[g]), this.addRowCell(c[g], e, a));\n          switch (a) {\n            case \"below\":\n              d(this.getRealRowEl(!0), e);\n              break;\n            case \"above\":\n              var i = f.getParentElement(this.map[this.idx.row][this.idx.col].el, { query: \"tr\" });\n              i && i.parentNode.insertBefore(e, i);\n          }\n        }\n      },\n      addRowCell: function (a, b, d) {\n        var e = a.isColspan ? { colspan: f.getAttribute(a.el, \"colspan\") } : null;\n        a.isReal\n          ? \"above\" != d && a.isRowspan\n            ? a.el.setAttribute(\"rowspan\", parseInt(f.getAttribute(a.el, \"rowspan\"), 10) + 1)\n            : b.appendChild(this.createCells(\"td\", 1, e))\n          : \"above\" != d && a.isRowspan && a.lastRow\n          ? b.appendChild(this.createCells(\"td\", 1, e))\n          : c.isRowspan && a.el.attr(\"rowspan\", parseInt(f.getAttribute(a.el, \"rowspan\"), 10) + 1);\n      },\n      add: function (a) {\n        this.rectify() &&\n          ((\"below\" == a || \"above\" == a) && this.addRow(a), (\"before\" == a || \"after\" == a) && this.addColumn(a));\n      },\n      addColCell: function (a, b, c) {\n        var e,\n          g = a.el.tagName.toLowerCase();\n        switch (c) {\n          case \"before\":\n            e = !a.isColspan || a.firstCol;\n            break;\n          case \"after\":\n            e = !a.isColspan || a.lastCol || (a.isColspan && a.el == this.cell);\n        }\n        if (e) {\n          switch (c) {\n            case \"before\":\n              a.el.parentNode.insertBefore(this.createCells(g, 1), a.el);\n              break;\n            case \"after\":\n              d(a.el, this.createCells(g, 1));\n          }\n          a.isRowspan && this.handleCellAddWithRowspan(a, b + 1, c);\n        } else a.el.setAttribute(\"colspan\", parseInt(f.getAttribute(a.el, \"colspan\"), 10) + 1);\n      },\n      addColumn: function (a) {\n        var b, c;\n        if (\n          (this.setTableMap(),\n          (this.idx = this.getMapIndex(this.cell)),\n          \"after\" == a &&\n            f.getAttribute(this.cell, \"colspan\") &&\n            (this.idx.col = this.idx.col + parseInt(f.getAttribute(this.cell, \"colspan\"), 10) - 1),\n          this.idx !== !1)\n        )\n          for (var d = 0, e = this.map.length; e > d; d++)\n            (b = this.map[d]),\n              b[this.idx.col] &&\n                ((c = b[this.idx.col]), c.modified || (this.setCellAsModified(c), this.addColCell(c, d, a)));\n      },\n      handleCellAddWithRowspan: function (a, b, c) {\n        for (\n          var g,\n            h,\n            i,\n            j = parseInt(f.getAttribute(this.cell, \"rowspan\"), 10) - 1,\n            k = f.getParentElement(a.el, { query: \"tr\" }),\n            l = a.el.tagName.toLowerCase(),\n            m = this.table.ownerDocument,\n            n = 0;\n          j > n;\n          n++\n        )\n          if (((g = this.correctColIndexForUnreals(this.idx.col, b + n)), (k = e(k, \"tr\"))))\n            if (g > 0)\n              switch (c) {\n                case \"before\":\n                  (h = this.getRowCells(k)),\n                    g > 0 && this.map[b + n][this.idx.col].el != h[g] && g == h.length - 1\n                      ? d(h[g], this.createCells(l, 1))\n                      : h[g].parentNode.insertBefore(this.createCells(l, 1), h[g]);\n                  break;\n                case \"after\":\n                  d(this.getRowCells(k)[g], this.createCells(l, 1));\n              }\n            else k.insertBefore(this.createCells(l, 1), k.firstChild);\n          else (i = m.createElement(\"tr\")), i.appendChild(this.createCells(l, 1)), this.table.appendChild(i);\n      },\n    }),\n      (f.table = {\n        getCellsBetween: function (a, b) {\n          var c = new h(a);\n          return c.getMapElsTo(b);\n        },\n        addCells: function (a, b) {\n          var c = new h(a);\n          c.add(b);\n        },\n        removeCells: function (a, b) {\n          var c = new h(a);\n          c.remove(b);\n        },\n        mergeCellsBetween: function (a, b) {\n          var c = new h(a);\n          c.merge(b);\n        },\n        unmergeCell: function (a) {\n          var b = new h(a);\n          b.unmerge();\n        },\n        orderSelectionEnds: function (a, b) {\n          var c = new h(a);\n          return c.orderSelectionEnds(b);\n        },\n        indexOf: function (a) {\n          var b = new h(a);\n          return b.setTableMap(), b.getMapIndex(a);\n        },\n        findCell: function (a, b) {\n          var c = new h(null, a);\n          return c.getElementAtIndex(b);\n        },\n        findRowByCell: function (a) {\n          var b = new h(a);\n          return b.getRowElementsByCell();\n        },\n        findColumnByCell: function (a) {\n          var b = new h(a);\n          return b.getColumnElementsByCell();\n        },\n        canMerge: function (a, b) {\n          var c = new h(a);\n          return c.canMerge(b);\n        },\n      });\n  })(),\n  (function () {\n    var a = wysihtml.views.Composer.prototype.observe,\n      b = function () {\n        a.call(this), this.config.handleTables && c.call(this);\n      },\n      c = function () {\n        var a = function () {\n            this.win.removeEventListener(\"load\", a),\n              this.doc.execCommand(\"enableObjectResizing\", !1, \"false\"),\n              this.doc.execCommand(\"enableInlineTableEditing\", !1, \"false\");\n          }.bind(this),\n          b = function () {\n            a.call(this), this.actions.removeListeners(this.sandbox.getIframe(), [\"focus\", \"mouseup\", \"mouseover\"], b);\n          }.bind(this);\n        this.doc.execCommand &&\n          wysihtml.browser.supportsCommand(this.doc, \"enableObjectResizing\") &&\n          wysihtml.browser.supportsCommand(this.doc, \"enableInlineTableEditing\") &&\n          (this.sandbox.getIframe\n            ? this.actions.addListeners(this.sandbox.getIframe(), [\"focus\", \"mouseup\", \"mouseover\"], b)\n            : this.win.addEventListener(\"load\", a)),\n          (this.tableSelection = wysihtml.quirks.tableCellsSelection(this.element, this.parent));\n      },\n      d = function (a, b) {\n        var c = function () {\n            return a.addEventListener(\"mousedown\", d), n;\n          },\n          d = function (b) {\n            var c = wysihtml.dom.getParentElement(b.target, { query: \"td, th\" }, !1, a);\n            c && e(c);\n          },\n          e = function (c) {\n            (n.start = c),\n              (n.end = c),\n              (n.cells = [c]),\n              (n.table = m.getParentElement(n.start, { query: \"table\" }, !1, a)),\n              n.table &&\n                (f(),\n                m.addClass(c, o),\n                a.addEventListener(\"mousemove\", h),\n                a.addEventListener(\"mouseup\", i),\n                b.fire(\"tableselectstart\").fire(\"tableselectstart:composer\"));\n          },\n          f = function () {\n            if (a) {\n              var b = a.querySelectorAll(\".\" + o);\n              if (b.length > 0) for (var c = 0; c < b.length; c++) m.removeClass(b[c], o);\n            }\n          },\n          g = function (a) {\n            for (var b = 0; b < a.length; b++) m.addClass(a[b], o);\n          },\n          h = function (c) {\n            var d,\n              e = null,\n              h = m.getParentElement(c.target, { query: \"td, th\" }, !1, a);\n            h &&\n              n.table &&\n              n.start &&\n              ((e = m.getParentElement(h, { query: \"table\" }, !1, a)),\n              e &&\n                e === n.table &&\n                (f(),\n                (d = n.end),\n                (n.end = h),\n                (n.cells = m.table.getCellsBetween(n.start, h)),\n                n.cells.length > 1 && b.composer.selection.deselect(),\n                g(n.cells),\n                n.end !== d && b.fire(\"tableselectchange\").fire(\"tableselectchange:composer\")));\n          },\n          i = function (c) {\n            a.removeEventListener(\"mousemove\", h),\n              a.removeEventListener(\"mouseup\", i),\n              b.fire(\"tableselect\").fire(\"tableselect:composer\"),\n              setTimeout(function () {\n                k();\n              }, 0);\n          },\n          j = function (c) {\n            a.ownerDocument.removeEventListener(\"click\", j),\n              m.getParentElement(c.target, { query: \"table\" }, !1, a) != n.table &&\n                (f(),\n                (n.table = null),\n                (n.start = null),\n                (n.end = null),\n                b.fire(\"tableunselect\").fire(\"tableunselect:composer\"));\n          },\n          k = function () {\n            a.ownerDocument.addEventListener(\"click\", j);\n          },\n          l = function (c, d) {\n            (n.start = c),\n              (n.end = d),\n              (n.table = m.getParentElement(n.start, { query: \"table\" }, !1, a)),\n              (selectedCells = m.table.getCellsBetween(n.start, n.end)),\n              g(selectedCells),\n              k(),\n              b.fire(\"tableselect\").fire(\"tableselect:composer\");\n          },\n          m = wysihtml.dom,\n          n = { table: null, start: null, end: null, cells: null, select: l },\n          o = \"wysiwyg-tmp-selected-cell\";\n        return c();\n      };\n    (wysihtml.Editor.prototype.defaults.handleTables = !0),\n      (wysihtml.quirks.tableCellsSelection = d),\n      (wysihtml.views.Composer.prototype.observe = b);\n  })();\n//# sourceMappingURL=wysihtml.table_editing.min.map\n");
        return builder.toString();
      }
      public String getName() {
        return "wysihtmlTableEditing";
      }
    }
    ;
  }
  private static class wysihtmlTableEditingInitializer {
    static {
      _instance0.wysihtmlTableEditingInitializer();
    }
    static com.google.gwt.resources.client.TextResource get() {
      return wysihtmlTableEditing;
    }
  }
  public com.google.gwt.resources.client.TextResource wysihtmlTableEditing() {
    return wysihtmlTableEditingInitializer.get();
  }
  private void wysihtmlToolbarInitializer() {
    wysihtmlToolbar = new com.google.gwt.resources.client.TextResource() {
      // jar:file:/home/wsiqueir/.m2/repository/org/uberfire/uberfire-widgets-commons/0.0.0/uberfire-widgets-commons-0.0.0.jar!/org/uberfire/ext/widgets/common/client/resources/js/wysihtml/wysihtml.toolbar.min.js
      public String getText() {
        StringBuilder builder = new StringBuilder();
        builder.append("!(function (a) {\n  var b = a.dom,\n    c = \"wysihtml-command-dialog-opened\",\n    d = \"input, select, textarea\",\n    e = \"[data-wysihtml-dialog-field]\",\n    f = \"data-wysihtml-dialog-field\";\n  a.toolbar.Dialog = a.lang.Dispatcher.extend({\n    constructor: function (a, b) {\n      (this.link = a), (this.container = b);\n    },\n    _observe: function () {\n      if (!this._observed) {\n        var d = this,\n          e = function (a) {\n            var b = d._serialize();\n            d.fire(\"save\", b), d.hide(), a.preventDefault(), a.stopPropagation();\n          };\n        b.observe(d.link, \"click\", function () {\n          b.hasClass(d.link, c) &&\n            setTimeout(function () {\n              d.hide();\n            }, 0);\n        }),\n          b.observe(this.container, \"keydown\", function (b) {\n            var c = b.keyCode;\n            c === a.ENTER_KEY && e(b), c === a.ESCAPE_KEY && d.cancel();\n          }),\n          b.delegate(this.container, \"[data-wysihtml-dialog-action=save]\", \"click\", e),\n          b.delegate(this.container, \"[data-wysihtml-dialog-action=cancel]\", \"click\", function (a) {\n            d.cancel(), a.preventDefault(), a.stopPropagation();\n          }),\n          (this._observed = !0);\n      }\n    },\n    _serialize: function () {\n      for (var a = {}, b = this.container.querySelectorAll(e), c = b.length, d = 0; c > d; d++)\n        a[b[d].getAttribute(f)] = b[d].value;\n      return a;\n    },\n    _interpolate: function (a) {\n      for (\n        var b, c, d, g = document.querySelector(\":focus\"), h = this.container.querySelectorAll(e), i = h.length, j = 0;\n        i > j;\n        j++\n      )\n        (b = h[j]),\n          b !== g &&\n            ((a && \"hidden\" === b.type) ||\n              ((c = b.getAttribute(f)),\n              (d =\n                this.elementToChange && \"boolean\" != typeof this.elementToChange\n                  ? this.elementToChange.getAttribute(c) || \"\"\n                  : b.defaultValue),\n              (b.value = d)));\n    },\n    update: function (a) {\n      (this.elementToChange = a ? a : this.elementToChange), this._interpolate();\n    },\n    show: function (a) {\n      var e = this.container.querySelector(d);\n      if (\n        (this._observe(),\n        this.update(a),\n        b.addClass(this.link, c),\n        (this.container.style.display = \"\"),\n        (this.isOpen = !0),\n        this.fire(\"show\"),\n        e && !a)\n      )\n        try {\n          e.focus();\n        } catch (f) {}\n    },\n    _hide: function (a) {\n      (this.elementToChange = null),\n        b.removeClass(this.link, c),\n        (this.container.style.display = \"none\"),\n        (this.isOpen = !1);\n    },\n    hide: function () {\n      this._hide(), this.fire(\"hide\");\n    },\n    cancel: function () {\n      this._hide(), this.fire(\"cancel\");\n    },\n  });\n})(wysihtml),\n  (function (a) {\n    var b = (a.dom, \"[data-wysihtml-dialog-field]\"),\n      c = \"data-wysihtml-dialog-field\";\n    a.toolbar.Dialog_bgColorStyle = a.toolbar.Dialog.extend({\n      multiselect: !0,\n      _serialize: function () {\n        for (var a = {}, d = this.container.querySelectorAll(b), e = d.length, f = 0; e > f; f++)\n          a[d[f].getAttribute(c)] = d[f].value;\n        return a;\n      },\n      _interpolate: function (d) {\n        for (\n          var e,\n            f = document.querySelector(\":focus\"),\n            g = this.container.querySelectorAll(b),\n            h = g.length,\n            i = 0,\n            j = this.elementToChange\n              ? a.lang.object(this.elementToChange).isArray()\n                ? this.elementToChange[0]\n                : this.elementToChange\n              : null,\n            k = j ? j.getAttribute(\"style\") : null,\n            l = k ? a.quirks.styleParser.parseColor(k, \"background-color\") : null;\n          h > i;\n          i++\n        )\n          (e = g[i]),\n            e !== f &&\n              ((d && \"hidden\" === e.type) ||\n                (\"color\" === e.getAttribute(c) &&\n                  (l\n                    ? l[3] && 1 != l[3]\n                      ? (e.value = \"rgba(\" + l[0] + \",\" + l[1] + \",\" + l[2] + \",\" + l[3] + \");\")\n                      : (e.value = \"rgb(\" + l[0] + \",\" + l[1] + \",\" + l[2] + \");\")\n                    : (e.value = \"rgb(0,0,0);\"))));\n      },\n    });\n  })(wysihtml),\n  (function (a) {\n    a.toolbar.Dialog_createTable = a.toolbar.Dialog.extend({\n      show: function (a) {\n        this.base(a);\n      },\n    });\n  })(wysihtml),\n  (function (a) {\n    a.dom;\n    a.toolbar.Dialog_fontSizeStyle = a.toolbar.Dialog.extend({\n      multiselect: !0,\n      _serialize: function () {\n        return { size: this.container.querySelector('[data-wysihtml-dialog-field=\"size\"]').value };\n      },\n      _interpolate: function (b) {\n        var c = document.querySelector(\":focus\"),\n          d = this.container.querySelector(\"[data-wysihtml-dialog-field='size']\"),\n          e = this.elementToChange\n            ? a.lang.object(this.elementToChange).isArray()\n              ? this.elementToChange[0]\n              : this.elementToChange\n            : null,\n          f = e ? e.getAttribute(\"style\") : null,\n          g = f ? a.quirks.styleParser.parseFontSize(f) : null;\n        d && d !== c && g && !/^\\s*$/.test(g) && (d.value = g);\n      },\n    });\n  })(wysihtml),\n  (function (a) {\n    var b = \"[data-wysihtml-dialog-field]\",\n      c = \"data-wysihtml-dialog-field\";\n    a.toolbar.Dialog_foreColorStyle = a.toolbar.Dialog.extend({\n      multiselect: !0,\n      _serialize: function () {\n        for (var a = {}, d = this.container.querySelectorAll(b), e = d.length, f = 0; e > f; f++)\n          a[d[f].getAttribute(c)] = d[f].value;\n        return a;\n      },\n      _interpolate: function (d) {\n        for (\n          var e,\n            f,\n            g = a.quirks.styleParser,\n            h = document.querySelector(\":focus\"),\n            i = this.container.querySelectorAll(b),\n            j = i.length,\n            k = 0,\n            l = this.elementToChange\n              ? a.lang.object(this.elementToChange).isArray()\n                ? this.elementToChange[0]\n                : this.elementToChange\n              : null,\n            m = l ? l.getAttribute(\"style\") : null,\n            n = m ? g.parseColor(m, \"color\") : null;\n          j > k;\n          k++\n        )\n          (e = i[k]),\n            e !== h &&\n              ((d && \"hidden\" === e.type) ||\n                (\"color\" === e.getAttribute(c) &&\n                  ((f = (e.dataset.colormode || \"rgb\").toLowerCase()),\n                  (f = \"hex\" === f ? \"hash\" : f),\n                  n ? (e.value = g.unparseColor(n, f)) : (e.value = g.unparseColor([0, 0, 0], f)))));\n      },\n    });\n  })(wysihtml),\n  (function (a) {\n    var b = a.dom,\n      c = { position: \"relative\" },\n      d = { left: 0, margin: 0, opacity: 0, overflow: \"hidden\", padding: 0, position: \"absolute\", top: 0, zIndex: 1 },\n      e = {\n        cursor: \"inherit\",\n        fontSize: \"50px\",\n        height: \"50px\",\n        marginTop: \"-25px\",\n        outline: 0,\n        padding: 0,\n        position: \"absolute\",\n        right: \"-4px\",\n        top: \"50%\",\n      },\n      f = { \"x-webkit-speech\": \"\", speech: \"\" };\n    a.toolbar.Speech = function (g, h) {\n      var i = document.createElement(\"input\");\n      if (!a.browser.supportsSpeechApiOn(i)) return void (h.style.display = \"none\");\n      var j = g.editor.textarea.element.getAttribute(\"lang\");\n      j && (f.lang = j);\n      var k = document.createElement(\"div\");\n      a.lang.object(d).merge({ width: h.offsetWidth + \"px\", height: h.offsetHeight + \"px\" }),\n        b.insert(i).into(k),\n        b.insert(k).into(h),\n        b.setStyles(e).on(i),\n        b.setAttributes(f).on(i),\n        b.setStyles(d).on(k),\n        b.setStyles(c).on(h);\n      var l = \"onwebkitspeechchange\" in i ? \"webkitspeechchange\" : \"speechchange\";\n      b.observe(i, l, function () {\n        g.execCommand(\"insertText\", i.value), (i.value = \"\");\n      }),\n        b.observe(i, \"click\", function (a) {\n          b.hasClass(h, \"wysihtml-command-disabled\") && a.preventDefault(), a.stopPropagation();\n        });\n    };\n  })(wysihtml),\n  (function (a) {\n    function b(b, c) {\n      var d = b.commands.state(c.name, c.value);\n      return !c.dialog.multiselect && a.lang.object(d).isArray() && (d = 1 === d.length ? d[0] : !0), d;\n    }\n    var c = \"wysihtml-command-disabled\",\n      d = \"wysihtml-commands-disabled\",\n      e = \"wysihtml-command-active\",\n      f = \"wysihtml-action-active\",\n      g = a.dom;\n    (a.toolbar.Toolbar = Base.extend({\n      constructor: function (b, g, h) {\n        (this.editor = b),\n          (this.container = \"string\" == typeof g ? document.getElementById(g) : g),\n          (this.composer = b.composer),\n          this._getLinks(\"command\"),\n          this._getLinks(\"action\"),\n          this._observe(),\n          h && this.show(),\n          null != b.config.classNameCommandDisabled && (c = b.config.classNameCommandDisabled),\n          null != b.config.classNameCommandsDisabled && (d = b.config.classNameCommandsDisabled),\n          null != b.config.classNameCommandActive && (e = b.config.classNameCommandActive),\n          null != b.config.classNameActionActive && (f = b.config.classNameActionActive);\n        for (\n          var i = this.container.querySelectorAll(\"[data-wysihtml-command=insertSpeech]\"), j = i.length, k = 0;\n          j > k;\n          k++\n        )\n          new a.toolbar.Speech(this, i[k]);\n      },\n      _getLinks: function (b) {\n        for (\n          var c,\n            d,\n            e,\n            f,\n            g,\n            h,\n            i = (this[b + \"Links\"] = a.lang.array(this.container.querySelectorAll(\"[data-wysihtml-\" + b + \"]\")).get()),\n            j = i.length,\n            k = 0,\n            l = (this[b + \"Mapping\"] = {});\n          j > k;\n          k++\n        )\n          (c = i[k]),\n            (e = c.getAttribute(\"data-wysihtml-\" + b)),\n            (f = c.getAttribute(\"data-wysihtml-\" + b + \"-value\")),\n            (h = c.getAttribute(\"data-wysihtml-\" + b + \"-blank-value\")),\n            (d = this.container.querySelector(\"[data-wysihtml-\" + b + \"-group='\" + e + \"']\")),\n            (g = this._getDialog(c, e)),\n            (l[e + \":\" + f] = { link: c, group: d, name: e, value: f, tracksBlankValue: h, dialog: g, state: !1 });\n      },\n      _getDialog: function (b, c) {\n        var d,\n          e,\n          f = this,\n          g = this.container.querySelector(\"[data-wysihtml-dialog='\" + c + \"']\");\n        return (\n          g &&\n            ((d = a.toolbar[\"Dialog_\" + c] ? new a.toolbar[\"Dialog_\" + c](b, g) : new a.toolbar.Dialog(b, g)),\n            d.on(\"show\", function () {\n              (e = f.composer.selection.getBookmark()),\n                f.editor.fire(\"show:dialog\", { command: c, dialogContainer: g, commandLink: b });\n            }),\n            d.on(\"save\", function (a) {\n              e && f.composer.selection.setBookmark(e),\n                f._execCommand(c, a),\n                f.editor.fire(\"save:dialog\", { command: c, dialogContainer: g, commandLink: b }),\n                f._hideAllDialogs(),\n                f._preventInstantFocus(),\n                (e = void 0);\n            }),\n            d.on(\"cancel\", function () {\n              e && f.composer.selection.setBookmark(e),\n                f.editor.fire(\"cancel:dialog\", { command: c, dialogContainer: g, commandLink: b }),\n                (e = void 0),\n                f._preventInstantFocus();\n            }),\n            d.on(\"hide\", function () {\n              f.editor.fire(\"hide:dialog\", { command: c, dialogContainer: g, commandLink: b }), (e = void 0);\n            })),\n          d\n        );\n      },\n      execCommand: function (a, b) {\n        this.commandsDisabled || this._execCommand(a, b);\n      },\n      _execCommand: function (a, b) {\n        this.editor.focus(!1), this.composer.commands.exec(a, b), this._updateLinkStates();\n      },\n      execAction: function (a) {\n        var b = this.editor;\n        \"change_view\" === a &&\n          (b.currentView === b.textarea || \"source\" === b.currentView\n            ? b.fire(\"change_view\", \"composer\")\n            : b.fire(\"change_view\", \"textarea\")),\n          \"showSource\" == a && b.fire(\"showSource\");\n      },\n      _observe: function () {\n        for (\n          var c = this,\n            e = this.editor,\n            f = this.container,\n            h = this.commandLinks.concat(this.actionLinks),\n            i = h.length,\n            j = 0;\n          i > j;\n          j++\n        )\n          \"A\" === h[j].nodeName\n            ? g.setAttributes({ href: \"javascript:;\", unselectable: \"on\" }).on(h[j])\n            : g.setAttributes({ unselectable: \"on\" }).on(h[j]);\n        g.delegate(f, \"[data-wysihtml-command], [data-wysihtml-action]\", \"mousedown\", function (a) {\n          a.preventDefault();\n        }),\n          g.delegate(f, \"[data-wysihtml-command]\", \"click\", function (a) {\n            var d,\n              e = this,\n              f = e.getAttribute(\"data-wysihtml-command\"),\n              g = e.getAttribute(\"data-wysihtml-command-value\"),\n              h = c.commandMapping[f + \":\" + g];\n            g || !h.dialog ? c.execCommand(f, g) : ((d = b(c.composer, h)), h.dialog.show(d)), a.preventDefault();\n          }),\n          g.delegate(f, \"[data-wysihtml-action]\", \"click\", function (a) {\n            var b = this.getAttribute(\"data-wysihtml-action\");\n            c.execAction(b), a.preventDefault();\n          }),\n          e.on(\"interaction:composer\", function (a) {\n            c.preventFocus || c._updateLinkStates();\n          }),\n          (this._ownerDocumentClick = function (b) {\n            a.dom.contains(c.container, b.target) ||\n              a.dom.contains(c.composer.element, b.target) ||\n              (c._updateLinkStates(), c._preventInstantFocus());\n          }),\n          this.container.ownerDocument.addEventListener(\"click\", this._ownerDocumentClick, !1),\n          this.editor.on(\"destroy:composer\", this.destroy.bind(this)),\n          this.editor.config.handleTables &&\n            (e.on(\"tableselect:composer\", function () {\n              c.container.querySelectorAll('[data-wysihtml-hiddentools=\"table\"]')[0].style.display = \"\";\n            }),\n            e.on(\"tableunselect:composer\", function () {\n              c.container.querySelectorAll('[data-wysihtml-hiddentools=\"table\"]')[0].style.display = \"none\";\n            })),\n          e.on(\"change_view\", function (a) {\n            setTimeout(function () {\n              (c.commandsDisabled = \"composer\" !== a),\n                c._updateLinkStates(),\n                c.commandsDisabled ? g.addClass(f, d) : g.removeClass(f, d);\n            }, 0);\n          });\n      },\n      destroy: function () {\n        this.container.ownerDocument.removeEventListener(\"click\", this._ownerDocumentClick, !1);\n      },\n      _hideAllDialogs: function () {\n        var a = this.commandMapping;\n        for (var b in a) a[b].dialog && a[b].dialog.hide();\n      },\n      _preventInstantFocus: function () {\n        (this.preventFocus = !0),\n          setTimeout(\n            function () {\n              this.preventFocus = !1;\n            }.bind(this),\n            0\n          );\n      },\n      _updateLinkStates: function () {\n        var a,\n          d,\n          h,\n          i,\n          j,\n          k = this.commandMapping,\n          l = this.composer,\n          m = this.actionMapping;\n        for (a in k)\n          (i = k[a]),\n            this.commandsDisabled\n              ? ((d = !1), g.removeClass(i.link, e), i.group && g.removeClass(i.group, e), i.dialog && i.dialog.hide())\n              : ((d = this.composer.commands.state(i.name, i.value)),\n                g.removeClass(i.link, c),\n                i.group && g.removeClass(i.group, c)),\n            (i.state !== d || i.tracksBlankValue) &&\n              ((i.state = d),\n              d\n                ? i.tracksBlankValue\n                  ? g.removeClass(i.link, e)\n                  : (g.addClass(i.link, e),\n                    i.group && g.addClass(i.group, e),\n                    !i.dialog ||\n                      (\"undefined\" != typeof i.value && null !== i.value) ||\n                      (d && \"object\" == typeof d\n                        ? ((d = b(l, i)),\n                          (i.state = d),\n                          (j = i.dialog.container.dataset ? i.dialog.container.dataset.showdialogonselection : !1),\n            ");
        builder.append("              l.config.showToolbarDialogsOnSelection || j ? i.dialog.show(d) : i.dialog.update(d))\n                        : i.dialog.hide()))\n                : i.tracksBlankValue\n                ? g.addClass(i.link, e)\n                : (g.removeClass(i.link, e),\n                  i.group && g.removeClass(i.group, e),\n                  i.dialog && !i.value && i.dialog.hide()));\n        for (a in m)\n          (h = m[a]),\n            \"change_view\" === h.name &&\n              ((h.state = this.editor.currentView === this.editor.textarea || \"source\" === this.editor.currentView),\n              h.state ? g.addClass(h.link, f) : g.removeClass(h.link, f));\n      },\n      show: function () {\n        this.container.style.display = \"\";\n      },\n      hide: function () {\n        this.container.style.display = \"none\";\n      },\n    })),\n      (a.Editor.prototype.defaults.toolbar = void 0),\n      (a.Editor.prototype.defaults.showToolbarAfterInit = !0),\n      (a.Editor.prototype.defaults.showToolbarDialogsOnSelection = !0),\n      a.extendEditor(function (b) {\n        b.config.toolbar &&\n          ((b.toolbar = new a.toolbar.Toolbar(b, b.config.toolbar, b.config.showToolbarAfterInit)),\n          b.on(\"destroy:composer\", function () {\n            b && b.toolbar && b.toolbar.destroy();\n          }));\n      });\n  })(wysihtml);\n//# sourceMappingURL=wysihtml.toolbar.min.map\n");
        return builder.toString();
      }
      public String getName() {
        return "wysihtmlToolbar";
      }
    }
    ;
  }
  private static class wysihtmlToolbarInitializer {
    static {
      _instance0.wysihtmlToolbarInitializer();
    }
    static com.google.gwt.resources.client.TextResource get() {
      return wysihtmlToolbar;
    }
  }
  public com.google.gwt.resources.client.TextResource wysihtmlToolbar() {
    return wysihtmlToolbarInitializer.get();
  }
  private static java.util.HashMap<java.lang.String, com.google.gwt.resources.client.ResourcePrototype> resourceMap;
  private static com.google.gwt.resources.client.TextResource parserRules;
  private static com.google.gwt.resources.client.TextResource wysihtml;
  private static com.google.gwt.resources.client.TextResource wysihtmlAllCommands;
  private static com.google.gwt.resources.client.TextResource wysihtmlTableEditing;
  private static com.google.gwt.resources.client.TextResource wysihtmlToolbar;
  
  public ResourcePrototype[] getResources() {
    return new ResourcePrototype[] {
      parserRules(), 
      wysihtml(), 
      wysihtmlAllCommands(), 
      wysihtmlTableEditing(), 
      wysihtmlToolbar(), 
    };
  }
  public ResourcePrototype getResource(String name) {
    if (GWT.isScript()) {
      return getResourceNative(name);
    } else {
      if (resourceMap == null) {
        resourceMap = new java.util.HashMap<java.lang.String, com.google.gwt.resources.client.ResourcePrototype>();
        resourceMap.put("parserRules", parserRules());
        resourceMap.put("wysihtml", wysihtml());
        resourceMap.put("wysihtmlAllCommands", wysihtmlAllCommands());
        resourceMap.put("wysihtmlTableEditing", wysihtmlTableEditing());
        resourceMap.put("wysihtmlToolbar", wysihtmlToolbar());
      }
      return resourceMap.get(name);
    }
  }
  private native ResourcePrototype getResourceNative(String name) /*-{
    switch (name) {
      case 'parserRules': return this.@org.uberfire.ext.widgets.common.client.resources.HtmlEditorResources::parserRules()();
      case 'wysihtml': return this.@org.uberfire.ext.widgets.common.client.resources.HtmlEditorResources::wysihtml()();
      case 'wysihtmlAllCommands': return this.@org.uberfire.ext.widgets.common.client.resources.HtmlEditorResources::wysihtmlAllCommands()();
      case 'wysihtmlTableEditing': return this.@org.uberfire.ext.widgets.common.client.resources.HtmlEditorResources::wysihtmlTableEditing()();
      case 'wysihtmlToolbar': return this.@org.uberfire.ext.widgets.common.client.resources.HtmlEditorResources::wysihtmlToolbar()();
    }
    return null;
  }-*/;
}
